## PostgreSQL 统计信息(dbms_stats)导出，导入，锁定，替换  
      
### 作者      
digoal      
      
### 日期      
2019-03-18      
      
### 标签      
PostgreSQL , 统计信息 , 优化器 , dbms_stats , stats , 锁定  
      
----      
      
## 背景  
PostgreSQL 插件pg_dbms_stats插件，可以将统计信息导出，导入（锁定到内存），并且修改PLANNER的行为（从元数据pg_stats中读取改成从dbms_stats中读取统计信息）。从而达到统计信息的导出，锁定目的。  
  
pg_dbms_stats govern to hold and provide statistical information to generate execution plan, instead of statistic generated by ANALYZE. To use statistical information can be done by either of following ways.  
  
Lock the current statistic.  
  
Restore from backup.  
  
Use save in exported file.  
  
pg_dbms_stats manages its own statistics in some table/file groups.  
  
Currently valid statistics  
  
Statistics planner looking via pg_dbms_stats currently. It can be edit and turned back in production static information, also can be included in OS file backup.  
  
Backup statistic  
  
Statistical information can be backup any point of time and hold multiple version of statistics. Backup history is maintained in the history table. In restore feature uses to replaces with valid statistics.  
  
Statistic that have been exported  
  
This can be used to export Statistical information to save on OS file system. By changing name of file can be hold the multiple version of Statistics. Same import feature used to load valid statistical information.  
  
pg_dbms_stats provide its own function, it does not change original PostgreSQL statistics(pg_catalog.pg_class and pg_catalog.pg_statistic).  
  
![pic](20190318_06_pic_001.png)  
  
https://github.com/ossc-db/pg_dbms_stats  
  
## 参考  
http://pgdbmsstats.osdn.jp/pg_dbms_stats-en.html  
  
https://github.com/ossc-db  
  
[《PostgreSQL 统计信息pg_statistic格式及导入导出dump_stat - 兼容Oracle》](../201710/20171030_02.md)    
  
[《PostgreSQL pg_stat_ pg_statio_ 统计信息(scan,read,fetch,hit)源码解读》](../201610/20161018_03.md)    
  
     
  
      
      
      
      
  
  
  
  
  
  
#### [digoal's PostgreSQL文章入口](https://github.com/digoal/blog/blob/master/README.md "22709685feb7cab07d30f30387f0a9ae")
  
  
![digoal's weixin](../pic/digoal_weixin.jpg "f7ad92eeba24523fd47a6e1a0e691b59")
  
  
  
  
  
  
  
  
#### [免费领取阿里云RDS PostgreSQL实例、ECS虚拟机](https://www.aliyun.com/database/postgresqlactivity "57258f76c37864c6e6d23383d05714ea")
  
