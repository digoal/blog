## å¤§æ¨¡å‹çš„é‡åŒ–æ ¼å¼
        
### ä½œè€…        
digoal        
        
### æ—¥æœŸ        
2025-09-28        
        
### æ ‡ç­¾        
PostgreSQL , PolarDB , DuckDB , LLM , é‡åŒ– , ç²¾åº¦          
        
----        
        
## èƒŒæ™¯  
åœ¨ollama/huggingfaceçš„æ¨¡å‹ä¸­, å¯çœ‹åˆ°åŒä¸€ä¸ªæ¨¡å‹å¯èƒ½æœ‰å¤šä¸ªç²¾åº¦çš„ç‰ˆæœ¬, ç”¨æˆ·å¯æ ¹æ®ç¡¬ä»¶ç¯å¢ƒå’Œæ¨ç†æ•ˆæœçš„éœ€æ±‚æ¥é€‰æ‹©å¯¹åº”çš„ç²¾åº¦ç‰ˆæœ¬.   
- https://ollama.com/library/deepseek-v3.1/tags    
  
ç²¾åº¦åˆ°åº•æ˜¯ä»€ä¹ˆæ„æ€?  ollamaä¸­ä¸‹è½½çš„æ¨¡å‹, å…¶ä¸­q4_K_M, q8_0, fp16ä»£è¡¨ä»€ä¹ˆå«ä¹‰    
  
åœ¨ **Ollama**ï¼ˆä»¥åŠåº•å±‚ä¾èµ–çš„ **llama.cpp**ï¼‰ä¸­ï¼Œæ¨¡å‹åç§°åç¼€å¦‚ `q4_K_M`ã€`q8_0`ã€`fp16` ç­‰ï¼Œè¡¨ç¤ºçš„æ˜¯ **æ¨¡å‹çš„é‡åŒ–ï¼ˆQuantizationï¼‰æ ¼å¼**ã€‚é‡åŒ–æ˜¯ä¸€ç§**å‹ç¼©æ¨¡å‹ã€é™ä½æ˜¾å­˜/å†…å­˜å ç”¨ã€æå‡æ¨ç†é€Ÿåº¦**çš„æŠ€æœ¯ï¼Œé€šè¿‡å‡å°‘æ¨¡å‹æƒé‡çš„ç²¾åº¦ï¼ˆå¦‚ä»32ä½æµ®ç‚¹æ•°é™åˆ°4ä½æ•´æ•°ï¼‰æ¥å®ç°ã€‚

ä¸‹é¢è¯¦ç»†è§£é‡Šè¿™äº›åç¼€çš„å«ä¹‰ï¼š

---

### ğŸ§  1. `fp16`ï¼ˆåŠç²¾åº¦æµ®ç‚¹ï¼‰
- **å…¨ç§°**ï¼š16-bit Floating Pointï¼ˆåŠç²¾åº¦æµ®ç‚¹æ•°ï¼‰
- **ç²¾åº¦**ï¼šæ¯ä¸ªæƒé‡ç”¨ **2 å­—èŠ‚ï¼ˆ16 ä½ï¼‰** å­˜å‚¨
- **ç‰¹ç‚¹**ï¼š
  - **æœªé‡åŒ–**ï¼Œå±äºâ€œåŸå§‹â€ç²¾åº¦ï¼ˆæ¯” fp32 å°ä¸€åŠï¼‰
  - è´¨é‡æœ€é«˜ï¼Œä½†æ–‡ä»¶å¤§ã€å†…å­˜å ç”¨é«˜
  - é€šå¸¸ç”¨äº GPU æ¨ç†ï¼ˆNVIDIA æ”¯æŒè‰¯å¥½ï¼‰
- **é€‚ç”¨åœºæ™¯**ï¼šè¿½æ±‚æœ€é«˜ç”Ÿæˆè´¨é‡ï¼Œä¸”æœ‰è¶³å¤Ÿæ˜¾å­˜ï¼ˆå¦‚ 24GB+ï¼‰

> ä¾‹å¦‚ï¼š`llama3:8b-fp16` â‰ˆ 14â€“16 GB

---

### ğŸ”¢ 2. `q8_0`ï¼ˆ8-bit é‡åŒ–ï¼‰
- **å«ä¹‰**ï¼šæ¯ä¸ªæƒé‡ç”¨ **8 ä½æ•´æ•°ï¼ˆ1 å­—èŠ‚ï¼‰** è¡¨ç¤º
- **ç²¾åº¦**ï¼šçº¦ 256 ä¸ªç¦»æ•£å€¼
- **ç‰¹ç‚¹**ï¼š
  - è´¨é‡æ¥è¿‘ `fp16`ï¼Œè‚‰çœ¼å‡ ä¹çœ‹ä¸å‡ºå·®å¼‚
  - æ–‡ä»¶å¤§å°çº¦ä¸º `fp16` çš„ **ä¸€åŠ**
  - æ¨ç†é€Ÿåº¦è¾ƒå¿«ï¼ŒCPU/GPU éƒ½é€‚ç”¨
- **é€‚ç”¨åœºæ™¯**ï¼šå¹³è¡¡è´¨é‡ä¸æ€§èƒ½çš„â€œç”œç‚¹â€é€‰æ‹©

> ä¾‹å¦‚ï¼š`llama3:8b-q8_0` â‰ˆ 8â€“9 GB

---

### âš–ï¸ 3. `q4_K_M`ï¼ˆ4-bit é‡åŒ–ï¼ŒK-Quant åˆ†ç»„ï¼ŒMedium ç²¾åº¦ï¼‰
è¿™æ˜¯ **llama.cpp ç‰¹æœ‰çš„é«˜çº§ 4-bit é‡åŒ–æ–¹æ¡ˆ**ï¼Œå±äº **K-Quant ç³»åˆ—**ï¼Œæ¯”æ—©æœŸçš„ `q4_0` æ›´æ™ºèƒ½ã€‚

| éƒ¨åˆ† | å«ä¹‰ |
|------|------|
| `q4` | 4-bit é‡åŒ–ï¼ˆæ¯ä¸ªæƒé‡ä»…ç”¨ 4 ä½ï¼Œ0â€“15ï¼‰ |
| `_K` | ä½¿ç”¨ **K-Quant** æŠ€æœ¯ï¼ˆæŒ‰é€šé“/åˆ†ç»„åŠ¨æ€é‡åŒ–ï¼Œä¿ç•™æ›´å¤šä¿¡æ¯ï¼‰ |
| `_M` | **Medium** ç²¾åº¦ï¼ˆè¿˜æœ‰ `_S` = Smallï¼Œ`_L` = Largeï¼Œ`_M` æ˜¯æ¨èå¹³è¡¡ç‚¹ï¼‰ |

#### âœ… ä¼˜ç‚¹ï¼š
- æ–‡ä»¶æå°ï¼ˆçº¦ä¸º `fp16` çš„ **1/4**ï¼‰
- åœ¨ 4-bit ä¸­**è´¨é‡æœ€å¥½**ï¼ˆä¼˜äº `q4_0`ã€`q4_1`ï¼‰
- é€‚åˆ **CPU æ¨ç†**ï¼ˆå¦‚ç¬”è®°æœ¬ã€Mac Mç³»åˆ—ï¼‰

#### âŒ ç¼ºç‚¹ï¼š
- ç”Ÿæˆè´¨é‡ç•¥ä½äº `q8_0`ï¼ˆä½†åœ¨å¤šæ•°ä»»åŠ¡ä¸­ä»å¯ç”¨ï¼‰
- ä¸é€‚åˆé«˜ç²¾åº¦è¦æ±‚åœºæ™¯ï¼ˆå¦‚ä»£ç ç”Ÿæˆã€æ•°å­¦æ¨ç†ï¼‰

> ä¾‹å¦‚ï¼š`llama3:8b-q4_K_M` â‰ˆ 4.7 GB

---

### ğŸ“Š å¸¸è§é‡åŒ–æ ¼å¼å¯¹æ¯”ï¼ˆä»¥ Llama-3-8B ä¸ºä¾‹ï¼‰

| æ ¼å¼ | ä½å®½ | æ¨¡å‹å¤§å° | è´¨é‡ | é€Ÿåº¦ | æ¨èåœºæ™¯ |
|------|------|--------|------|------|--------|
| `fp16` | 16-bit | ~15 GB | â­â­â­â­â­ | ä¸­ | GPU é«˜è´¨é‡ç”Ÿæˆ |
| `q8_0` | 8-bit | ~9 GB | â­â­â­â­â˜† | å¿« | é€šç”¨é¦–é€‰ |
| `q6_K` | 6-bit | ~7 GB | â­â­â­â­ | å¾ˆå¿« | å¹³è¡¡ä¹‹é€‰ |
| `q5_K_M` | 5-bit | ~6 GB | â­â­â­â˜† | å¾ˆå¿« | è½»é‡é«˜è´¨é‡ |
| `q4_K_M` | 4-bit | ~4.7 GB | â­â­â­ | æå¿« | CPU / ä½é…è®¾å¤‡ |
| `q4_0` | 4-bit | ~4.7 GB | â­â­ | æå¿« | ä¸æ¨èï¼ˆè´¨é‡å·®ï¼‰ |

> ğŸ’¡ **å»ºè®®**ï¼š
> - æ™®é€šç”¨æˆ· â†’ é€‰ `q5_K_M` æˆ– `q6_K`
> - ä½é…ç”µè„‘ï¼ˆ<16GB å†…å­˜ï¼‰â†’ é€‰ `q4_K_M`
> - è¿½æ±‚è´¨é‡ï¼ˆæœ‰ GPUï¼‰â†’ é€‰ `q8_0` æˆ– `fp16`

---

### ğŸ” å¦‚ä½•æŸ¥çœ‹ Ollama æ”¯æŒçš„é‡åŒ–æ ¼å¼ï¼Ÿ
```bash
# åˆ—å‡ºæ‰€æœ‰å¯ç”¨æ¨¡å‹å˜ä½“
ollama show llama3 --modelfile
```
æˆ–è®¿é—® [Ollama Library](https://ollama.com/library) æŸ¥çœ‹æ¯ä¸ªæ¨¡å‹æ”¯æŒçš„æ ‡ç­¾ï¼ˆtagsï¼‰ã€‚

---

### æ€»ç»“
- **`fp16`**ï¼šé«˜ç²¾åº¦ï¼Œå¤§ä½“ç§¯  
- **`q8_0`**ï¼šé«˜è´¨é‡ + ä¸­ç­‰ä½“ç§¯  
- **`q4_K_M`**ï¼šå°ä½“ç§¯ + å¯æ¥å—è´¨é‡ï¼ˆ4-bit ä¸­æœ€ä¼˜ï¼‰

é€‰æ‹©åŸåˆ™ï¼š**åœ¨ä½ çš„ç¡¬ä»¶èƒ½æµç•…è¿è¡Œçš„å‰æä¸‹ï¼Œé€‰é‡åŒ–ä½æ•°æœ€é«˜çš„æ ¼å¼**ã€‚
  
#### [æœŸæœ› PostgreSQL|å¼€æºPolarDB å¢åŠ ä»€ä¹ˆåŠŸèƒ½?](https://github.com/digoal/blog/issues/76 "269ac3d1c492e938c0191101c7238216")
  
  
#### [PolarDB å¼€æºæ•°æ®åº“](https://openpolardb.com/home "57258f76c37864c6e6d23383d05714ea")
  
  
#### [PolarDB å­¦ä¹ å›¾è°±](https://www.aliyun.com/database/openpolardb/activity "8642f60e04ed0c814bf9cb9677976bd4")
  
  
#### [PostgreSQL è§£å†³æ–¹æ¡ˆé›†åˆ](../201706/20170601_02.md "40cff096e9ed7122c512b35d8561d9c8")
  
  
#### [å¾·å“¥ / digoal's Github - å…¬ç›Šæ˜¯ä¸€è¾ˆå­çš„äº‹.](https://github.com/digoal/blog/blob/master/README.md "22709685feb7cab07d30f30387f0a9ae")
  
  
#### [About å¾·å“¥](https://github.com/digoal/blog/blob/master/me/readme.md "a37735981e7704886ffd590565582dd0")
  
  
![digoal's wechat](../pic/digoal_weixin.jpg "f7ad92eeba24523fd47a6e1a0e691b59")
  
