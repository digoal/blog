## PostgreSQL 19 preview - group by all    
            
### 作者            
digoal            
            
### 日期            
2025-10-03           
            
### 标签            
PostgreSQL , PolarDB , DuckDB , group by all              
            
----            
            
## 背景     
PostgreSQL 19 将新增 `group by all` 的分组聚合语法alias, 在select子句中的所有不带聚合函数、窗口函数的选择列都会被作为`group by`子句. 方便简化SQL书写内容.  
  
https://github.com/postgres/postgres/commit/ef38a4d9756db9ae1d20f40aa39f3cf76059b81a  
  
```  
Add GROUP BY ALL.  
GROUP BY ALL is a form of GROUP BY that adds any TargetExpr that does  
not contain an aggregate or window function into the groupClause of  
the query, making it exactly equivalent to specifying those same  
expressions in an explicit GROUP BY list.  
  
This feature is useful for certain kinds of data exploration.  It's  
already present in some other DBMSes, and the SQL committee recently  
accepted it into the standard, so we can be reasonably confident in  
the syntax being stable.  We do have to invent part of the semantics,  
as the standard doesn't allow for expressions in GROUP BY, so they  
haven't specified what to do with window functions.  We assume that  
those should be treated like aggregates, i.e., left out of the  
constructed GROUP BY list.  
  
In passing, wordsmith some existing documentation about GROUP BY,  
and update some neglected synopsis entries in select_into.sgml.  
  
Author: David Christensen <david@pgguru.net>  
Reviewed-by: Tom Lane <tgl@sss.pgh.pa.us>  
Discussion: https://postgr.es/m/CAHM0NXjz0kDwtzoe-fnHAqPB1qA8_VJN0XAmCgUZ+iPnvP5LbA@mail.gmail.com  
```  
  
例子  
```  
  
   <para>  
    PostgreSQL also supports the syntax <literal>GROUP BY ALL</literal>,  
    which is equivalent to explicitly writing all select-list entries that  
    do not contain either an aggregate function or a window function.  
    This can greatly simplify ad-hoc exploration of data.  
    As an example, these queries are equivalent:  
<screen>  
<prompt>=&gt;</prompt> <userinput>SELECT a, b, a + b, sum(c) FROM test1 GROUP BY ALL;</userinput>  
 a | b | ?column? | sum  
---+---+----------+----  
 1 | 4 |        5 |  9  
 2 | 5 |        7 | 12  
 3 | 6 |        9 | 15  
(3 rows)  
  
<prompt>=&gt;</prompt> <userinput>SELECT a, b, a + b, sum(c) FROM test1 GROUP BY a, b, a + b;</userinput>  
 a | b | ?column? | sum  
---+---+----------+----  
 1 | 4 |        5 |  9  
 2 | 5 |        7 | 12  
 3 | 6 |        9 | 15  
(3 rows)  
</screen>  
```  
  
  
#### [期望 PostgreSQL|开源PolarDB 增加什么功能?](https://github.com/digoal/blog/issues/76 "269ac3d1c492e938c0191101c7238216")
  
  
#### [PolarDB 开源数据库](https://openpolardb.com/home "57258f76c37864c6e6d23383d05714ea")
  
  
#### [PolarDB 学习图谱](https://www.aliyun.com/database/openpolardb/activity "8642f60e04ed0c814bf9cb9677976bd4")
  
  
#### [PostgreSQL 解决方案集合](../201706/20170601_02.md "40cff096e9ed7122c512b35d8561d9c8")
  
  
#### [德哥 / digoal's Github - 公益是一辈子的事.](https://github.com/digoal/blog/blob/master/README.md "22709685feb7cab07d30f30387f0a9ae")
  
  
#### [About 德哥](https://github.com/digoal/blog/blob/master/me/readme.md "a37735981e7704886ffd590565582dd0")
  
  
![digoal's wechat](../pic/digoal_weixin.jpg "f7ad92eeba24523fd47a6e1a0e691b59")
  
