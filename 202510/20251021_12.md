## PostgreSQL 19 preview - 支持 `COPY 分区表 TO ...`      
                        
### 作者                        
digoal                        
                        
### 日期                        
2025-10-21                       
                        
### 标签                        
PostgreSQL , PolarDB , DuckDB , COPY TO             
                        
----                        
                        
## 背景    
PostgreSQL 19 支持 `copy 分区表 to ...`, 之前版本如果是分区表, 只能用`COPY (SELECT ...分区表) TO`来实现, 多了query 处理, 性能比现在的性能更差.  
  
需要注意的是, 行安全策略(RLS)在`copy to`中依旧有效, 你不能看到的数据, 用`copy to`也不可能导出.  
  
https://git.postgresql.org/gitweb/?p=postgresql.git;a=commit;h=4bea91f21f61d01bd40a4191a4a8c82d0959fffe  
```  
Support COPY TO for partitioned tables.  
author	Masahiko Sawada <msawada@postgresql.org>	  
Mon, 20 Oct 2025 17:38:52 +0000 (10:38 -0700)  
committer	Masahiko Sawada <msawada@postgresql.org>	  
Mon, 20 Oct 2025 17:38:52 +0000 (10:38 -0700)  
commit	4bea91f21f61d01bd40a4191a4a8c82d0959fffe  
tree	818ad75c459535a93f9317b1870802416bd4ae69	tree  
parent	d74cfe3263fa0a35cb962570697f422775cd12d6	commit | diff  
Support COPY TO for partitioned tables.  
  
Previously, COPY TO command didn't support directly specifying  
partitioned tables so users had to use COPY (SELECT ...) TO variant.  
  
This commit adds direct COPY TO support for partitioned  
tables, improving both usability and performance. Performance tests  
show it's faster than the COPY (SELECT ...) TO variant as it avoids  
the overheads of query processing and sending results to the COPY TO  
command.  
  
When used with partitioned tables, COPY TO copies the same rows as  
SELECT * FROM table. Row-level security policies of the partitioned  
table are applied in the same way as when executing COPY TO on a plain  
table.  
  
Author: jian he <jian.universality@gmail.com>  
Reviewed-by: vignesh C <vignesh21@gmail.com>  
Reviewed-by: David Rowley <dgrowleyml@gmail.com>  
Reviewed-by: Melih Mutlu <m.melihmutlu@gmail.com>  
Reviewed-by: Kirill Reshke <reshkekirill@gmail.com>  
Reviewed-by: Atsushi Torikoshi <torikoshia@oss.nttdata.com>  
Reviewed-by: Álvaro Herrera <alvherre@kurilemu.de>  
Reviewed-by: Masahiko Sawada <sawada.mshk@gmail.com>  
Reviewed-by: Chao Li <li.evan.chao@gmail.com>  
Discussion: https://postgr.es/m/CACJufxEZt%2BG19Ors3bQUq-42-61__C%3Dy5k2wk%3DsHEFRusu7%3DiQ%40mail.gmail.com  
```  
    
#### [期望 PostgreSQL|开源PolarDB 增加什么功能?](https://github.com/digoal/blog/issues/76 "269ac3d1c492e938c0191101c7238216")
  
  
#### [PolarDB 开源数据库](https://openpolardb.com/home "57258f76c37864c6e6d23383d05714ea")
  
  
#### [PolarDB 学习图谱](https://www.aliyun.com/database/openpolardb/activity "8642f60e04ed0c814bf9cb9677976bd4")
  
  
#### [PostgreSQL 解决方案集合](../201706/20170601_02.md "40cff096e9ed7122c512b35d8561d9c8")
  
  
#### [德哥 / digoal's Github - 公益是一辈子的事.](https://github.com/digoal/blog/blob/master/README.md "22709685feb7cab07d30f30387f0a9ae")
  
  
#### [About 德哥](https://github.com/digoal/blog/blob/master/me/readme.md "a37735981e7704886ffd590565582dd0")
  
  
![digoal's wechat](../pic/digoal_weixin.jpg "f7ad92eeba24523fd47a6e1a0e691b59")
  
