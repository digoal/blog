## å¤§å­¦ç”Ÿæ•°æ®åº“å®è·µè¯¾: 7.3 äº‘ç«¯æ¨¡å‹APIä»‹ç»       
              
### ä½œè€…              
digoal              
              
### æ—¥æœŸ              
2025-12-10              
              
### æ ‡ç­¾              
PostgreSQL , DuckDB , è¯­ä¹‰æœç´¢ , å‘é‡æœç´¢ , å…³é”®è¯æ£€ç´¢ , å…¨æ–‡æ£€ç´¢ , æ ‡é‡æ£€ç´¢ , æ··åˆæœç´¢ , å¤šæ¨¡æ€æœç´¢ , é‡æ’åº , embedding , document split , ORC , å¤§æ¨¡å‹ , å¤šæ¨¡æ€å¤§æ¨¡å‹ , Dify , å‹åŠ›æµ‹è¯• , ç´¢å¼•ä¼˜åŒ– , å€’æ’å‘é‡ç´¢å¼• , Ivfflat , å›¾å‘é‡ç´¢å¼• , HNSW , DiskANN , é‡åŒ– , rabitq , sbq , äºŒå€¼é‡åŒ– , bm25 , ç›¸å…³æ€§ , ç›¸ä¼¼æ€§ , å¬å›ç‡ , pgbench , æ•°æ®é›† , ann-benchmarks , å›¾æœç´¢ , PGQ , é€’å½’ , æ·±åº¦ä¼˜å…ˆ , å¹¿åº¦ä¼˜å…ˆ , æœ€çŸ­è·¯å¾„ , Nåº¦å…³ç³» , LLM , Ollama              
              
----              
              
## èƒŒæ™¯              
    
https://chat.qwen.ai/c/guest :     
    
äº‘ç«¯æ¨¡å‹APIä»‹ç»(ä¾‹å¦‚ é˜¿é‡Œäº‘)     
    
-----    
    
äº‘ç«¯æ¨¡å‹ API æ˜¯æŒ‡äº‘æœåŠ¡æä¾›å•†ï¼ˆå¦‚é˜¿é‡Œäº‘ã€è…¾è®¯äº‘ã€åä¸ºäº‘ã€ç™¾åº¦æ™ºèƒ½äº‘ã€AWSã€Google Cloudã€Azure ç­‰ï¼‰é€šè¿‡å…¶å¹³å°æä¾›çš„ã€ç”¨äºè°ƒç”¨å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰æˆ–å…¶ä»– AI æ¨¡å‹çš„æ¥å£æœåŠ¡ã€‚ç”¨æˆ·æ— éœ€æœ¬åœ°éƒ¨ç½²æ¨¡å‹ï¼Œåªéœ€é€šè¿‡ HTTP/HTTPS è¯·æ±‚å³å¯ä½¿ç”¨å¼ºå¤§çš„ AI èƒ½åŠ›ã€‚ä»¥ä¸‹ä»¥ **é˜¿é‡Œäº‘** ä¸ºä¾‹ï¼Œä»‹ç»å…¶äº‘ç«¯æ¨¡å‹ API çš„æ ¸å¿ƒå†…å®¹ã€‚    
    
    
### ä¸€ã€é˜¿é‡Œäº‘æ¨¡å‹ API æ¦‚è§ˆ    
    
é˜¿é‡Œäº‘æä¾› **é€šä¹‰åƒé—®ï¼ˆQwenï¼‰** ç³»åˆ—å¤§æ¨¡å‹ï¼ŒåŒ…æ‹¬ï¼š    
    
- **Qwen-Max**ï¼šæ€§èƒ½æœ€å¼ºï¼Œé€‚åˆå¤æ‚å¤šæ­¥éª¤ä»»åŠ¡    
- **Qwen-Plus**ï¼šæ€§èƒ½ä¸æˆæœ¬å¹³è¡¡    
- **Qwen-Turbo**ï¼šå“åº”å¿«ã€æˆæœ¬ä½ï¼Œé€‚åˆç®€å•ä»»åŠ¡    
- **Qwen-VL / Qwen-Audio**ï¼šå¤šæ¨¡æ€æ¨¡å‹ï¼ˆå›¾åƒã€è¯­éŸ³ç­‰ï¼‰    
    
æ‰€æœ‰æ¨¡å‹å‡é€šè¿‡ **Model Studioï¼ˆç™¾ç‚¼ï¼‰** æˆ– **DashScope** å¹³å°å¯¹å¤–æä¾› API æœåŠ¡ã€‚    
    
> å®˜æ–¹å¹³å°ï¼š[DashScope](https://dashscope.aliyun.com/)    
    
    
    
### äºŒã€ä¸»è¦ API åŠŸèƒ½    
    
#### 1. **æ–‡æœ¬ç”Ÿæˆï¼ˆText Generationï¼‰**    
- è¾“å…¥æ–‡æœ¬æç¤ºï¼ˆpromptï¼‰ï¼Œè¿”å› AI ç”Ÿæˆçš„æ–‡æœ¬    
- æ”¯æŒå¯¹è¯ã€åˆ›ä½œã€æ‘˜è¦ã€ç¿»è¯‘ã€ä»£ç ç”Ÿæˆç­‰    
- ç¤ºä¾‹è°ƒç”¨ï¼ˆPythonï¼‰ï¼š    
    
```python    
from http import HTTPStatus    
import dashscope    
    
dashscope.api_key = "your-api-key"    
    
response = dashscope.Generation.call(    
    model="qwen-turbo",    
    prompt="ä½ å¥½ï¼Œè¯·ä»‹ç»ä¸€ä¸‹é€šä¹‰åƒé—®ã€‚"    
)    
    
if response.status_code == HTTPStatus.OK:    
    print(response.output.text)    
else:    
    print(f"Error: {response.code} - {response.message}")    
```    
    
#### 2. **å¤šè½®å¯¹è¯ï¼ˆChat Completionï¼‰**    
- æ”¯æŒå¸¦å†å²ä¸Šä¸‹æ–‡çš„å¯¹è¯    
- ä½¿ç”¨ `messages` å­—æ®µä¼ é€’å¯¹è¯å†å²    
    
```python    
response = dashscope.Generation.call(    
    model="qwen-plus",    
    messages=[    
        {"role": "user", "content": "ä½ æ˜¯è°ï¼Ÿ"},    
        {"role": "assistant", "content": "æˆ‘æ˜¯é€šä¹‰åƒé—®ï¼Œé˜¿é‡Œå·´å·´ç ”å‘çš„å¤§æ¨¡å‹ã€‚"},    
        {"role": "user", "content": "ä½ èƒ½åšä»€ä¹ˆï¼Ÿ"}    
    ]    
)    
```    
    
#### 3. **å¤šæ¨¡æ€èƒ½åŠ›ï¼ˆQwen-VLï¼‰**    
- æ”¯æŒå›¾æ–‡ç†è§£ã€å›¾åƒæè¿°ã€è§†è§‰é—®ç­”ç­‰    
- å¯ä¸Šä¼ å›¾ç‰‡ URL æˆ– Base64 ç¼–ç     
    
#### 4. **æµå¼å“åº”ï¼ˆStream Outputï¼‰**    
- å®æ—¶è¿”å›ç”Ÿæˆç»“æœï¼Œé€‚åˆèŠå¤©ç•Œé¢    
- è®¾ç½® `stream=True`    
    
#### 5. **è‡ªå®šä¹‰å‚æ•°**    
- æ§åˆ¶ `temperature`ï¼ˆåˆ›é€ æ€§ï¼‰ã€`top_p`ã€`max_tokens` ç­‰    
- æ”¯æŒ JSON è¾“å‡ºæ ¼å¼ï¼ˆéƒ¨åˆ†æ¨¡å‹ï¼‰    
    
    
    
### ä¸‰ã€è®¤è¯ä¸è®¡è´¹    
    
- **API Key**ï¼šåœ¨ [DashScope æ§åˆ¶å°](https://dashscope.console.aliyun.com/apiKey) è·å–    
- **æŒ‰é‡è®¡è´¹**ï¼šä¸åŒæ¨¡å‹å•ä»·ä¸åŒï¼ˆå¦‚ Qwen-Turbo çº¦ Â¥0.008 / åƒ tokensï¼‰    
- **å…è´¹é¢åº¦**ï¼šæ–°ç”¨æˆ·é€šå¸¸æœ‰å…è´¹è°ƒç”¨é¢åº¦ï¼ˆå¦‚æ¯æœˆ 100 ä¸‡ tokensï¼‰    
    
    
    
### å››ã€ä¼˜åŠ¿ä¸é€‚ç”¨åœºæ™¯    
    
| ä¼˜åŠ¿ | è¯´æ˜ |    
|------|------|    
| **å…è¿ç»´** | æ— éœ€ GPU æœåŠ¡å™¨ï¼Œå¼€ç®±å³ç”¨ |    
| **å¼¹æ€§æ‰©å±•** | è‡ªåŠ¨åº”å¯¹é«˜å¹¶å‘è¯·æ±‚ |    
| **æ¨¡å‹æ›´æ–°** | äº‘å‚å•†æŒç»­ä¼˜åŒ–æ¨¡å‹ï¼Œç”¨æˆ·è‡ªåŠ¨å—ç›Š |    
| **å®‰å…¨åˆè§„** | é˜¿é‡Œäº‘æä¾›æ•°æ®åŠ å¯†ã€æƒé™æ§åˆ¶ã€åˆè§„è®¤è¯ |    
    
**å…¸å‹åº”ç”¨åœºæ™¯**ï¼š    
- æ™ºèƒ½å®¢æœ    
- å†…å®¹åˆ›ä½œï¼ˆæ–‡æ¡ˆã€å‰§æœ¬ã€é‚®ä»¶ï¼‰    
- ä»£ç è¾…åŠ©    
- ä¼ä¸šçŸ¥è¯†åº“é—®ç­”    
- æ•™è‚²è¾…å¯¼    
- å¤šæ¨¡æ€åˆ†æï¼ˆå¦‚å•†å“å›¾è¯†åˆ«ï¼‰    
    
    
    
### äº”ã€å…¶ä»–äº‘å‚å•†å¯¹æ¯”ï¼ˆç®€è¦ï¼‰    
    
| å‚å•† | æ¨¡å‹ç³»åˆ— | å¹³å° | ç‰¹ç‚¹ |    
|------|--------|------|------|    
| é˜¿é‡Œäº‘ | é€šä¹‰åƒé—®ï¼ˆQwenï¼‰ | DashScope | ä¸­æ–‡ä¼˜åŒ–å¥½ï¼Œç”Ÿæ€æ•´åˆå¼º |    
| è…¾è®¯äº‘ | æ··å…ƒï¼ˆHunYuanï¼‰ | è…¾è®¯äº‘ AI | ä¸å¾®ä¿¡ã€è…¾è®¯æ–‡æ¡£æ·±åº¦é›†æˆ |    
| ç™¾åº¦æ™ºèƒ½äº‘ | æ–‡å¿ƒå¤§æ¨¡å‹ | åƒå¸† | äº§ä¸šåº”ç”¨ä¸°å¯Œ |    
| åä¸ºäº‘ | ç›˜å¤å¤§æ¨¡å‹ | ModelArts | ä¼ä¸šçº§å®‰å…¨ï¼Œç¡¬ä»¶ååŒ |    
| AWS | Bedrockï¼ˆClaudeã€Llama ç­‰ï¼‰ | Amazon Bedrock | æ”¯æŒå¤šå‚å•†æ¨¡å‹ |    
| Azure | Azure OpenAIï¼ˆGPT-4ï¼‰ | Azure AI | ä¼ä¸šçº§éƒ¨ç½²ï¼ŒGPT å®˜æ–¹æˆæƒ |    
    
    
    
### å…­ã€å¿«é€Ÿå¼€å§‹æ­¥éª¤ï¼ˆé˜¿é‡Œäº‘ DashScopeï¼‰    
    
1. æ³¨å†Œé˜¿é‡Œäº‘è´¦å·    
2. å¼€é€š [DashScope æœåŠ¡](https://dashscope.console.aliyun.com/)    
3. åˆ›å»º API Key    
4. å®‰è£… SDKï¼š`pip install dashscope`    
5. ç¼–å†™è°ƒç”¨ä»£ç ï¼ˆå¦‚ä¸Šç¤ºä¾‹ï¼‰    
6. æŸ¥çœ‹ç”¨é‡ä¸è´¦å•    
    
-----  
  
ä¸‹é¢ç”¨**é€šä¿—æ˜“æ‡‚ã€ç”Ÿæ´»åŒ–çš„æ–¹å¼**ï¼Œè§£é‡Šå¤§æ¨¡å‹ï¼ˆæ¯”å¦‚é˜¿é‡Œäº‘é€šä¹‰åƒé—®ã€ChatGPT ç­‰ï¼‰API ä¸­å‡ ä¸ªæœ€å¸¸è§å‚æ•°çš„**åŸç†å’Œä½œç”¨**ï¼š  
  
  
  
### 1. **temperatureï¼ˆæ¸©åº¦ï¼‰**    
> ğŸŒ¡ï¸ ç±»æ¯”ï¼š**â€œAI çš„æ€§æ ¼æ˜¯ç¨³é‡è¿˜æ˜¯ç–¯ç‹‚ï¼Ÿâ€**  
  
- **ä½œç”¨**ï¼šæ§åˆ¶ AI å›ç­”çš„**éšæœºæ€§ / åˆ›é€ æ€§**ã€‚  
- **åŸç†**ï¼šæ•°å­—è¶Šå°ï¼ŒAI è¶Šâ€œä¿å®ˆâ€ï¼›æ•°å­—è¶Šå¤§ï¼ŒAI è¶Šâ€œæ”¾é£è‡ªæˆ‘â€ã€‚  
  
| temperature å€¼ | è¡Œä¸ºè¡¨ç° | é€‚åˆåœºæ™¯ |  
|----------------|--------|--------|  
| **0.1ï¼ˆä½ï¼‰** | æ€»æ˜¯é€‰æœ€å¯èƒ½ã€æœ€å®‰å…¨çš„è¯ â†’ å›ç­”ç¨³å®šã€é‡å¤æ€§é«˜ | æ•°å­¦é¢˜ã€äº‹å®é—®ç­”ã€ä»£ç ç”Ÿæˆ |  
| **0.7ï¼ˆä¸­ï¼‰** | æœ‰ç‚¹åˆ›æ„ï¼Œä½†ä¸è‡³äºç¦»è°± â†’ è‡ªç„¶å¯¹è¯ | æ™®é€šèŠå¤©ã€å†™é‚®ä»¶ |  
| **1.0+ï¼ˆé«˜ï¼‰** | éšæœºæ€§å¼ºï¼Œå¯èƒ½è¹¦å‡ºå¥‡æ€ªä½†æœ‰è¶£çš„æƒ³æ³• | å†™è¯—ã€ç¼–æ•…äº‹ã€å¤´è„‘é£æš´ |  
  
âœ… **å°è´´å£«**ï¼š    
> å°±åƒâ€œç…®æ±¤â€â€”â€”æ¸©åº¦ä½ï¼Œå‘³é“æ¸©å’Œï¼›æ¸©åº¦é«˜ï¼Œå‘³é“æµ“çƒˆä½†å¯èƒ½ç³Šé”…ã€‚  
  
  
  
### 2. **top_pï¼ˆæ ¸é‡‡æ ·ï¼Œä¹Ÿå« nucleus samplingï¼‰**    
> ğŸ¯ ç±»æ¯”ï¼š**â€œAI åªä»æœ€é è°±çš„å‡ ä¸ªé€‰é¡¹é‡ŒæŒ‘ç­”æ¡ˆâ€**  
  
- **ä½œç”¨**ï¼šé™åˆ¶ AI åªä»â€œç´¯è®¡æ¦‚ç‡è¾¾åˆ° p çš„çƒ­é—¨è¯â€ä¸­é€‰æ‹©ï¼Œ**é¿å…èƒ¡è¯´å…«é“**ã€‚  
- **åŸç†**ï¼šä¸æ˜¯çœ‹å›ºå®šæ•°é‡çš„è¯ï¼Œè€Œæ˜¯çœ‹â€œç´¯ç§¯æ¦‚ç‡â€ã€‚  
  
ä¸¾ä¸ªä¾‹å­ï¼š    
å‡è®¾ AI ä¸‹ä¸€ä¸ªè¯å¯èƒ½æœ‰è¿™äº›é€‰æ‹©ï¼ˆæŒ‰å¯èƒ½æ€§æ’åºï¼‰ï¼š  
- â€œå¾ˆå¥½â€ï¼ˆ50%ï¼‰  
- â€œä¸é”™â€ï¼ˆ30%ï¼‰  
- â€œè¿˜è¡Œâ€ï¼ˆ15%ï¼‰  
- â€œç¦»è°±â€ï¼ˆ4%ï¼‰  
- â€œé¦™è•‰â€ï¼ˆ1%ï¼‰  
  
å¦‚æœè®¾ **top_p = 0.85**ï¼ŒAI ä¼šæŠŠå‰ä¸‰ä¸ªè¯ï¼ˆ50%+30%+15% = 95% > 85%ï¼‰çº³å…¥å€™é€‰æ± ï¼Œä½†**æ’é™¤â€œç¦»è°±â€å’Œâ€œé¦™è•‰â€**è¿™ç§ä½æ¦‚ç‡è’è°¬é€‰é¡¹ã€‚  
  
âœ… **å°è´´å£«**ï¼š    
> top_p å’Œ temperature **ä¸è¦åŒæ—¶è°ƒå¤ªé«˜**ï¼Œå¦åˆ™ AI ä¼šåˆç–¯åˆä¸å¯æ§ã€‚  
  
  
  
### 3. **max_tokensï¼ˆæœ€å¤§è¾“å‡ºé•¿åº¦ï¼‰**    
> ğŸ“ ç±»æ¯”ï¼š**â€œæœ€å¤šèƒ½å†™å¤šå°‘å­—ï¼Ÿâ€**  
  
- **ä½œç”¨**ï¼šé™åˆ¶ AI ä¸€æ¬¡æœ€å¤šç”Ÿæˆå¤šå°‘ä¸ªâ€œè¯å…ƒâ€ï¼ˆtokenï¼Œå¤§è‡´â‰ˆ1ä¸ªè¯æˆ–æ ‡ç‚¹ï¼‰ã€‚  
- **åŸç†**ï¼šé˜²æ­¢ AI å•°å—¦æˆ–æ— é™è¾“å‡ºï¼›ä¹Ÿæ§åˆ¶æˆæœ¬ï¼ˆæŒ‰ token è®¡è´¹ï¼‰ã€‚  
  
ä¾‹å¦‚ï¼š  
- è®¾ `max_tokens=50` â†’ å›ç­”å¾ˆçŸ­ï¼ˆé€‚åˆå¡«ç©ºã€ç®€ç­”ï¼‰  
- è®¾ `max_tokens=2000` â†’ èƒ½å†™ä¸€ç¯‡å°ä½œæ–‡ï¼ˆé€‚åˆæŠ¥å‘Šã€æ•…äº‹ï¼‰  
  
âš ï¸ æ³¨æ„ï¼š    
è¾“å…¥ + è¾“å‡º çš„æ€» token ä¸èƒ½è¶…è¿‡æ¨¡å‹ä¸Šé™ï¼ˆå¦‚ Qwen-Turbo æœ€å¤š 6000 tokensï¼‰ã€‚  
  
âœ… **å°è´´å£«**ï¼š    
> å°±åƒå†™ä½œæ–‡â€”â€”è€å¸ˆè¯´â€œä¸è¶…è¿‡ 200 å­—â€ï¼Œä½ å°±ä¸èƒ½å†™ä¸¤é¡µçº¸ã€‚  
  
  
  
### 4. **stopï¼ˆåœæ­¢è¯ï¼‰**    
> ğŸ›‘ ç±»æ¯”ï¼š**â€œè¯´åˆ°è¿™ä¸ªè¯å°±é—­å˜´ï¼â€**  
  
- **ä½œç”¨**ï¼šå½“ AI ç”Ÿæˆåˆ°æŸä¸ªè¯ï¼ˆæˆ–ç¬¦å·ï¼‰æ—¶ï¼Œ**ç«‹å³åœæ­¢è¾“å‡º**ã€‚  
- **å¸¸è§ç”¨æ³•**ï¼š  
  - `"stop": ["\n", "ã€‚"]` â†’ é‡åˆ°æ¢è¡Œæˆ–å¥å·å°±åœ  
  - `"stop": ["ç”¨æˆ·ï¼š"]` â†’ é˜²æ­¢ AI è‡ªå·±æ‰®æ¼”ç”¨æˆ·ç»§ç»­å¯¹è¯  
  
âœ… **å°è´´å£«**ï¼š    
> å°±åƒä½ è®©æœ‹å‹è®²æ•…äº‹ï¼šâ€œè®²åˆ°â€˜ç‹å­é†’æ¥â€™å°±åœï¼â€ é˜²æ­¢ä»–è®²åˆ°æ˜å¤©ã€‚  
  
  
  
### 5. **streamï¼ˆæµå¼è¾“å‡ºï¼‰**    
> ğŸ’§ ç±»æ¯”ï¼š**â€œæ˜¯ç­‰ä¸€é”…æ±¤ç‚–å¥½å†ç«¯ä¸Šï¼Œè¿˜æ˜¯ä¸€è¾¹ç…®ä¸€è¾¹èˆ€ç»™ä½ ï¼Ÿâ€**  
  
- **ä½œç”¨**ï¼šæ˜¯å¦**é€å­—/é€å¥è¿”å›ç»“æœ**ï¼ˆè€Œä¸æ˜¯ç­‰å…¨éƒ¨ç”Ÿæˆå®Œï¼‰ã€‚  
- **åŸç†**ï¼šå¼€ `stream=true`ï¼ŒAPI ä¼šåƒæ‰“å­—æœºä¸€æ ·ï¼Œä¸€ä¸ªå­—ä¸€ä¸ªå­—â€œæµâ€å‡ºæ¥ã€‚  
  
âœ… **é€‚åˆåœºæ™¯**ï¼š    
- èŠå¤©ç•Œé¢ï¼ˆç”¨æˆ·ä¸æƒ³å¹²ç­‰ï¼‰  
- é•¿æ–‡æœ¬ç”Ÿæˆï¼ˆå¦‚å†™å°è¯´ï¼‰  
  
âŒ ä¸é€‚åˆï¼š    
- æ‰¹é‡å¤„ç†ã€åå°ä»»åŠ¡ï¼ˆéœ€è¦å®Œæ•´ç»“æœå†å¤„ç†ï¼‰  
  
  
  
### æ€»ç»“ä¸€å¼ è¡¨ï¼š  
  
| å‚æ•° | ä½œç”¨ | é€šä¿—ç†è§£ | å¸¸ç”¨å€¼ |  
|------|------|--------|--------|  
| `temperature` | æ§åˆ¶åˆ›é€ åŠ› | â€œAI æ˜¯æœºå™¨äººè¿˜æ˜¯è¯—äººï¼Ÿâ€ | 0.1 ~ 1.0 |  
| `top_p` | æ§åˆ¶é è°±ç¨‹åº¦ | â€œåªä»å¥½é€‰é¡¹é‡ŒæŒ‘â€ | 0.8 ~ 0.95 |  
| `max_tokens` | æ§åˆ¶å›ç­”é•¿åº¦ | â€œæœ€å¤šè¯´å¤šå°‘å­—ï¼Ÿâ€ | 50 ~ 2000+ |  
| `stop` | å¼ºåˆ¶åœæ­¢ | â€œè¯´åˆ°XXå°±é—­å˜´ï¼â€ | `["\n", "ã€‚"]` |  
| `stream` | å®æ—¶è¾“å‡º | â€œè¾¹æƒ³è¾¹è¯´â€è¿˜æ˜¯â€œæƒ³å®Œå†è¯´â€ï¼Ÿ | `true` / `false` |  
  
  
  
è¿™äº›å‚æ•°ç»„åˆä½¿ç”¨ï¼Œå°±èƒ½è®© AI æ—¢**èªæ˜**åˆ**å¬è¯**ï¼    
æ¯”å¦‚ï¼šå†™å¹¿å‘Šæ–‡æ¡ˆ â†’ `temperature=0.8, max_tokens=300`ï¼›    
æŸ¥å¤©æ°” â†’ `temperature=0.1, max_tokens=50`ã€‚  
  
---

**è¦ä¹‰å›¾ç¤º**  

### 1. äº‘ç«¯ API è°ƒç”¨å…¨é“¾è·¯æµç¨‹

è¿™å¼ å›¾å±•ç¤ºäº†ä»ä½ çš„ä»£ç åˆ°äº‘ç«¯æœåŠ¡å™¨ï¼Œå†è¿”å›ç­”æ¡ˆçš„å®Œæ•´è·¯å¾„ã€‚

```mermaid
sequenceDiagram
    participant User as ä½ çš„ä»£ç  (SDK/cURL)
    participant Auth as è®¤è¯å±‚ (API Key)
    participant Cloud as äº‘ç«¯å¹³å° (å¦‚ DashScope)
    participant Model as å¤§æ¨¡å‹ (å¦‚ Qwen-Max)

    User->>Auth: æºå¸¦ API Key å‘é€è¯·æ±‚ (Prompt + å‚æ•°)
    Auth->>Auth: éªŒè¯èº«ä»½ & æ£€æŸ¥ä½™é¢
    Auth->>Cloud: è½¬å‘åˆæ³•è¯·æ±‚
    Cloud->>Model: æ‰§è¡Œæ¨ç†è®¡ç®—
    Model-->>Cloud: ç”Ÿæˆç»“æœ Token
    Cloud-->>User: è¿”å› JSON å“åº” (æˆ– Stream æµ)
```



### 2. é€šä¹‰åƒé—® (Qwen) æ¨¡å‹å®¶æ—çŸ©é˜µ

è¿™å¼ å›¾å¸®åŠ©ä½ æ ¹æ®ä»»åŠ¡éœ€æ±‚é€‰æ‹©æœ€åˆé€‚çš„æ¨¡å‹ï¼Œå¹³è¡¡æ€§èƒ½ä¸æˆæœ¬ã€‚

```mermaid
graph TD
    Root[é€šä¹‰åƒé—®ç³»åˆ—] --> Power[æ€§èƒ½å¯¼å‘]
    Root --> Balance[å¹³è¡¡å¯¼å‘]
    Root --> Speed[é€Ÿåº¦/æˆæœ¬å¯¼å‘]
    Root --> Multi[å¤šæ¨¡æ€å¯¼å‘]

    Power --> QMax[Qwen-Max: å¤æ‚é€»è¾‘/é•¿æ–‡æœ¬]
    Balance --> QPlus[Qwen-Plus: é€šç”¨ä»»åŠ¡/é«˜æ€§ä»·æ¯”]
    Speed --> QTurbo[Qwen-Turbo: æé€Ÿå“åº”/ç®€å•ä»»åŠ¡]
    Multi --> QVL[Qwen-VL/Audio: çœ‹å›¾/å¬éŸ³]

    style QMax fill:#f96,stroke:#333
    style QTurbo fill:#dfd,stroke:#333
```



### 3. API æ ¸å¿ƒå‚æ•°æ§åˆ¶é€»è¾‘

è¿™å¼ å›¾ç›´è§‚åœ°è§£é‡Šäº† `temperature`ã€`top_p` ç­‰å‚æ•°æ˜¯å¦‚ä½•å…±åŒå½±å“ AI è¾“å‡ºçš„ã€‚

```mermaid
graph LR
    Input[ç”¨æˆ· Prompt] --> Logic[é€»è¾‘å±‚]
    
    subgraph Controls [å‚æ•°è°ƒèŠ‚é˜€]
        direction TB
        T[Temperature: åˆ›é€ åŠ›/æ¸©åº¦]
        P[Top_P: è¯æ± è¿‡æ»¤/é è°±åº¦]
        M[Max_Tokens: é•¿åº¦é™åˆ¶]
    end
    
    Logic --> T
    Logic --> P
    Logic --> M
    
    T --> Output[ç”Ÿæˆå›ç­”]
    P --> Output
    M --> Output

    %% ç”¨æ™®é€šèŠ‚ç‚¹æ¨¡æ‹Ÿâ€œæ³¨é‡Šâ€
    NoteT["é«˜=è¯—äºº, ä½=ä¼šè®¡"]:::note
    NoteP["0.8=æ’é™¤ç¦»è°±é€‰é¡¹"]:::note

    T -.-> NoteT
    P -.-> NoteP

    classDef note fill:#f9f,stroke:#333,stroke-width:1px,font-size:12px,color:#333,font-style:italic;
```



### 4. æµå¼è¾“å‡º (Stream) vs æ™®é€šè¾“å‡º

é€šè¿‡å¯¹æ¯”å›¾ï¼Œå­¦ç”Ÿå¯ä»¥ä¸€çœ¼çœ‹å‡ºä¸ºä»€ä¹ˆè¦ä¸ºèŠå¤©æœºå™¨äººå¼€å¯ `stream=True`ã€‚

```mermaid
graph LR
    direction LR

    subgraph Normal_Mode [æ™®é€šæ¨¡å¼: stream=false]
        direction TB
        N1[ç­‰å¾…å…¨éƒ¨ç”Ÿæˆ...]
        N2[ä¸€æ¬¡æ€§ç«¯å‡ºä¸€é”…æ±¤]
    end

    subgraph Stream_Mode [æµå¼æ¨¡å¼: stream=true]
        direction TB
        S1[ç”Ÿæˆä¸€ä¸ªè¯, è¿”å›ä¸€ä¸ªè¯]
        S2[è¾¹ç…®è¾¹å–, ä½“éªŒä¸æ»‘]
    end
```
  
  
  
### å­¦ä¹ è¦ç‚¹ï¼ˆç»™åŒå­¦ä»¬çš„å¤ä¹ å»ºè®®ï¼‰ï¼š

1. **å®‰å…¨ç¬¬ä¸€**ï¼šåœ¨ä»£ç ä¸­**åƒä¸‡ä¸è¦æ³„éœ² API Key**ã€‚åœ¨ GitHub æäº¤ä»£ç å‰ï¼Œè®°å¾—æŠŠ Key æ”¾åˆ°ç¯å¢ƒå˜é‡é‡Œã€‚
2. **å‚æ•°é»„é‡‘æ­æ¡£**ï¼š
    * **æƒ³å†™ä»£ç /åšæ•°å­¦é¢˜**ï¼šè®¾ `temperature=0.1`ï¼ˆè¿½æ±‚ä¸¥è°¨ï¼‰ã€‚
    * **æƒ³å†™å°è¯´/å¤´è„‘é£æš´**ï¼šè®¾ `temperature=0.9`ï¼ˆè¿½æ±‚çµæ„Ÿï¼‰ã€‚
3. **Token æ˜¯é’±**ï¼šå¤§æ¨¡å‹ä¸æ˜¯æŒ‰æ¬¡æ•°è®¡è´¹çš„ï¼Œæ˜¯æŒ‰ Tokenï¼ˆå­—æ•°ï¼‰è®¡è´¹çš„ã€‚**Prompt è¶Šé•¿ï¼Œæˆæœ¬è¶Šé«˜**ï¼Œæ‰€ä»¥è¦å­¦ä¼šå†™ç²¾ç‚¼çš„æç¤ºè¯ã€‚
4. **Top_p çš„å¦™ç”¨**ï¼šå¦‚æœä½ è§‰å¾— AI å¼€å§‹â€œèƒ¡è¯´å…«é“â€ï¼Œå°è¯•æŠŠ `top_p` è°ƒä½ï¼ˆæ¯”å¦‚ 0.8ï¼‰ï¼Œå®ƒä¼šå˜å¾—åªè¯´â€œå¤§æ¦‚ç‡æ­£ç¡®â€çš„è¯ã€‚

    
    
#### [PolarDB å­¦ä¹ å›¾è°±](https://www.aliyun.com/database/openpolardb/activity "8642f60e04ed0c814bf9cb9677976bd4")
  
  
#### [PostgreSQL è§£å†³æ–¹æ¡ˆé›†åˆ](../201706/20170601_02.md "40cff096e9ed7122c512b35d8561d9c8")
  
  
#### [å¾·å“¥ / digoal's Github - å…¬ç›Šæ˜¯ä¸€è¾ˆå­çš„äº‹.](https://github.com/digoal/blog/blob/master/README.md "22709685feb7cab07d30f30387f0a9ae")
  
  
#### [About å¾·å“¥](https://github.com/digoal/blog/blob/master/me/readme.md "a37735981e7704886ffd590565582dd0")
  
  
![digoal's wechat](../pic/digoal_weixin.jpg "f7ad92eeba24523fd47a6e1a0e691b59")
  
