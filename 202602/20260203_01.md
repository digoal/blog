## opencode 又一个新的 AI Coding Agent, 有人说比 Claude/gemini/qwen coder 好用      
                  
### 作者                    
digoal                    
                 
### 日期                    
2026-02-03               
                    
### 标签                    
AI Coding Agent , 免费模型 , opencode , gemini cli , qwen coder     
                    
----                    
                    
## 背景    
  
建议在 [《大学生数据库实践课: Docker 镜像》](../202512/20251205_02.md) 中使用, 可观察 pgvector 编译和回归测试效果.  
  
1、安装    
```  
# 进入容器  
docker exec -ti pg bash  
  
curl -fsSL https://opencode.ai/install | bash  
  
# 自动添加环境变量  
# opencode  
# export PATH=/root/.opencode/bin:$PATH  
  
. ~/.bashrc  
which opencode  
```  
  
2、启动  
```  
# 创建一个工作目录, 进入工作目录, 启动 opencode  
  
mkdir /var/lib/postgresql/opencode  
cd /var/lib/postgresql/opencode  
opencode  
```  
  
3、修改 themes  
```  
# 在 opencode cli 中执行  
/themes 回车  
选择 system 后回车  
```  
  
4、添加 mcp  
```  
# 在 shell 中使用 opencode mcp add 命令交互界面添加 mcp  
  
以 deepwiki 为例, 交互输入如下   
# opencode mcp add  
  
┌  Add MCP server  
│  
◇  Enter MCP server name  
│  deepwiki  
│  
◇  Select MCP server type  
│  Remote  
│  
◇  Enter MCP server URL  
│  https://mcp.deepwiki.com/mcp  
│  
◇  Does this server require OAuth authentication?  
│  No  
│  
◆  MCP server "deepwiki" added to /root/.config/opencode/opencode.json  
│  
└  MCP server added successfully  
```  
  
5、列出 mcp  
```  
# opencode mcp list  
  
┌  MCP Servers  
│  
●  ✓ deepwiki connected  
│      https://mcp.deepwiki.com/mcp  
│  
└  1 server(s)  
```  
  
6、调试 mcp  
```  
# opencode mcp debug deepwiki  
  
┌  MCP OAuth Debug  
│  
●  Server: deepwiki  
│  
●  URL: https://mcp.deepwiki.com/mcp  
│  
●  Auth status: ✗ not authenticated  
│  
◇  HTTP response: 200 OK  
│  
◆  Server responded successfully (no auth required or already authenticated)  
│  
└  Debug complete  
```  
  
7、连接模型供应商  
```  
# 在 opencode cli 中执行  
  
/connect  
  
# 默认连接的是 OpenCode Zen    
# opencode zen 提供了很多免费的模型 (而且很强, 例如 kimi 2.5 free)    
# 选择其他供应商, 需要提供 API   
```  
  
8、查看已连接的模型供应商支持的模型  
```  
# opencode models   
  
opencode/big-pickle  
opencode/glm-4.7-free  
opencode/gpt-5-nano  
opencode/kimi-k2.5-free  
opencode/minimax-m2.1-free  
opencode/trinity-large-preview-free  
```  
  
9、切换模型  
```  
# 在 opencode cli 中执行  
/models  回车  
  
# 例如选中 Kimi K2.5 Free 回车  
```  
  
10、测试编程能力  
  
逐条输入如下 prompt , 不要一次性让 opencode 干完 .   
```  
克隆最新的pgvector代码  
添加一个新的数据类型tinyintvec, 1个字节来表示向量元素.   
添加回归测试  
hnsw和ivfflat索引支持tinyintvec类型  
```  
  
11、tokens 用量统计  
```  
/status  
```
  
12、切换到过去的会话  
```
/sessions
```
   
PS: 如果发现诡异的网络问题, 试试梯子, 例如. `export all_proxy=socks5h://127.0.0.1:11111`  or `export all_proxy=socks5h://host.docker.internal:11111`   
  
如果要使用 google aistudio API KEY(很容易达到用量上限, 目前来看还是kimi free大气.), 需要一个海外服务器, 建立 http 代理, 见 https://aistudio.google.com/usage    
```  
export http_proxy=http://host.docker.internal:22222  
export https_proxy=http://host.docker.internal:22222  
export HTTP_PROXY=http://host.docker.internal:22222  
export HTTPS_PROXY=http://host.docker.internal:22222  
  
# 2. 针对 Node.js global-agent 库（如果 Gemini CLI 引用了它）  
export GLOBAL_AGENT_HTTP_PROXY=http://host.docker.internal:22222  
  
# 3. 解决 Playwright 浏览器的代理（关键！）  
# Playwright 启动的 Chromium 实例有时不读取系统环境变量，  
# 显式传参给浏览器引擎：  
export ALL_PROXY=http://host.docker.internal:22222  
  
# 4. 禁止绕过（防止某些库默认尝试直连）  
export no_proxy=localhost,127.0.0.1,host.docker.internal  
opencode  
```  
    
总结一下, opencode 确实很不错, 感觉比 gemini cli/qwen coder 要强!    
  
## 参考  
  
https://deepwiki.com/anomalyco/opencode  
  
https://opencode.ai/docs  
  
https://github.com/anomalyco/opencode  
  
https://aistudio.google.com/  
  
[《Qwen coder AI 编程终极技巧: 接入 DeepWiki mcp》](../202601/20260114_01.md)    
  
[《Gemini CLI 对比 Qwen3 Coder 谁更强?》](../202601/20260115_05.md)    
  
[《大学生数据库实践课: Docker 镜像》](../202512/20251205_02.md)   
  
[《大学生数据库实践课: 7.5 AI Coding Agent(qwen3 cli) 的使用》](../202601/20260105_01.md)    
  
[《Gemini CLI Coder Agent 解决外网访问 方法 (含 brew 部署)》](../202601/20260117_02.md)    
  
  
#### [PolarDB 学习图谱](https://www.aliyun.com/database/openpolardb/activity "8642f60e04ed0c814bf9cb9677976bd4")
  
  
#### [PostgreSQL 解决方案集合](../201706/20170601_02.md "40cff096e9ed7122c512b35d8561d9c8")
  
  
#### [德哥 / digoal's Github - 公益是一辈子的事.](https://github.com/digoal/blog/blob/master/README.md "22709685feb7cab07d30f30387f0a9ae")
  
  
#### [About 德哥](https://github.com/digoal/blog/blob/master/me/readme.md "a37735981e7704886ffd590565582dd0")
  
  
![digoal's wechat](../pic/digoal_weixin.jpg "f7ad92eeba24523fd47a6e1a0e691b59")
  
