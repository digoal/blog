<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=gbk">
<title>PostgreSQL research</title>
<style type="text/css">
.blogcnt{line-height:160%;font-size:14px;text-align:left;word-wrap:break-word;}
.blogcnt *{line-height:160%;}
.blogcnt p{margin:0 0 10px;}
.blogcnt ul,.nbw-blog ol{margin:5px 0 5px 40px;padding:0}
.blogcnt em{font-style:italic;}
.blogcnt blockquote{font-size:1em;margin:auto 0 auto 35px;}
.blogcnt img{border:0;max-width:100%;}
</style>
</head>
<body style="color:#444444;">
<h1 id="blog-Title"><a href="index.html">PostgreSQL research</a></h1>
<div id="" style="padding:0 20px;">
	<h2 id="">Install Ubuntu from exists Win7,xp or Linux OS</h2>
	<h5 id="">2013-03-24 17:04:05&nbsp;&nbsp;&nbsp;<a href="http://blog.163.com/digoal@126/blog/static/16387704020132242427136/" target="_blank">查看原文&gt;&gt;</a></h5>
	<div class="" id="" style="padding:0 20px;">
		<div class="blogcnt" style="width:800px;"><div><div>一、windows</div><div>在已经存在windows的环境中安装Ubuntu.</div><div>1.在C盘根目录下新建一个名称为ubuntu的目录，然后在ubuntu目录下新建一个casper子目录</div><div><br></div><div>2.将下载的ubuntu-11.10-desktop-i386.iso放在C盘的ubuntu目录下，用虚拟光驱或RAR打开镜像文件，之后到镜像文件中的casper目录下将initrd.lz和vmlinuz(64位的ISO,vmlinuz.efi)两个文件拷贝到刚才新建的casper子目录下，即C:/ubuntu/casper目录下，目录结构如下 :&nbsp;</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >C:/ubuntu/ubuntu-11.10-desktop-i386.iso</font></div><div><font size="2"   >C:/ubuntu/casper/initrd.lz</font></div><div><font size="2"   >C:/ubuntu/casper/vmlinuz</font></div><p></p></pre></div><div><br></div><div>3.WIN7安装EasyBCD (XP用grub4dos), 打开EasyBCD, 按顺序点击Add New Entry -&gt; NeoGrub -&gt; Add/Configure .</div><div><br></div><div>4.在出现的menu.lst中写入如下内容 : (注意, 64位的ISO,vmlinuz.efi)</div><div><pre class="prettyprint"   ><div><font size="2"   >title Install Ubuntu 11.10</font></div><div><font size="2"   >root (hd0,0)</font></div><div><font size="2"   >kernel (hd0,0)/ubuntu/casper/vmlinuz boot=casper iso-scan/filename=/ubuntu/ubuntu-11.10-desktop-i386.iso ro quiet splash locale=zh_CN.UTF-8</font></div><div><font size="2"   >initrd (hd0,0)/ubuntu/casper/initrd.lz</font></div><p></p></pre></div><div><br></div><div>5. EasyBCD中继续配置, 点击Edit Boot Menu. 选中Boot default OS after, 配置10秒. 然后Save Settings.</div><div><br></div><div>6.重启电脑，选择NeoGrub Bootloader进入ubuntu11.10安装系统。</div><div>&nbsp; 安装前按Ctrl+Alt+F1进入1号控制台，输入如下命令 :&nbsp;</div><div><pre class="prettyprint"   ><p><font size="2"   >&nbsp; sudo umount Cl /isodevice</font></p></pre></div><div><br></div><div>7.拔掉网线. 这样能避免源连接不上安装卡死的问题.</div><div><br></div><div>8.然后即可开始正常安装。安装成功后重启电脑就会出现ubuntu11.10及windows启动项。</div></div><div><br></div><div>二、Linux</div><div><div>如果你的系统已经存在其他版本的linux</div><div>1. 首先判断你的grub的版本（启动时，grub显示1.98和1.99的是grub2,否则是grub1）.</div><div><br></div><div>1.1. grub1也是修改menu.lst（/boot/grub/menu.lst）文件(实际上是/boot/grub/grub.conf的软链接)，写法同上面windows中的方法。</div><div><br></div><div>1.2 grub2则有区别，方法如下：</div><div>&nbsp; &nbsp; 1,grub2不用提取那两个文件, 因为支持insmod iso。</div><div>&nbsp; &nbsp; 2,grub2建议把iso文件改名为ubuntu.iso，然后放到不用格式化的分区根目录下。</div><div>&nbsp; &nbsp; 3,编辑/etc/grub.d/40_custom，加上以下内容：</div><div>&nbsp; &nbsp; （X请自行修改，比如(hd0,2) 表示第一块硬盘的第二个分区，主分区用1、2、3、4,逻辑分区则从5开始。）</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >menuentry "Boot ubuntu 11.10 desktop iso" {</font></div><div><font size="2"   >insmod loopback</font></div><div><font size="2"   >insmod iso9660</font></div><div><font size="2"   >loopback loop (hd0,X)/ubuntu.iso</font></div><div><font size="2"   >linux (loop)/casper/vmlinuz boot=casper noacpi iso-scan/filename=/ubuntu.iso ro quiet splash --</font></div><div><font size="2"   >initrd (loop)/casper/initrd.lz</font></div><div><font size="2"   >}</font></div><p></p></pre></div><div>2. 然后执行如下命令将以上grub信息更新到/boot/grub/grub.cfg:</div><div><pre class="prettyprint"   ><p><font size="2"   >sudo update-grub</font></p></pre></div><div><br></div><div>3. 重启linux, 在选择启动菜单时选以上Boot ubuntu 11.10 desktop iso.</div><div>&nbsp;(如果没有出现启动菜单选择项, 可能是/boot/grub/grub.cfg中的超时未配置, 配置即可)</div><div><br></div><div>4.&nbsp;</div><div>&nbsp; 安装前按Ctrl+Alt+F1进入1号控制台，输入如下命令 :&nbsp;</div><div><pre class="prettyprint"   ><p><font size="2"   >&nbsp; sudo umount Cl /isodevice</font></p></pre></div><div><br></div><div>5.拔掉网线. 这样能避免源连接不上安装卡死的问题.</div><div><br></div><div>6.然后即可开始正常安装。安装成功后重启电脑就会出现ubuntu11.10及windows启动项。</div></div><div><br></div><div>【其他】</div><div>1. 硬盘安装, 报找不到ISO文件的问题: 如果menu.lst或grub配置没有问题, 但是找不到ISO文件, 可能是因为放ISO文件的文件系统类型不被支持.</div><div>&nbsp; &nbsp; 例如早期的grub可能不支持ext4, ntfs.</div><div>&nbsp; &nbsp; 也可能是硬盘分区配置不正确, (hd0,0) . 可以按e键进行编辑. 编辑完后b键引导.</div><div>2. 任何硬盘安装的方法都不能格式化放安装ISO的分区. 这点是毋庸置疑的.</div><div><br></div><div>【参考】</div><div>1.&nbsp;<a style="line-height: 22px;" target="_blank" rel="nofollow" href="http://forum.ubuntu.org.cn/viewtopic.php?p=2600265"   >http://forum.ubuntu.org.cn/viewtopic.php?p=2600265</a></div>2.&nbsp;<a target="_blank" rel="nofollow" href="https://help.ubuntu.com/12.04/installation-guide/"   >https://help.ubuntu.com/12.04/installation-guide/</a></div>
	</div>
</div>
</body>
</html>