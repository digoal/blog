<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=gbk">
<title>PostgreSQL research</title>
<style type="text/css">
.blogcnt{line-height:160%;font-size:14px;text-align:left;word-wrap:break-word;}
.blogcnt *{line-height:160%;}
.blogcnt p{margin:0 0 10px;}
.blogcnt ul,.nbw-blog ol{margin:5px 0 5px 40px;padding:0}
.blogcnt em{font-style:italic;}
.blogcnt blockquote{font-size:1em;margin:auto 0 auto 35px;}
.blogcnt img{border:0;max-width:100%;}
</style>
</head>
<body style="color:#444444;">
<h1 id="blog-Title"><a href="index.html">PostgreSQL research</a></h1>
<div id="" style="padding:0 20px;">
	<h2 id="">Ubuntu config in common use</h2>
	<h5 id="">2013-03-27 14:57:47&nbsp;&nbsp;&nbsp;<a href="http://blog.163.com/digoal@126/blog/static/16387704020132279020755/" target="_blank">查看原文&gt;&gt;</a></h5>
	<div class="" id="" style="padding:0 20px;">
		<div class="blogcnt" style="width:800px;"><div>本文包含ubuntu日常使用的一些汇总.</div><div><span style="line-height: 22px;"   >1. 包相关</span></div><div><span style="line-height: 22px;"   >2. vpn配置</span></div><div><span style="line-height: 22px;"   >3. ssh 端口代理 :&nbsp;</span></div><div><span style="line-height: 22px;"   >4. balance代理</span></div><div><span style="line-height: 22px;"   >5. 禁止ctrl+alt+del键重启电脑</span></div><div><span style="line-height: 22px;"   >6. 防火墙例子</span></div><div><span style="line-height: 22px;"   >7. samba</span></div><div><span style="line-height: 22px;"   >8. nfs</span></div><div><span style="line-height: 22px;"   >9. 时间同步</span></div><div><span style="line-height: 22px;"   >10. 使用rdesktop远程连接windows</span></div><div><span style="line-height: 22px;"   >11. 内核相关配置</span></div><div><span style="line-height: 22px;"   >12. profile</span></div><div><span style="line-height: 22px;"   ><br></span></div><div><span style="line-height: 22px;"   ><br></span></div><div>1. 包相关</div><div>安装</div><div><pre class="prettyprint"   ><p><font size="2"   >dpkg -i ?.deb</font></p></pre></div><div>查看</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >列出所有安装的包: dpkg -l</font></div><div><font size="2"   >查看包状态: dpkg -s 包名</font></div><div><font size="2"   >列出包安装的详细文件: dpkg -L&nbsp;<span style="line-height: 22px;"   >包名</span></font></div><p></p></pre></div><div>卸载</div><div><pre class="prettyprint"   ><p><font size="2"   >dpkg -r&nbsp;<span style="line-height: 22px;"   >包名</span></font></p></pre></div><div><br></div>2. vpn配置<div>sudo apt-get install vpnc</div><div>sudo cd /etc/vpnc/</div><div># 新建配置文件, 每个连接1个配置文件. 以下以修改default为例.</div><div>sudo vi&nbsp;default.conf</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >IPSec gateway xxx.xxx.xxx.xxx</font></div><div><font size="2"   >IPSec ID 用户名</font></div><div><font size="2"   >IPSec secret 密码</font></div><div><font size="2"   >#IKE Authmode hybrid</font></div><div><font size="2"   >Xauth username&nbsp;<span style="line-height: 22px;"   >用户名</span></font></div><div><font size="2"   >Xauth password 密码</font></div><div><font size="2"   >Enable Single DES</font></div><div><font size="2"   >Interface MTU 1300</font></div><p></p></pre></div><div># 连接 :&nbsp;</div><div><pre class="prettyprint"   ><p><font size="2"   >sudo /usr/sbin/vpnc /etc/vpnc/default.conf</font></p></pre></div><div># 查看连接状态</div><div>sudo ifconfig</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >tun0 &nbsp; &nbsp; &nbsp;Link encap:未指定 &nbsp;硬件地址 00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00 &nbsp;</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet 地址:xxx.xxx.0.113 &nbsp;点对点:xxx.xxx.0.113 &nbsp;掩码:255.255.255.255</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UP POINTOPOINT RUNNING NOARP MULTICAST &nbsp;MTU:1300 &nbsp;跃点数:1</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 接收数据包:0 错误:0 丢弃:0 过载:0 帧数:0</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 发送数据包:0 错误:0 丢弃:0 过载:0 载波:0</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 碰撞:0 发送队列长度:500&nbsp;</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 接收字节:0 (0.0 B) &nbsp;发送字节:0 (0.0 B)</font></div><p></p></pre></div><div><br><wbr><div>3. ssh 端口代理 :&nbsp;</div><div><pre class="prettyprint"   ><p><font size="2"   >ssh -o&nbsp;<span style="line-height: 19px;"   >ServerAliveInterval=3</span></font><span style="line-height: 19px; font-size: small; font-family: Arial, Helvetica, sans-serif;"   > -o&nbsp;</span><span style="line-height: 22px; font-family: Arial, Helvetica, sans-serif; white-space: normal;"   >ServerAliveCountMax=12&nbsp;</span><span style="line-height: 19px; font-family: Arial, Helvetica, sans-serif; font-size: small;"   >-p 端口号 -qTfnN -D 本地端口号 user@host</span></p></pre></div><div><div style="line-height: 25px; font-family: Arial, Helvetica, simsun, u5b8bu4f53;"   >说明: user是你的帐号,host指对方linux主机的ip</div><div><pre class="prettyprint"   ><p style="font-family: Arial, Helvetica, simsun, u5b8bu4f53; line-height: 25px; color: rgb(51, 51, 51);"   ></p><div style="font-family: Arial, Helvetica, simsun, u5b8bu4f53; line-height: 25px;"   ><font size="2"   >-q Quiet mode. 安静模式，忽略一切对话和错误提示。</font></div><div style="font-family: Arial, Helvetica, simsun, u5b8bu4f53; line-height: 25px;"   ><font size="2"   >-T Disable pseudo-tty allocation. 不占用 shell 了。</font></div><div style="font-family: Arial, Helvetica, simsun, u5b8bu4f53; line-height: 25px;"   ><font size="2"   >-f Requests ssh to go to background just before command execution. 后台运行，并推荐加上 -n 参数。</font></div><div style="font-family: Arial, Helvetica, simsun, u5b8bu4f53; line-height: 25px;"   ><font size="2"   >-n Redirects stdin from /dev/null (actually, prevents reading from stdin). -f 推荐的，不加这条参数应该也行。</font></div><div style="font-family: Arial, Helvetica, simsun, u5b8bu4f53; line-height: 25px;"   ><font size="2"   >-N Do not execute a remote command. 不执行远程命令，专为端口转发度身打造。</font></div><div><font size="2"   style="font-family: Arial, Helvetica, simsun, u5b8bu4f53; line-height: 25px;"   >-o </font><font face="Arial, Helvetica, simsun, u5b8bu4f53"   size="2"   ><span style="line-height: 20px;"   >ServerAliveInterval=3 -o&nbsp;</span></font><span style="line-height: 22px; font-family: Arial, Helvetica, sans-serif; white-space: normal;"   >ServerAliveCountMax=12&nbsp;</span><span style="line-height: 20px; font-family: Arial, Helvetica, simsun, u5b8bu4f53; font-size: small;"   >防止会话超时.</span></div><p style="font-family: Arial, Helvetica, simsun, u5b8bu4f53; line-height: 25px; color: rgb(51, 51, 51);"   ></p></pre></div></div><div style="line-height: 25px; color: rgb(51, 51, 51); font-family: Arial, Helvetica, simsun, u5b8bu4f53;"   ><div style="line-height: 25px;"   >然后在浏览器中配置通过代理上网.</div><div style="line-height: 25px;"   >如果是firefox:安装autoproxy插件，在代理中选择SSH -D即可。默认情况下的配置就是7070端口，所以可以不用修改配置，否则在首选项中更改服务器设置。</div><div style="line-height: 25px;"   >如果是Chrome:安装proxy switchy扩展，添加Proxy Profile，在右侧的socks host中输入127.0.0.1和7070，下方选中socks v5，保存，然后切换至该profile即可。</div></div><div style="line-height: 25px; color: rgb(51, 51, 51); font-family: Arial, Helvetica, simsun, u5b8bu4f53;"   ><br></div><div>4. balance代理</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >wget&nbsp;http://www.inlab.de/balance-3.54.tar.gz</font></div><div><font size="2"   >tar -zxvf&nbsp;<span style="line-height: 22px;"   >balance-3.54.tar.gz</span></font></div><div><font size="2"   ><span style="line-height: 22px;"   >cd&nbsp;</span><span style="line-height: 22px;"   >balance-3.54</span></font></div><div><span style="line-height: 22px;"   ><font size="2"   >make</font></span></div><div><span style="line-height: 22px;"   ><font size="2"   >make install</font></span></div><div><font size="2"   >balance 本地监听端口 remote_ip:remote_port</font></div><p></p></pre></div><div><div># balance命令参数</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >&nbsp;_ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; _</font></div><div><font size="2"   >| |__ &nbsp; __ _| | __ _ _ __ &nbsp; ___ ___</font></div><div><font size="2"   >| '_ \ / _` | |/ _` | '_ \ / __/ _ \</font></div><div><font size="2"   >| |_) | (_| | | (_| | | | | (_| &nbsp;__/</font></div><div><font size="2"   >|_.__/ \__,_|_|\__,_|_| |_|\___\___|</font></div><div><font size="2"   >&nbsp; this is balance 3.54</font></div><div><font size="2"   >&nbsp; Copyright (c) 2000-2009,2010</font></div><div><font size="2"   >&nbsp; by Inlab Software GmbH, Gruenwald, Germany.</font></div><div><font size="2"   >&nbsp; All rights reserved.</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >usage:</font></div><div><font size="2"   >&nbsp; balance [-b addr] [-B addr] [-t sec] [-T sec] [-adfpHM] \</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; port [h1[:p1[:maxc1]] [!%] [ ... hN[:pN[:maxcN]]]]</font></div><div><font size="2"   >&nbsp; balance [-b addr] -i [-d] port</font></div><div><font size="2"   >&nbsp; balance [-b addr] -c cmd &nbsp;[-d] port</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >&nbsp; -a &nbsp; &nbsp; &nbsp; &nbsp;enable channel autodisable option</font></div><div><font size="2"   >&nbsp; -b host &nbsp; bind to specific address on listen</font></div><div><font size="2"   >&nbsp; -B host &nbsp; bind to specific address for outgoing connections</font></div><div><font size="2"   >&nbsp; -c cmd &nbsp; &nbsp;execute specified interactive command</font></div><div><font size="2"   >&nbsp; -d &nbsp; &nbsp; &nbsp; &nbsp;debugging on</font></div><div><font size="2"   >&nbsp; -f &nbsp; &nbsp; &nbsp; &nbsp;stay in foregound</font></div><div><font size="2"   >&nbsp; -i &nbsp; &nbsp; &nbsp; &nbsp;interactive control</font></div><div><font size="2"   >&nbsp; -H &nbsp; &nbsp; &nbsp; &nbsp;failover even if Hash Type is used</font></div><div><font size="2"   >&nbsp; -M &nbsp; &nbsp; &nbsp; &nbsp;use MMAP instead of SHM for IPC</font></div><div><font size="2"   >&nbsp; -p &nbsp; &nbsp; &nbsp; &nbsp;packetdump</font></div><div><font size="2"   >&nbsp; -t sec &nbsp; &nbsp;specify connect timeout in seconds (default=5)</font></div><div><font size="2"   >&nbsp; -T sec &nbsp; &nbsp;timeout (seconds) for select (0 =&gt; never) (default=0)</font></div><div><font size="2"   >&nbsp; &nbsp;! &nbsp; &nbsp; &nbsp; &nbsp;separates channelgroups (declaring previous to be Round Robin)</font></div><div><font size="2"   >&nbsp; &nbsp;% &nbsp; &nbsp; &nbsp; &nbsp;as !, but declaring previous group to be a Hash Type</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >examples:</font></div><div><font size="2"   >&nbsp; balance smtp mailhost1:smtp mailhost2:25 mailhost3</font></div><div><font size="2"   >&nbsp; balance -i smtp</font></div><div><font size="2"   >&nbsp; balance -b 2001:DB8::1 80 10.1.1.1 10.1.1.2</font></div><div><font size="2"   >&nbsp; balance -b 2001:DB8::1 80</font></div><p></p></pre></div></div><div><br></div><div>5. 禁止ctrl+alt+del键重启电脑</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >sudo&nbsp;vi /etc/init/control-alt-delete.conf</font></div><div><font size="2"   ># 注释以下行</font></div><div><font size="2"   >#exec shutdown -r now "Control-Alt-Delete pressed"</font></div><p></p></pre></div><div><br></div><div>6. 防火墙例子</div><div>ufw :&nbsp;</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >ufw enable</font></div><div><font size="2"   >ufw allow to 10.0.0.1&nbsp;from 192.168.0.0/16&nbsp;</font></div><div><font size="2"   >ufw allow proto tcp from any to any port 80,443,8080:8090</font></div><div><font size="2"   >ufw deny proto tcp from 10.0.0.0/8 to 192.168.0.1 port 25</font></div><div><font size="2"   >ufw allow proto udp from 1.2.3.5 port 5469 to 1.2.3.4 port 5469</font></div><p></p></pre></div><div><span style="line-height: 22px;"   >iptables :&nbsp;</span></div><div><pre class="prettyprint"   ><p></p><div><font size="2"   ># Generated by iptables-save v1.3.5 on Tue Jul &nbsp;3 10:59:01 2012</font></div><div><font size="2"   >*filter</font></div><div><font size="2"   >:INPUT ACCEPT [0:0]</font></div><div><font size="2"   >:FORWARD ACCEPT [0:0]</font></div><div><font size="2"   >:OUTPUT ACCEPT [369:57193]</font></div><div><font size="2"   >:RH-Firewall-1-INPUT - [0:0]</font></div><div><font size="2"   >-A INPUT -j RH-Firewall-1-INPUT&nbsp;</font></div><div><font size="2"   >-A FORWARD -j RH-Firewall-1-INPUT&nbsp;</font></div><div><span style="line-height: 22px;"   ><font size="2"   >-A RH-Firewall-1-INPUT -i lo -j ACCEPT&nbsp;</font></span></div><div><font size="2"   >-A RH-Firewall-1-INPUT -s 192.168.0.0/255.255.0.0 -j ACCEPT&nbsp;</font></div><div><font size="2"   >-A RH-Firewall-1-INPUT -s 10.0.0.0/255.0.0.0 -j ACCEPT&nbsp;</font></div><div><font size="2"   >-A RH-Firewall-1-INPUT -s 172.16.0.0/255.255.0.0 -j ACCEPT&nbsp;</font></div><div><div><font size="2"   >#mongodb:monitor</font></div><div><font size="2"   >-A RH-Firewall-1-INPUT -m iprange --src-range 192.168.1.34 -p tcp -m multiport --destination-ports 5281 -j ACCEPT</font></div><div><font size="2"   ># : reject Ports 5281,5282,5283</font></div><div><font size="2"   >-A RH-Firewall-1-INPUT -m state --state NEW -p tcp -m multiport --destination-ports 5281:5283 -j REJECT</font></div></div><div><font size="2"   >-A RH-Firewall-1-INPUT -p icmp -m icmp --icmp-type any -j ACCEPT&nbsp;</font></div><div><font size="2"   >-A RH-Firewall-1-INPUT -p esp -j ACCEPT&nbsp;</font></div><div><font size="2"   >-A RH-Firewall-1-INPUT -p ah -j ACCEPT&nbsp;</font></div><div><font size="2"   >-A RH-Firewall-1-INPUT -d 224.0.0.251 -p udp -m udp --dport 5353 -j ACCEPT&nbsp;</font></div><div><font size="2"   >-A RH-Firewall-1-INPUT -p udp -m udp --dport 631 -j ACCEPT&nbsp;</font></div><div><font size="2"   >-A RH-Firewall-1-INPUT -p tcp -m tcp --dport 631 -j ACCEPT&nbsp;</font></div><div><font size="2"   >-A RH-Firewall-1-INPUT -m state --state RELATED,ESTABLISHED -j ACCEPT&nbsp;</font></div><div><font size="2"   >-A RH-Firewall-1-INPUT -p udp -m state --state NEW -m udp --dport 161 -j ACCEPT&nbsp;</font></div><div><font size="2"   >-A RH-Firewall-1-INPUT -p udp -m state --state NEW -m udp --dport 162 -j ACCEPT&nbsp;</font></div><div><font size="2"   >-A RH-Firewall-1-INPUT -j REJECT --reject-with icmp-host-prohibited&nbsp;</font></div><div><font size="2"   >COMMIT</font></div><div><font size="2"   ># Completed on Tue Jul &nbsp;3 10:59:01 2012</font></div><p></p></pre></div><div><span style="line-height: 22px;"   >7. samba</span></div><div><pre class="prettyprint"   ><p></p><div><span style="line-height: 22px;"   ><font size="2"   ># 添加包</font></span></div><div><div><font size="2"   >sudo apt-get install samba</font></div><div><font size="2"   >sudo apt-get install libpam-smbpass</font></div><div><font size="2"   ># 添加一个samba用户(digoal必须是一个本地存在的用户)</font></div><div><font size="2"   >sudo smbpasswd -a digoal</font></div><div><font size="2"   >New SMB password:</font></div><div><font size="2"   >Retype new SMB password:</font></div><div><font size="2"   ># 创建samba用的目录, 修改权限</font></div><div><font size="2"   >sudo mkdir -p /srv/samba/share1</font></div><div><font size="2"   >sudo chown digoal:digoal /srv/samba/share1</font></div><div><font size="2"   ># 配置smb.conf</font></div><div><font size="2"   >vi /etc/samba/smb.conf</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >[global]&nbsp;</font></div><div><font size="2"   >&nbsp; &nbsp; workgroup = EXAMPLE</font></div><div><font size="2"   >&nbsp; &nbsp; security = user</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >[share1]</font></div><div><font size="2"   >&nbsp; &nbsp; comment = Ubuntu File Server Share</font></div><div><font size="2"   >&nbsp; &nbsp; path = /srv/samba/share1</font></div><div><font size="2"   >&nbsp; &nbsp; browsable = yes</font></div><div><font size="2"   >&nbsp; &nbsp; guest ok = no</font></div><div><font size="2"   >&nbsp; &nbsp; read only = no</font></div><div><font size="2"   >&nbsp; &nbsp;&nbsp;directory mask = 0700</font></div><div><font size="2"   >    create mask = 0700</font></div><div><font size="2"   >&nbsp; &nbsp; read list = digoal</font></div><div><font size="2"   >&nbsp; &nbsp; write list = digoal</font></div><div><font size="2"   >&nbsp; &nbsp; admin users = digoal</font></div><div><font size="2"   ># 重启服务</font></div><div><font size="2"   >sudo restart smbd</font></div><div><font size="2"   >sudo restart nmbd</font></div><div><font size="2"   ><br></font></div><div><font size="2"   ># 将smbd, nmbd加入自启动</font></div><div><font size="2"   >sudo vi /etc/rc.local</font></div><div><font size="2"   >/usr/sbin/service smbd start</font></div><div><font size="2"   >/usr/sbin/service nmbd start</font></div><div><font size="2"   ><br></font></div><div><font size="2"   ># windows</font></div><div><font size="2"   >\\192.168.1.1\share1</font></div><div><font size="2"   >映射网络驱动器.</font></div></div><p></p></pre></div><div><br></div><div>8. nfs</div><div><a target="_blank" href="http://blog.163.com/digoal@126/blog/static/163877040201322410101184/"   >http://blog.163.com/digoal@126/blog/static/163877040201322410101184/</a></div><div><br></div><div>9. 时间同步</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >sudo crontab -e</font></div><div><font size="2"   >8 * * * * /usr/sbin/ntpdate asia.pool.ntp.org &amp;&amp; /sbin/hwclock --systohc</font></div><p></p></pre></div><div><br></div><div>10. 使用rdesktop远程连接windows</div></div><div><div><pre class="prettyprint"   ><p><font size="2"   >nohup rdesktop -u windows用户名 -p 密码 -g 1024x700 -b -z -a 16 -r clipboard:PRIMARYCLIPBOARD -r sound:local -r disk:abc=/data -P 10.1.1.1:3389 &gt;/dev/null 2&gt;&amp;1 &amp;</font></p></pre></div><div>其中<span style="line-height: 22px;"   >-r disk:abc=/data表示把本地的/data目录带入windows中操作.</span></div><div><br></div><div>11. 内核相关配置</div><div>/etc/sysctl.conf</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >kernel.msgmnb = 65536</font></div><div><font size="2"   ># Controls the default maxmimum size of a mesage queue</font></div><div><font size="2"   >kernel.msgmax = 65536</font></div><div><font size="2"   ># Controls the maximum shared segment size, in bytes</font></div><div><font size="2"   >kernel.shmmax = 68719476736</font></div><div><font size="2"   ># Controls the maximum number of shared memory segments, in pages</font></div><div><font size="2"   >kernel.shmall = 4294967296</font></div><div><font size="2"   >kernel.shmmni = 4096</font></div><div><font size="2"   >kernel.sem = 50100 64128000 50100 1280</font></div><div><font size="2"   >fs.file-max = 7672460</font></div><div><font size="2"   >net.ipv4.ip_local_port_range = 9000 65000</font></div><div><font size="2"   >net.core.rmem_default = 1048576</font></div><div><font size="2"   >net.core.rmem_max = 4194304</font></div><div><font size="2"   >net.core.wmem_default = 262144</font></div><div><font size="2"   >net.core.wmem_max = 1048576</font></div><div><font size="2"   >net.ipv4.tcp_tw_recycle = 1</font></div><div><font size="2"   >net.ipv4.tcp_max_syn_backlog = 4096</font></div><div><font size="2"   >net.core.netdev_max_backlog = 10000</font></div><div><font size="2"   >vm.overcommit_memory = 0</font></div><div><font size="2"   >net.ipv4.ip_conntrack_max = 655360</font></div><div><font size="2"   >fs.aio-max-nr = 1048576</font></div><div><font size="2"   >net.ipv4.tcp_timestamps = 0</font></div></pre></div><div>/etc/security/limits.conf</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >* soft &nbsp; &nbsp;nofile &nbsp;131072</font></div><div><font size="2"   >* hard &nbsp; &nbsp;nofile &nbsp;131072</font></div><div><font size="2"   >* soft &nbsp; &nbsp;nproc &nbsp; 131072</font></div><div><font size="2"   >* hard &nbsp; &nbsp;nproc &nbsp; 131072</font></div><div><font size="2"   >* soft &nbsp; &nbsp;core &nbsp; &nbsp;unlimited</font></div><div><font size="2"   >* hard &nbsp; &nbsp;core &nbsp; &nbsp;unlimited</font></div><div><font size="2"   >* soft &nbsp; &nbsp;memlock 50000000</font></div><div><font size="2"   >* hard &nbsp; &nbsp;memlock 50000000</font></div><p></p></pre></div><div><br></div><div>12. profile</div><div>/etc/profile or&nbsp;<span style="line-height: 22px;"   >~/.bashrc</span></div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >#add by digoal</font></div><div><font size="2"   >alias rm='rm -i'</font></div><div><font size="2"   >alias ll='ls -la'</font></div><div><font size="2"   >alias vi=vim</font></div><p></p></pre></div><div><span style="line-height: 22px;"   >【参考】</span></div></div><div>1. man 5 ssh_config</div><div><pre class="prettyprint"   ><p></p><div><div><font size="2"   >&nbsp; &nbsp; &nbsp;ServerAliveCountMax</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Sets the number of server alive messages (see below) which may be sent without ssh(1) receiving any messages back from the</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;server. &nbsp;If this threshold is reached while server alive messages are being sent, ssh will disconnect from the server, terminat\</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ing the session. &nbsp;It is important to note that the use of server alive messages is very different from TCPKeepAlive (below). &nbsp;The</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;server alive messages are sent through the encrypted channel and therefore will not be spoofable. &nbsp;The TCP keepalive option</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;enabled by TCPKeepAlive is spoofable. &nbsp;The server alive mechanism is valuable when the client or server depend on knowing when &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;a&nbsp;<span style="line-height: 22px;"   >connection has become inactive.</span></font></div><div><font size="2"   ><br></font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;The default value is 3. &nbsp;If, for example, ServerAliveInterval (see below) is set to 15 and ServerAliveCountMax is left at the</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;default, if the server becomes unresponsive, ssh will disconnect after approximately 45 seconds. &nbsp;This option applies to protocol</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;version 2 only; in protocol version 1 there is no mechanism to request a response from the server to the server alive messages,</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;so disconnection is the responsibility of the TCP stack.</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp;ServerAliveInterval</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Sets a timeout interval in seconds after which if no data has been received from the server, ssh(1) will send a message through</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;the encrypted channel to request a response from the server. &nbsp;The default is 0, indicating that these messages will not be sent</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;to the server, or 300 if the BatchMode option is set. &nbsp;This option applies to protocol version 2 only. &nbsp;ProtocolKeepAlives and</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;SetupTimeOut are Debian-specific compatibility aliases for this option.</font></div></div><div><font size="2"   ><br></font></div><div><div><font size="2"   >&nbsp; &nbsp; &nbsp;TCPKeepAlive</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Specifies whether the system should send TCP keepalive messages to the other side. &nbsp;If they are sent, death of the connection or</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;crash of one of the machines will be properly noticed. &nbsp;This option only uses TCP keepalives (as opposed to using ssh level</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;keepalives), so takes a long time to notice when the connection dies. &nbsp;As such, you probably want the ServerAliveInterval option</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;as well. &nbsp;However, this means that connections will die if the route is down temporarily, and some people find it annoying.</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;The default is “yes” (to send TCP keepalive messages), and the client will notice if the network goes down or the remote host</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;dies. &nbsp;This is important in scripts, and many users want it too.</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;To disable TCP keepalive messages, the value should be set to “no”.</font></div></div><p></p></pre></div></div>
	</div>
</div>
</body>
</html>