<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=gbk">
<title>PostgreSQL research</title>
<style type="text/css">
.blogcnt{line-height:160%;font-size:14px;text-align:left;word-wrap:break-word;}
.blogcnt *{line-height:160%;}
.blogcnt p{margin:0 0 10px;}
.blogcnt ul,.nbw-blog ol{margin:5px 0 5px 40px;padding:0}
.blogcnt em{font-style:italic;}
.blogcnt blockquote{font-size:1em;margin:auto 0 auto 35px;}
.blogcnt img{border:0;max-width:100%;}
</style>
</head>
<body style="color:#444444;">
<h1 id="blog-Title"><a href="index.html">PostgreSQL research</a></h1>
<div id="" style="padding:0 20px;">
	<h2 id="">PostgreSQL分区表扩展实例</h2>
	<h5 id="">2010-05-11 23:20:04&nbsp;&nbsp;&nbsp;<a href="http://blog.163.com/digoal@126/blog/static/163877040201041111204189/" target="_blank">查看原文&gt;&gt;</a></h5>
	<div class="" id="" style="padding:0 20px;">
		<div class="blogcnt" style="width:800px;"><p style="TEXT-INDENT: 2em;"   >本文思路较老, 其他的一些分区思路可参考.</p><p style="TEXT-INDENT: 2em;"   ><a target="_blank" href="http://blog.163.com/digoal@126/blog/static/163877040201422293824929/"   >http://blog.163.com/digoal@126/blog/static/163877040201422293824929/</a></p><p style="TEXT-INDENT: 2em;"   ><a target="_blank" href="http://blog.163.com/digoal@126/blog/static/16387704020128772037884/"   >http://blog.163.com/digoal@126/blog/static/16387704020128772037884/</a></p><p style="TEXT-INDENT: 2em;"   ><a target="_blank" href="http://blog.163.com/digoal@126/blog/static/163877040201341353342245"   >http://blog.163.com/digoal@126/blog/static/163877040201341353342245</a></p><div style="line-height: 28px; color: rgb(51, 51, 51); font-family: 'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53;"   >PostgreSQL general public partition table trigger</div><div style="line-height: 28px; color: rgb(51, 51, 51); font-family: 'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53;"   ><a style="line-height: 28px; text-decoration: none; color: rgb(85, 108, 136);" href="http://blog.163.com/digoal@126/blog/static/16387704020128772037884/"   >http://blog.163.com/digoal@126/blog/static/16387704020128772037884/</a></div><div style="line-height: 28px; color: rgb(51, 51, 51); font-family: 'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53;"   >execute plan difference between Oracle and PostgreSQL's partition table</div><div style="line-height: 28px; color: rgb(51, 51, 51); font-family: 'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53;"   ><a style="line-height: 28px; text-decoration: none; color: rgb(85, 108, 136);" href="http://blog.163.com/digoal@126/blog/static/163877040201212432441676/"   >http://blog.163.com/digoal@126/blog/static/163877040201212432441676/</a><wbr style="line-height: 28px;"   ></div><div style="line-height: 28px; color: rgb(51, 51, 51); font-family: 'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53;"   >PostgreSQL Partition Table Example</div><div style="line-height: 28px; color: rgb(51, 51, 51); font-family: 'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53;"   ><a style="line-height: 28px; text-decoration: none; color: rgb(85, 108, 136);" href="http://blog.163.com/digoal@126/blog/static/1638770402012325111528424/"   >http://blog.163.com/digoal@126/blog/static/1638770402012325111528424/</a></div><div style="line-height: 28px; color: rgb(51, 51, 51); font-family: 'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53;"   >PostgreSQL partition table or inherits table predict count and gap and privilege monitor</div><div style="line-height: 28px; color: rgb(51, 51, 51); font-family: 'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53;"   ><a style="line-height: 28px; text-decoration: none; color: rgb(85, 108, 136);" href="http://blog.163.com/digoal@126/blog/static/16387704020130433036377/"   >http://blog.163.com/digoal@126/blog/static/16387704020130433036377/</a></div><div style="line-height: 28px; color: rgb(51, 51, 51); font-family: 'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53;"   >PostgreSQL partition table name convert to data type</div><div style="line-height: 28px; color: rgb(51, 51, 51); font-family: 'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53;"   ><a style="line-height: 28px; text-decoration: none; color: rgb(85, 108, 136);" href="http://blog.163.com/digoal@126/blog/static/16387704020130525628988/"   >http://blog.163.com/digoal@126/blog/static/16387704020130525628988/</a></div><div style="line-height: 28px; color: rgb(51, 51, 51); font-family: 'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53;"   >PostgreSQL partition table or inherits table predict count and gap and privilege monitor</div><div style="line-height: 28px; color: rgb(51, 51, 51); font-family: 'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53;"   ><a style="line-height: 28px; text-decoration: none; color: rgb(85, 108, 136);" href="http://blog.163.com/digoal@126/blog/static/16387704020130433036377/"   >http://blog.163.com/digoal@126/blog/static/16387704020130433036377/</a></div><div style="line-height: 28px; color: rgb(51, 51, 51); font-family: 'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53;"   >PostgreSQL partition table's arithmetic tuning example</div><div style="line-height: 28px; color: rgb(51, 51, 51); font-family: 'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53;"   ><a style="line-height: 28px; text-decoration: none; color: rgb(85, 108, 136);" href="http://blog.163.com/digoal@126/blog/static/1638770402011210114036419/"   >http://blog.163.com/digoal@126/blog/static/1638770402011210114036419/</a></div><p style="TEXT-INDENT: 2em;"   >PostgreSQL的分区表是通过INHERIT特性以及，RULE或TRIGGER来实现的。在规则方面，PG推荐使用触发器来实现。</p>
<p style="TEXT-INDENT: 2em;"   >下面是在一个已有的分区表上做扩展分区。</p>
<p style="TEXT-INDENT: 2em;"   >父表：tbl_test</p>
<p style="TEXT-INDENT: 2em;"   >子表：</p>
<p style="TEXT-INDENT: 2em;"   >tbl_test_p0</p>
<p style="TEXT-INDENT: 2em;"   >tbl_test_p1</p>
<p style="TEXT-INDENT: 2em;"   >tbl_test_p10</p>
<p style="TEXT-INDENT: 2em;"   >tbl_test_p11</p>
<p style="TEXT-INDENT: 2em;"   >tbl_test_p12</p>
<p style="TEXT-INDENT: 2em;"   >tbl_test_p13</p>
<p style="TEXT-INDENT: 2em;"   >tbl_test_p14</p>
<p style="TEXT-INDENT: 2em;"   >tbl_test_p15</p>
<p style="TEXT-INDENT: 2em;"   >tbl_test_p16</p>
<p style="TEXT-INDENT: 2em;"   >tbl_test_p17</p>
<p style="TEXT-INDENT: 2em;"   >tbl_test_p18</p>
<p style="TEXT-INDENT: 2em;"   >tbl_test_p19</p>
<p style="TEXT-INDENT: 2em;"   >tbl_test_p2</p>
<p style="TEXT-INDENT: 2em;"   >tbl_test_p20</p>
<p style="TEXT-INDENT: 2em;"   >tbl_test_p21</p>
<p style="TEXT-INDENT: 2em;"   >tbl_test_p22</p>
<p style="TEXT-INDENT: 2em;"   >tbl_test_p23</p>
<p style="TEXT-INDENT: 2em;"   >tbl_test_p24</p>
<p style="TEXT-INDENT: 2em;"   >tbl_test_p25</p>
<p style="TEXT-INDENT: 2em;"   >tbl_test_p26</p>
<p style="TEXT-INDENT: 2em;"   >tbl_test_p27</p>
<p style="TEXT-INDENT: 2em;"   >tbl_test_p_extra</p>
<p style="TEXT-INDENT: 2em;"   >扩展到：</p>
<p style="TEXT-INDENT: 2em;"   >tbl_test_p54</p>
<p style="TEXT-INDENT: 2em;"   >第一步：</p>
<p style="TEXT-INDENT: 2em;"   >创建需要扩展的继承表，赋权限（在9.0以后对父表赋予，查询父表时子表的权限将不再检测），创建索引等</p>
<p style="TEXT-INDENT: 2em;"   >CREATE TABLE tbl_test_p54</p>
<p style="TEXT-INDENT: 2em;"   >(</p>
<p style="TEXT-INDENT: 2em;"   >like tbl_test including defaults,</p>
<p style="TEXT-INDENT: 2em;"   >CONSTRAINT tbl_test_p54_pkey PRIMARY KEY (skyid, currency_id) USING INDEX TABLESPACE tbs_community_idx,</p>
<p style="TEXT-INDENT: 2em;"   >CONSTRAINT tbl_test_p54_skyid_check CHECK (skyid &gt;= 153000000 AND skyid &lt; 154000000)</p>
<p style="TEXT-INDENT: 2em;"   >)</p>
<p style="TEXT-INDENT: 2em;"   >INHERITS (tbl_test)</p>
<p style="TEXT-INDENT: 2em;"   >WITH (</p>
<p style="TEXT-INDENT: 2em;"   >OIDS=FALSE</p>
<p style="TEXT-INDENT: 2em;"   >);</p>
<p style="TEXT-INDENT: 2em;"   >GRANT SELECT ON TABLE tbl_test_p54 TO dwetl;</p>
<p style="TEXT-INDENT: 2em;"   >CREATE INDEX tbl_test_p54_currency_amt_key</p>
<p style="TEXT-INDENT: 2em;"   >ON tbl_test_p54</p>
<p style="TEXT-INDENT: 2em;"   >USING btree</p>
<p style="TEXT-INDENT: 2em;"   >(currency_amt, skyid)</p>
<p style="TEXT-INDENT: 2em;"   >TABLESPACE tbs_community_idx</p>
<p style="TEXT-INDENT: 2em;"   >;</p>
<p style="TEXT-INDENT: 2em;"   >CREATE INDEX tbl_test_p54_currency_id_key</p>
<p style="TEXT-INDENT: 2em;"   >ON tbl_test_p54</p>
<p style="TEXT-INDENT: 2em;"   >USING btree</p>
<p style="TEXT-INDENT: 2em;"   >(currency_id)</p>
<p style="TEXT-INDENT: 2em;"   >TABLESPACE tbs_community_idx</p>
<p style="TEXT-INDENT: 2em;"   >;</p>
<p style="TEXT-INDENT: 2em;"   >CREATE INDEX tbl_test_p54_currency_id_key1</p>
<p style="TEXT-INDENT: 2em;"   >ON tbl_test_p54</p>
<p style="TEXT-INDENT: 2em;"   >USING btree</p>
<p style="TEXT-INDENT: 2em;"   >(currency_id, currency_amt)</p>
<p style="TEXT-INDENT: 2em;"   >TABLESPACE tbs_community_idx</p>
<p style="TEXT-INDENT: 2em;"   >;</p>
<p style="TEXT-INDENT: 2em;"   >CREATE INDEX tbl_test_p54_skyid_key</p>
<p style="TEXT-INDENT: 2em;"   >ON tbl_test_p54</p>
<p style="TEXT-INDENT: 2em;"   >USING btree</p>
<p style="TEXT-INDENT: 2em;"   >(skyid)</p>
<p style="TEXT-INDENT: 2em;"   >TABLESPACE tbs_community_idx</p>
<p style="TEXT-INDENT: 2em;"   >;</p>
<p style="TEXT-INDENT: 2em;"   >第二步：</p>
<p style="TEXT-INDENT: 2em;"   >修改触发器函数</p>
<p style="TEXT-INDENT: 2em;"   >CREATE OR REPLACE FUNCTION tbl_test_delete_trigger()</p>
<p style="TEXT-INDENT: 2em;"   >RETURNS “trigger” AS</p>
<p style="TEXT-INDENT: 2em;"   >$BODY$</p>
<p style="TEXT-INDENT: 2em;"   >BEGIN</p>
<p style="TEXT-INDENT: 2em;"   >IF &nbsp; &nbsp;( OLD.skyid&gt;=0 and OLD.skyid&lt;100000000 ) THEN</p>
<p style="TEXT-INDENT: 2em;"   >DELETE FROM tbl_test_p0 where skyid=OLD.skyid;</p>
<p style="TEXT-INDENT: 2em;"   >ELSIF ( OLD.skyid&gt;=100000000 and OLD.skyid&lt;101000000 ) THEN</p>
<p style="TEXT-INDENT: 2em;"   >DELETE FROM tbl_test_p1 where skyid=OLD.skyid;</p>
<p style="TEXT-INDENT: 2em;"   >ELSIF ( OLD.skyid&gt;=101000000 and OLD.skyid&lt;102000000 ) THEN</p>
<p style="TEXT-INDENT: 2em;"   >DELETE FROM tbl_test_p2 where skyid=OLD.skyid;</p>
<p style="TEXT-INDENT: 2em;"   >ELSIF ( OLD.skyid&gt;=102000000 and OLD.skyid&lt;103000000 ) THEN</p>
<p style="TEXT-INDENT: 2em;"   >DELETE FROM tbl_test_p3 where skyid=OLD.skyid;</p>
<p style="TEXT-INDENT: 2em;"   >ELSIF ( OLD.skyid&gt;=103000000 and OLD.skyid&lt;104000000 ) THEN</p>
<p style="TEXT-INDENT: 2em;"   >DELETE FROM tbl_test_p4 where skyid=OLD.skyid;</p>
<p style="TEXT-INDENT: 2em;"   >ELSIF ( OLD.skyid&gt;=104000000 and OLD.skyid&lt;105000000 ) THEN</p>
<p style="TEXT-INDENT: 2em;"   >DELETE FROM tbl_test_p5 where skyid=OLD.skyid;</p>
<p style="TEXT-INDENT: 2em;"   >ELSIF ( OLD.skyid&gt;=105000000 and OLD.skyid&lt;106000000 ) THEN</p>
<p style="TEXT-INDENT: 2em;"   >DELETE FROM tbl_test_p6 where skyid=OLD.skyid;</p>
<p style="TEXT-INDENT: 2em;"   >ELSIF ( OLD.skyid&gt;=106000000 and OLD.skyid&lt;107000000 ) THEN</p>
<p style="TEXT-INDENT: 2em;"   >DELETE FROM tbl_test_p7 where skyid=OLD.skyid;</p>
<p style="TEXT-INDENT: 2em;"   >ELSIF ( OLD.skyid&gt;=107000000 and OLD.skyid&lt;108000000 ) THEN</p>
<p style="TEXT-INDENT: 2em;"   >DELETE FROM tbl_test_p8 where skyid=OLD.skyid;</p>
<p style="TEXT-INDENT: 2em;"   >ELSIF ( OLD.skyid&gt;=108000000 and OLD.skyid&lt;109000000 ) THEN</p>
<p style="TEXT-INDENT: 2em;"   >DELETE FROM tbl_test_p9 where skyid=OLD.skyid;</p>
<p style="TEXT-INDENT: 2em;"   >ELSIF ( OLD.skyid&gt;=109000000 and OLD.skyid&lt;110000000 ) THEN</p>
<p style="TEXT-INDENT: 2em;"   >DELETE FROM tbl_test_p10 where skyid=OLD.skyid;</p>
<p style="TEXT-INDENT: 2em;"   >ELSIF ( OLD.skyid&gt;=110000000 and OLD.skyid&lt;111000000 ) THEN</p>
<p style="TEXT-INDENT: 2em;"   >DELETE FROM tbl_test_p11 where skyid=OLD.skyid;</p>
<p style="TEXT-INDENT: 2em;"   >ELSIF ( OLD.skyid&gt;=111000000 and OLD.skyid&lt;112000000 ) THEN</p>
<p style="TEXT-INDENT: 2em;"   >DELETE FROM tbl_test_p12 where skyid=OLD.skyid;</p>
<p style="TEXT-INDENT: 2em;"   >ELSIF ( OLD.skyid&gt;=112000000 and OLD.skyid&lt;113000000 ) THEN</p>
<p style="TEXT-INDENT: 2em;"   >DELETE FROM tbl_test_p13 where skyid=OLD.skyid;</p>
<p style="TEXT-INDENT: 2em;"   >ELSIF ( OLD.skyid&gt;=113000000 and OLD.skyid&lt;114000000 ) THEN</p>
<p style="TEXT-INDENT: 2em;"   >DELETE FROM tbl_test_p14 where skyid=OLD.skyid;</p>
<p style="TEXT-INDENT: 2em;"   >ELSIF ( OLD.skyid&gt;=114000000 and OLD.skyid&lt;115000000 ) THEN</p>
<p style="TEXT-INDENT: 2em;"   >DELETE FROM tbl_test_p15 where skyid=OLD.skyid;</p>
<p style="TEXT-INDENT: 2em;"   >ELSIF ( OLD.skyid&gt;=115000000 and OLD.skyid&lt;116000000 ) THEN</p>
<p style="TEXT-INDENT: 2em;"   >DELETE FROM tbl_test_p16 where skyid=OLD.skyid;</p>
<p style="TEXT-INDENT: 2em;"   >ELSIF ( OLD.skyid&gt;=116000000 and OLD.skyid&lt;117000000 ) THEN</p>
<p style="TEXT-INDENT: 2em;"   >DELETE FROM tbl_test_p17 where skyid=OLD.skyid;</p>
<p style="TEXT-INDENT: 2em;"   >ELSIF ( OLD.skyid&gt;=117000000 and OLD.skyid&lt;118000000 ) THEN</p>
<p style="TEXT-INDENT: 2em;"   >DELETE FROM tbl_test_p18 where skyid=OLD.skyid;</p>
<p style="TEXT-INDENT: 2em;"   >ELSIF ( OLD.skyid&gt;=118000000 and OLD.skyid&lt;119000000 ) THEN</p>
<p style="TEXT-INDENT: 2em;"   >DELETE FROM tbl_test_p19 where skyid=OLD.skyid;</p>
<p style="TEXT-INDENT: 2em;"   >ELSIF ( OLD.skyid&gt;=119000000 and OLD.skyid&lt;120000000 ) THEN</p>
<p style="TEXT-INDENT: 2em;"   >DELETE FROM tbl_test_p20 where skyid=OLD.skyid;</p>
<p style="TEXT-INDENT: 2em;"   >ELSIF ( OLD.skyid&gt;=120000000 and OLD.skyid&lt;121000000 ) THEN</p>
<p style="TEXT-INDENT: 2em;"   >DELETE FROM tbl_test_p21 where skyid=OLD.skyid;</p>
<p style="TEXT-INDENT: 2em;"   >ELSIF ( OLD.skyid&gt;=121000000 and OLD.skyid&lt;122000000 ) THEN</p>
<p style="TEXT-INDENT: 2em;"   >DELETE FROM tbl_test_p22 where skyid=OLD.skyid;</p>
<p style="TEXT-INDENT: 2em;"   >ELSIF ( OLD.skyid&gt;=122000000 and OLD.skyid&lt;123000000 ) THEN</p>
<p style="TEXT-INDENT: 2em;"   >DELETE FROM tbl_test_p23 where skyid=OLD.skyid;</p>
<p style="TEXT-INDENT: 2em;"   >ELSIF ( OLD.skyid&gt;=123000000 and OLD.skyid&lt;124000000 ) THEN</p>
<p style="TEXT-INDENT: 2em;"   >DELETE FROM tbl_test_p24 where skyid=OLD.skyid;</p>
<p style="TEXT-INDENT: 2em;"   >ELSIF ( OLD.skyid&gt;=124000000 and OLD.skyid&lt;125000000 ) THEN</p>
<p style="TEXT-INDENT: 2em;"   >DELETE FROM tbl_test_p25 where skyid=OLD.skyid;</p>
<p style="TEXT-INDENT: 2em;"   >ELSIF ( OLD.skyid&gt;=125000000 and OLD.skyid&lt;126000000 ) THEN</p>
<p style="TEXT-INDENT: 2em;"   >DELETE FROM tbl_test_p26 where skyid=OLD.skyid;</p>
<p style="TEXT-INDENT: 2em;"   >ELSIF ( OLD.skyid&gt;=126000000 and OLD.skyid&lt;127000000 ) THEN</p>
<p style="TEXT-INDENT: 2em;"   >DELETE FROM tbl_test_p27 where skyid=OLD.skyid;</p>
<p style="TEXT-INDENT: 2em;"   >ELSIF ( OLD.skyid&gt;=127000000 and OLD.skyid&lt;128000000 ) THEN</p>
<p style="TEXT-INDENT: 2em;"   >DELETE FROM tbl_test_p28 where skyid=OLD.skyid;</p>
<p style="TEXT-INDENT: 2em;"   >ELSIF ( OLD.skyid&gt;=128000000 and OLD.skyid&lt;129000000 ) THEN</p>
<p style="TEXT-INDENT: 2em;"   >DELETE FROM tbl_test_p29 where skyid=OLD.skyid;</p>
<p style="TEXT-INDENT: 2em;"   >ELSIF ( OLD.skyid&gt;=129000000 and OLD.skyid&lt;130000000 ) THEN</p>
<p style="TEXT-INDENT: 2em;"   >DELETE FROM tbl_test_p30 where skyid=OLD.skyid;</p>
<p style="TEXT-INDENT: 2em;"   >ELSIF ( OLD.skyid&gt;=130000000 and OLD.skyid&lt;131000000 ) THEN</p>
<p style="TEXT-INDENT: 2em;"   >DELETE FROM tbl_test_p31 where skyid=OLD.skyid;</p>
<p style="TEXT-INDENT: 2em;"   >ELSIF ( OLD.skyid&gt;=131000000 and OLD.skyid&lt;132000000 ) THEN</p>
<p style="TEXT-INDENT: 2em;"   >DELETE FROM tbl_test_p32 where skyid=OLD.skyid;</p>
<p style="TEXT-INDENT: 2em;"   >ELSIF ( OLD.skyid&gt;=132000000 and OLD.skyid&lt;133000000 ) THEN</p>
<p style="TEXT-INDENT: 2em;"   >DELETE FROM tbl_test_p33 where skyid=OLD.skyid;</p>
<p style="TEXT-INDENT: 2em;"   >ELSIF ( OLD.skyid&gt;=133000000 and OLD.skyid&lt;134000000 ) THEN</p>
<p style="TEXT-INDENT: 2em;"   >DELETE FROM tbl_test_p34 where skyid=OLD.skyid;</p>
<p style="TEXT-INDENT: 2em;"   >ELSIF ( OLD.skyid&gt;=134000000 and OLD.skyid&lt;135000000 ) THEN</p>
<p style="TEXT-INDENT: 2em;"   >DELETE FROM tbl_test_p35 where skyid=OLD.skyid;</p>
<p style="TEXT-INDENT: 2em;"   >ELSIF ( OLD.skyid&gt;=135000000 and OLD.skyid&lt;136000000 ) THEN</p>
<p style="TEXT-INDENT: 2em;"   >DELETE FROM tbl_test_p36 where skyid=OLD.skyid;</p>
<p style="TEXT-INDENT: 2em;"   >ELSIF ( OLD.skyid&gt;=136000000 and OLD.skyid&lt;137000000 ) THEN</p>
<p style="TEXT-INDENT: 2em;"   >DELETE FROM tbl_test_p37 where skyid=OLD.skyid;</p>
<p style="TEXT-INDENT: 2em;"   >ELSIF ( OLD.skyid&gt;=137000000 and OLD.skyid&lt;138000000 ) THEN</p>
<p style="TEXT-INDENT: 2em;"   >DELETE FROM tbl_test_p38 where skyid=OLD.skyid;</p>
<p style="TEXT-INDENT: 2em;"   >ELSIF ( OLD.skyid&gt;=138000000 and OLD.skyid&lt;139000000 ) THEN</p>
<p style="TEXT-INDENT: 2em;"   >DELETE FROM tbl_test_p39 where skyid=OLD.skyid;</p>
<p style="TEXT-INDENT: 2em;"   >ELSIF ( OLD.skyid&gt;=139000000 and OLD.skyid&lt;140000000 ) THEN</p>
<p style="TEXT-INDENT: 2em;"   >DELETE FROM tbl_test_p40 where skyid=OLD.skyid;</p>
<p style="TEXT-INDENT: 2em;"   >ELSIF ( OLD.skyid&gt;=140000000 and OLD.skyid&lt;141000000 ) THEN</p>
<p style="TEXT-INDENT: 2em;"   >DELETE FROM tbl_test_p41 where skyid=OLD.skyid;</p>
<p style="TEXT-INDENT: 2em;"   >ELSIF ( OLD.skyid&gt;=141000000 and OLD.skyid&lt;142000000 ) THEN</p>
<p style="TEXT-INDENT: 2em;"   >DELETE FROM tbl_test_p42 where skyid=OLD.skyid;</p>
<p style="TEXT-INDENT: 2em;"   >ELSIF ( OLD.skyid&gt;=142000000 and OLD.skyid&lt;143000000 ) THEN</p>
<p style="TEXT-INDENT: 2em;"   >DELETE FROM tbl_test_p43 where skyid=OLD.skyid;</p>
<p style="TEXT-INDENT: 2em;"   >ELSIF ( OLD.skyid&gt;=143000000 and OLD.skyid&lt;144000000 ) THEN</p>
<p style="TEXT-INDENT: 2em;"   >DELETE FROM tbl_test_p44 where skyid=OLD.skyid;</p>
<p style="TEXT-INDENT: 2em;"   >ELSIF ( OLD.skyid&gt;=144000000 and OLD.skyid&lt;145000000 ) THEN</p>
<p style="TEXT-INDENT: 2em;"   >DELETE FROM tbl_test_p45 where skyid=OLD.skyid;</p>
<p style="TEXT-INDENT: 2em;"   >ELSIF ( OLD.skyid&gt;=145000000 and OLD.skyid&lt;146000000 ) THEN</p>
<p style="TEXT-INDENT: 2em;"   >DELETE FROM tbl_test_p46 where skyid=OLD.skyid;</p>
<p style="TEXT-INDENT: 2em;"   >ELSIF ( OLD.skyid&gt;=146000000 and OLD.skyid&lt;147000000 ) THEN</p>
<p style="TEXT-INDENT: 2em;"   >DELETE FROM tbl_test_p47 where skyid=OLD.skyid;</p>
<p style="TEXT-INDENT: 2em;"   >ELSIF ( OLD.skyid&gt;=147000000 and OLD.skyid&lt;148000000 ) THEN</p>
<p style="TEXT-INDENT: 2em;"   >DELETE FROM tbl_test_p48 where skyid=OLD.skyid;</p>
<p style="TEXT-INDENT: 2em;"   >ELSIF ( OLD.skyid&gt;=148000000 and OLD.skyid&lt;149000000 ) THEN</p>
<p style="TEXT-INDENT: 2em;"   >DELETE FROM tbl_test_p49 where skyid=OLD.skyid;</p>
<p style="TEXT-INDENT: 2em;"   >ELSIF ( OLD.skyid&gt;=149000000 and OLD.skyid&lt;150000000 ) THEN</p>
<p style="TEXT-INDENT: 2em;"   >DELETE FROM tbl_test_p50 where skyid=OLD.skyid;</p>
<p style="TEXT-INDENT: 2em;"   >ELSIF ( OLD.skyid&gt;=150000000 and OLD.skyid&lt;151000000 ) THEN</p>
<p style="TEXT-INDENT: 2em;"   >DELETE FROM tbl_test_p51 where skyid=OLD.skyid;</p>
<p style="TEXT-INDENT: 2em;"   >ELSIF ( OLD.skyid&gt;=151000000 and OLD.skyid&lt;152000000 ) THEN</p>
<p style="TEXT-INDENT: 2em;"   >DELETE FROM tbl_test_p52 where skyid=OLD.skyid;</p>
<p style="TEXT-INDENT: 2em;"   >ELSIF ( OLD.skyid&gt;=152000000 and OLD.skyid&lt;153000000 ) THEN</p>
<p style="TEXT-INDENT: 2em;"   >DELETE FROM tbl_test_p53 where skyid=OLD.skyid;</p>
<p style="TEXT-INDENT: 2em;"   >ELSIF ( OLD.skyid&gt;=153000000 and OLD.skyid&lt;154000000 ) THEN</p>
<p style="TEXT-INDENT: 2em;"   >DELETE FROM tbl_test_p54 where skyid=OLD.skyid;</p>
<p style="TEXT-INDENT: 2em;"   >ELSIF ( OLD.skyid&lt;0 or OLD.skyid&gt;=154000000 ) THEN</p>
<p style="TEXT-INDENT: 2em;"   >DELETE FROM tbl_test_p_extra where skyid=OLD.skyid;</p>
<p style="TEXT-INDENT: 2em;"   >ELSE</p>
<p style="TEXT-INDENT: 2em;"   >RAISE EXCEPTION ’skyid out of range. &nbsp;Fix the tbl_test_delete_trigger() function!’;</p>
<p style="TEXT-INDENT: 2em;"   >END IF;</p>
<p style="TEXT-INDENT: 2em;"   >RETURN NULL;</p>
<p style="TEXT-INDENT: 2em;"   >END;</p>
<p style="TEXT-INDENT: 2em;"   >$BODY$</p>
<p style="TEXT-INDENT: 2em;"   >LANGUAGE ‘plpgsql’ VOLATILE;</p>
<p style="TEXT-INDENT: 2em;"   >―C</p>
<p style="TEXT-INDENT: 2em;"   >CREATE OR REPLACE FUNCTION tbl_test_insert_trigger()</p>
<p style="TEXT-INDENT: 2em;"   >RETURNS “trigger” AS</p>
<p style="TEXT-INDENT: 2em;"   >$BODY$</p>
<p style="TEXT-INDENT: 2em;"   >BEGIN</p>
<p style="TEXT-INDENT: 2em;"   >IF &nbsp; &nbsp;( NEW.skyid&gt;=0 and NEW.skyid&lt;100000000 ) THEN</p>
<p style="TEXT-INDENT: 2em;"   >INSERT INTO tbl_test_p0 VALUES (NEW.*);</p>
<p style="TEXT-INDENT: 2em;"   >ELSIF ( NEW.skyid&gt;=100000000 and NEW.skyid&lt;101000000 ) THEN</p>
<p style="TEXT-INDENT: 2em;"   >INSERT INTO tbl_test_p1 VALUES (NEW.*);</p>
<p style="TEXT-INDENT: 2em;"   >ELSIF ( NEW.skyid&gt;=101000000 and NEW.skyid&lt;102000000 ) THEN</p>
<p style="TEXT-INDENT: 2em;"   >INSERT INTO tbl_test_p2 VALUES (NEW.*);</p>
<p style="TEXT-INDENT: 2em;"   >ELSIF ( NEW.skyid&gt;=102000000 and NEW.skyid&lt;103000000 ) THEN</p>
<p style="TEXT-INDENT: 2em;"   >INSERT INTO tbl_test_p3 VALUES (NEW.*);</p>
<p style="TEXT-INDENT: 2em;"   >ELSIF ( NEW.skyid&gt;=103000000 and NEW.skyid&lt;104000000 ) THEN</p>
<p style="TEXT-INDENT: 2em;"   >INSERT INTO tbl_test_p4 VALUES (NEW.*);</p>
<p style="TEXT-INDENT: 2em;"   >ELSIF ( NEW.skyid&gt;=104000000 and NEW.skyid&lt;105000000 ) THEN</p>
<p style="TEXT-INDENT: 2em;"   >INSERT INTO tbl_test_p5 VALUES (NEW.*);</p>
<p style="TEXT-INDENT: 2em;"   >ELSIF ( NEW.skyid&gt;=105000000 and NEW.skyid&lt;106000000 ) THEN</p>
<p style="TEXT-INDENT: 2em;"   >INSERT INTO tbl_test_p6 VALUES (NEW.*);</p>
<p style="TEXT-INDENT: 2em;"   >ELSIF ( NEW.skyid&gt;=106000000 and NEW.skyid&lt;107000000 ) THEN</p>
<p style="TEXT-INDENT: 2em;"   >INSERT INTO tbl_test_p7 VALUES (NEW.*);</p>
<p style="TEXT-INDENT: 2em;"   >ELSIF ( NEW.skyid&gt;=107000000 and NEW.skyid&lt;108000000 ) THEN</p>
<p style="TEXT-INDENT: 2em;"   >INSERT INTO tbl_test_p8 VALUES (NEW.*);</p>
<p style="TEXT-INDENT: 2em;"   >ELSIF ( NEW.skyid&gt;=108000000 and NEW.skyid&lt;109000000 ) THEN</p>
<p style="TEXT-INDENT: 2em;"   >INSERT INTO tbl_test_p9 VALUES (NEW.*);</p>
<p style="TEXT-INDENT: 2em;"   >ELSIF ( NEW.skyid&gt;=109000000 and NEW.skyid&lt;110000000 ) THEN</p>
<p style="TEXT-INDENT: 2em;"   >INSERT INTO tbl_test_p10 VALUES (NEW.*);</p>
<p style="TEXT-INDENT: 2em;"   >ELSIF ( NEW.skyid&gt;=110000000 and NEW.skyid&lt;111000000 ) THEN</p>
<p style="TEXT-INDENT: 2em;"   >INSERT INTO tbl_test_p11 VALUES (NEW.*);</p>
<p style="TEXT-INDENT: 2em;"   >ELSIF ( NEW.skyid&gt;=111000000 and NEW.skyid&lt;112000000 ) THEN</p>
<p style="TEXT-INDENT: 2em;"   >INSERT INTO tbl_test_p12 VALUES (NEW.*);</p>
<p style="TEXT-INDENT: 2em;"   >ELSIF ( NEW.skyid&gt;=112000000 and NEW.skyid&lt;113000000 ) THEN</p>
<p style="TEXT-INDENT: 2em;"   >INSERT INTO tbl_test_p13 VALUES (NEW.*);</p>
<p style="TEXT-INDENT: 2em;"   >ELSIF ( NEW.skyid&gt;=113000000 and NEW.skyid&lt;114000000 ) THEN</p>
<p style="TEXT-INDENT: 2em;"   >INSERT INTO tbl_test_p14 VALUES (NEW.*);</p>
<p style="TEXT-INDENT: 2em;"   >ELSIF ( NEW.skyid&gt;=114000000 and NEW.skyid&lt;115000000 ) THEN</p>
<p style="TEXT-INDENT: 2em;"   >INSERT INTO tbl_test_p15 VALUES (NEW.*);</p>
<p style="TEXT-INDENT: 2em;"   >ELSIF ( NEW.skyid&gt;=115000000 and NEW.skyid&lt;116000000 ) THEN</p>
<p style="TEXT-INDENT: 2em;"   >INSERT INTO tbl_test_p16 VALUES (NEW.*);</p>
<p style="TEXT-INDENT: 2em;"   >ELSIF ( NEW.skyid&gt;=116000000 and NEW.skyid&lt;117000000 ) THEN</p>
<p style="TEXT-INDENT: 2em;"   >INSERT INTO tbl_test_p17 VALUES (NEW.*);</p>
<p style="TEXT-INDENT: 2em;"   >ELSIF ( NEW.skyid&gt;=117000000 and NEW.skyid&lt;118000000 ) THEN</p>
<p style="TEXT-INDENT: 2em;"   >INSERT INTO tbl_test_p18 VALUES (NEW.*);</p>
<p style="TEXT-INDENT: 2em;"   >ELSIF ( NEW.skyid&gt;=118000000 and NEW.skyid&lt;119000000 ) THEN</p>
<p style="TEXT-INDENT: 2em;"   >INSERT INTO tbl_test_p19 VALUES (NEW.*);</p>
<p style="TEXT-INDENT: 2em;"   >ELSIF ( NEW.skyid&gt;=119000000 and NEW.skyid&lt;120000000 ) THEN</p>
<p style="TEXT-INDENT: 2em;"   >INSERT INTO tbl_test_p20 VALUES (NEW.*);</p>
<p style="TEXT-INDENT: 2em;"   >ELSIF ( NEW.skyid&gt;=120000000 and NEW.skyid&lt;121000000 ) THEN</p>
<p style="TEXT-INDENT: 2em;"   >INSERT INTO tbl_test_p21 VALUES (NEW.*);</p>
<p style="TEXT-INDENT: 2em;"   >ELSIF ( NEW.skyid&gt;=121000000 and NEW.skyid&lt;122000000 ) THEN</p>
<p style="TEXT-INDENT: 2em;"   >INSERT INTO tbl_test_p22 VALUES (NEW.*);</p>
<p style="TEXT-INDENT: 2em;"   >ELSIF ( NEW.skyid&gt;=122000000 and NEW.skyid&lt;123000000 ) THEN</p>
<p style="TEXT-INDENT: 2em;"   >INSERT INTO tbl_test_p23 VALUES (NEW.*);</p>
<p style="TEXT-INDENT: 2em;"   >ELSIF ( NEW.skyid&gt;=123000000 and NEW.skyid&lt;124000000 ) THEN</p>
<p style="TEXT-INDENT: 2em;"   >INSERT INTO tbl_test_p24 VALUES (NEW.*);</p>
<p style="TEXT-INDENT: 2em;"   >ELSIF ( NEW.skyid&gt;=124000000 and NEW.skyid&lt;125000000 ) THEN</p>
<p style="TEXT-INDENT: 2em;"   >INSERT INTO tbl_test_p25 VALUES (NEW.*);</p>
<p style="TEXT-INDENT: 2em;"   >ELSIF ( NEW.skyid&gt;=125000000 and NEW.skyid&lt;126000000 ) THEN</p>
<p style="TEXT-INDENT: 2em;"   >INSERT INTO tbl_test_p26 VALUES (NEW.*);</p>
<p style="TEXT-INDENT: 2em;"   >ELSIF ( NEW.skyid&gt;=126000000 and NEW.skyid&lt;127000000 ) THEN</p>
<p style="TEXT-INDENT: 2em;"   >INSERT INTO tbl_test_p27 VALUES (NEW.*);</p>
<p style="TEXT-INDENT: 2em;"   >ELSIF ( NEW.skyid&gt;=127000000 and NEW.skyid&lt;128000000 ) THEN</p>
<p style="TEXT-INDENT: 2em;"   >INSERT INTO tbl_test_p28 VALUES (NEW.*);</p>
<p style="TEXT-INDENT: 2em;"   >ELSIF ( NEW.skyid&gt;=128000000 and NEW.skyid&lt;129000000 ) THEN</p>
<p style="TEXT-INDENT: 2em;"   >INSERT INTO tbl_test_p29 VALUES (NEW.*);</p>
<p style="TEXT-INDENT: 2em;"   >ELSIF ( NEW.skyid&gt;=129000000 and NEW.skyid&lt;130000000 ) THEN</p>
<p style="TEXT-INDENT: 2em;"   >INSERT INTO tbl_test_p30 VALUES (NEW.*);</p>
<p style="TEXT-INDENT: 2em;"   >ELSIF ( NEW.skyid&gt;=130000000 and NEW.skyid&lt;131000000 ) THEN</p>
<p style="TEXT-INDENT: 2em;"   >INSERT INTO tbl_test_p31 VALUES (NEW.*);</p>
<p style="TEXT-INDENT: 2em;"   >ELSIF ( NEW.skyid&gt;=131000000 and NEW.skyid&lt;132000000 ) THEN</p>
<p style="TEXT-INDENT: 2em;"   >INSERT INTO tbl_test_p32 VALUES (NEW.*);</p>
<p style="TEXT-INDENT: 2em;"   >ELSIF ( NEW.skyid&gt;=132000000 and NEW.skyid&lt;133000000 ) THEN</p>
<p style="TEXT-INDENT: 2em;"   >INSERT INTO tbl_test_p33 VALUES (NEW.*);</p>
<p style="TEXT-INDENT: 2em;"   >ELSIF ( NEW.skyid&gt;=133000000 and NEW.skyid&lt;134000000 ) THEN</p>
<p style="TEXT-INDENT: 2em;"   >INSERT INTO tbl_test_p34 VALUES (NEW.*);</p>
<p style="TEXT-INDENT: 2em;"   >ELSIF ( NEW.skyid&gt;=134000000 and NEW.skyid&lt;135000000 ) THEN</p>
<p style="TEXT-INDENT: 2em;"   >INSERT INTO tbl_test_p35 VALUES (NEW.*);</p>
<p style="TEXT-INDENT: 2em;"   >ELSIF ( NEW.skyid&gt;=135000000 and NEW.skyid&lt;136000000 ) THEN</p>
<p style="TEXT-INDENT: 2em;"   >INSERT INTO tbl_test_p36 VALUES (NEW.*);</p>
<p style="TEXT-INDENT: 2em;"   >ELSIF ( NEW.skyid&gt;=136000000 and NEW.skyid&lt;137000000 ) THEN</p>
<p style="TEXT-INDENT: 2em;"   >INSERT INTO tbl_test_p37 VALUES (NEW.*);</p>
<p style="TEXT-INDENT: 2em;"   >ELSIF ( NEW.skyid&gt;=137000000 and NEW.skyid&lt;138000000 ) THEN</p>
<p style="TEXT-INDENT: 2em;"   >INSERT INTO tbl_test_p38 VALUES (NEW.*);</p>
<p style="TEXT-INDENT: 2em;"   >ELSIF ( NEW.skyid&gt;=138000000 and NEW.skyid&lt;139000000 ) THEN</p>
<p style="TEXT-INDENT: 2em;"   >INSERT INTO tbl_test_p39 VALUES (NEW.*);</p>
<p style="TEXT-INDENT: 2em;"   >ELSIF ( NEW.skyid&gt;=139000000 and NEW.skyid&lt;140000000 ) THEN</p>
<p style="TEXT-INDENT: 2em;"   >INSERT INTO tbl_test_p40 VALUES (NEW.*);</p>
<p style="TEXT-INDENT: 2em;"   >ELSIF ( NEW.skyid&gt;=140000000 and NEW.skyid&lt;141000000 ) THEN</p>
<p style="TEXT-INDENT: 2em;"   >INSERT INTO tbl_test_p41 VALUES (NEW.*);</p>
<p style="TEXT-INDENT: 2em;"   >ELSIF ( NEW.skyid&gt;=141000000 and NEW.skyid&lt;142000000 ) THEN</p>
<p style="TEXT-INDENT: 2em;"   >INSERT INTO tbl_test_p42 VALUES (NEW.*);</p>
<p style="TEXT-INDENT: 2em;"   >ELSIF ( NEW.skyid&gt;=142000000 and NEW.skyid&lt;143000000 ) THEN</p>
<p style="TEXT-INDENT: 2em;"   >INSERT INTO tbl_test_p43 VALUES (NEW.*);</p>
<p style="TEXT-INDENT: 2em;"   >ELSIF ( NEW.skyid&gt;=143000000 and NEW.skyid&lt;144000000 ) THEN</p>
<p style="TEXT-INDENT: 2em;"   >INSERT INTO tbl_test_p44 VALUES (NEW.*);</p>
<p style="TEXT-INDENT: 2em;"   >ELSIF ( NEW.skyid&gt;=144000000 and NEW.skyid&lt;145000000 ) THEN</p>
<p style="TEXT-INDENT: 2em;"   >INSERT INTO tbl_test_p45 VALUES (NEW.*);</p>
<p style="TEXT-INDENT: 2em;"   >ELSIF ( NEW.skyid&gt;=145000000 and NEW.skyid&lt;146000000 ) THEN</p>
<p style="TEXT-INDENT: 2em;"   >INSERT INTO tbl_test_p46 VALUES (NEW.*);</p>
<p style="TEXT-INDENT: 2em;"   >ELSIF ( NEW.skyid&gt;=146000000 and NEW.skyid&lt;147000000 ) THEN</p>
<p style="TEXT-INDENT: 2em;"   >INSERT INTO tbl_test_p47 VALUES (NEW.*);</p>
<p style="TEXT-INDENT: 2em;"   >ELSIF ( NEW.skyid&gt;=147000000 and NEW.skyid&lt;148000000 ) THEN</p>
<p style="TEXT-INDENT: 2em;"   >INSERT INTO tbl_test_p48 VALUES (NEW.*);</p>
<p style="TEXT-INDENT: 2em;"   >ELSIF ( NEW.skyid&gt;=148000000 and NEW.skyid&lt;149000000 ) THEN</p>
<p style="TEXT-INDENT: 2em;"   >INSERT INTO tbl_test_p49 VALUES (NEW.*);</p>
<p style="TEXT-INDENT: 2em;"   >ELSIF ( NEW.skyid&gt;=149000000 and NEW.skyid&lt;150000000 ) THEN</p>
<p style="TEXT-INDENT: 2em;"   >INSERT INTO tbl_test_p50 VALUES (NEW.*);</p>
<p style="TEXT-INDENT: 2em;"   >ELSIF ( NEW.skyid&gt;=150000000 and NEW.skyid&lt;151000000 ) THEN</p>
<p style="TEXT-INDENT: 2em;"   >INSERT INTO tbl_test_p51 VALUES (NEW.*);</p>
<p style="TEXT-INDENT: 2em;"   >ELSIF ( NEW.skyid&gt;=151000000 and NEW.skyid&lt;152000000 ) THEN</p>
<p style="TEXT-INDENT: 2em;"   >INSERT INTO tbl_test_p52 VALUES (NEW.*);</p>
<p style="TEXT-INDENT: 2em;"   >ELSIF ( NEW.skyid&gt;=152000000 and NEW.skyid&lt;153000000 ) THEN</p>
<p style="TEXT-INDENT: 2em;"   >INSERT INTO tbl_test_p53 VALUES (NEW.*);</p>
<p style="TEXT-INDENT: 2em;"   >ELSIF ( NEW.skyid&gt;=153000000 and NEW.skyid&lt;154000000 ) THEN</p>
<p style="TEXT-INDENT: 2em;"   >INSERT INTO tbl_test_p54 VALUES (NEW.*);</p>
<p style="TEXT-INDENT: 2em;"   >ELSIF ( NEW.skyid&lt;0 or NEW.skyid&gt;=154000000 ) THEN</p>
<p style="TEXT-INDENT: 2em;"   >INSERT INTO tbl_test_p_extra VALUES (NEW.*);</p>
<p style="TEXT-INDENT: 2em;"   >ELSE</p>
<p style="TEXT-INDENT: 2em;"   >RAISE EXCEPTION ’skyid out of range. &nbsp;Fix the tbl_test_insert_trigger() function!’;</p>
<p style="TEXT-INDENT: 2em;"   >END IF;</p>
<p style="TEXT-INDENT: 2em;"   >RETURN NULL;</p>
<p style="TEXT-INDENT: 2em;"   >END;</p>
<p style="TEXT-INDENT: 2em;"   >$BODY$</p>
<p style="TEXT-INDENT: 2em;"   >LANGUAGE ‘plpgsql’ VOLATILE;</p>
<p style="TEXT-INDENT: 2em;"   >第三步：</p>
<p style="TEXT-INDENT: 2em;"   >修改默认表的约束</p>
<p style="TEXT-INDENT: 2em;"   >alter table tbl_test_p_extra drop constraint tbl_test_p_extra_skyid_check;</p>
<p style="TEXT-INDENT: 2em;"   >alter table tbl_test_p_extra add constraint tbl_test_p_extra_skyid_check &nbsp;CHECK (skyid &lt; 0 OR skyid &gt;= 154000000);</p>
<p style="TEXT-INDENT: 2em;"   >提醒：</p>
<p style="TEXT-INDENT: 2em;"   >要让执行计划器使用分区约束，必须满足一下条件：</p>
<p style="TEXT-INDENT: 2em;"   >1.非变量</p>
<p style="TEXT-INDENT: 2em;"   >传入到分区条件的字段的匹配不能使用变量，否则的话就不会用到分区作为限制查询段。</p>
<p style="TEXT-INDENT: 2em;"   >2.参数</p>
<p style="TEXT-INDENT: 2em;"   >constraint_exclusion = on</p>
<a rel="nofollow" href="http://info.flagcounter.com/h9V1"   ><img title="PostgreSQL分区表扩展实例 - 德哥@Digoal - PostgreSQL"   src="http://s03.flagcounter.com/count/h9V1/bg_FFFFFF/txt_000000/border_CCCCCC/columns_2/maxflags_12/viewers_0/labels_0/pageviews_0/flags_0/"   alt="Flag Counter"   border="0"   ></a></div>
	</div>
	<h3>评论</h3>
	<div class="" id="" style="padding:0 20px;">
			<div id="">
				<h5 id="">byfei163 - 2013-06-20 16:53:24</h5>
				<div>PG的分区多了以后，效率大大降低，要写成百上千个IF ELSE，需要优化这个逻辑。</div>
			</div>
			<div style="padding-left:40px;">
				<h5 id="">德哥@Digoal 回复 byfei163 - 2013-06-20 16:53:24</h5>
				<div style="width:600px;">多年以前写的文章,不要完全参照.</div>
			</div>
	</div>
</div>
</body>
</html>