<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=gbk">
<title>PostgreSQL research</title>
<style type="text/css">
.blogcnt{line-height:160%;font-size:14px;text-align:left;word-wrap:break-word;}
.blogcnt *{line-height:160%;}
.blogcnt p{margin:0 0 10px;}
.blogcnt ul,.nbw-blog ol{margin:5px 0 5px 40px;padding:0}
.blogcnt em{font-style:italic;}
.blogcnt blockquote{font-size:1em;margin:auto 0 auto 35px;}
.blogcnt img{border:0;max-width:100%;}
</style>
</head>
<body style="color:#444444;">
<h1 id="blog-Title"><a href="index.html">PostgreSQL research</a></h1>
<div id="" style="padding:0 20px;">
	<h2 id="">Ruby Study 3 : String and Range class</h2>
	<h5 id="">2012-02-28 17:11:51&nbsp;&nbsp;&nbsp;<a href="http://blog.163.com/digoal@126/blog/static/163877040201212824953537/" target="_blank">查看原文&gt;&gt;</a></h5>
	<div class="" id="" style="padding:0 20px;">
		<div class="blogcnt" style="width:800px;"><div><span style="line-height: 25px; color: rgb(51, 51, 51); font-family: Arial, Helvetica, simsun, u5b8bu4f53;"  >1. Normal String Delimiter ( ' and " )</span></div><div><span style="line-height: 25px; color: rgb(51, 51, 51); font-family: Arial, Helvetica, simsun, u5b8bu4f53;"  >前面两篇已经接触了很多String的例子, 下面再举一个, 注意看单引号和双引号的区别 :&nbsp;</span></div><div><pre class="prettyprint"  ><p></p><div><font size="2"  >s1 = 'Hello'</font></div><div><font size="2"  >s2 = 'World'</font></div><div><font size="2"  >s3 = '#{s1} #{s2}'</font></div><div><font size="2"  >s4 = "#{s1} #{s2}"</font></div><div><font size="2"  >puts(s3)</font></div><div><font size="2"  >puts(s4)</font></div><p></p></pre></div><div><span style="line-height: 25px; color: rgb(51, 51, 51); font-family: Arial, Helvetica, simsun, u5b8bu4f53;"  >执行结果 :&nbsp;</span></div><div><pre class="prettyprint"  ><p></p><div><font size="2"  >#{s1} #{s2}</font></div><div><font size="2"  >Hello World</font></div><p></p></pre></div><div><span style="line-height: 25px; color: rgb(51, 51, 51); font-family: Arial, Helvetica, simsun, u5b8bu4f53;"  ><br></span></div><div><span style="line-height: 25px; color: rgb(51, 51, 51); font-family: Arial, Helvetica, simsun, u5b8bu4f53;"  >2. User Defined String Delimiter</span></div><div><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  ><span style="line-height: 25px;"  >当String中有单引号或双引号比较多时, 需要很多转义. 那么有没有更简洁的输入方法呢 :&nbsp;</span></font></div><div><pre class="prettyprint"  ><p></p><div><font size="2"  >s1 = 'I\'m Digoal'</font></div><div><font size="2"  >s2 = "This is a double quota\""</font></div><div><font size="2"  ><br></font></div><div><font size="2"  >puts(s1)</font></div><div><font size="2"  >puts(s2)</font></div><p></p></pre></div><div><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  ><span style="line-height: 25px;"  >执行结果 :&nbsp;</span></font></div><div><pre class="prettyprint"  ><p></p><div><font size="2"  >I'm Digoal</font></div><div><font size="2"  >This is a double quota"</font></div><p></p></pre></div><div><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  ><span style="line-height: 25px;"  >单引号 : 使用%q// , 非数字字母的符合替代/. (如%q{}, %q!!, 等)</span></font></div><div><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  ><span style="line-height: 25px;"  >双引号 :&nbsp;</span></font><span style="color: rgb(51, 51, 51); font-family: Arial, Helvetica, simsun, u5b8bu4f53; line-height: 25px;"  >使用%Q// , 非数字字母的符合替代/.&nbsp;</span><span style="color: rgb(51, 51, 51); font-family: Arial, Helvetica, simsun, u5b8bu4f53; line-height: 25px;"  >(如%Q{}, %Q!!, 等)</span></div><div><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  style="line-height: 22px;"  ><span style="line-height: 25px;"  >双引号 :&nbsp;</span></font><span style="line-height: 25px; color: rgb(51, 51, 51); font-family: Arial, Helvetica, simsun, u5b8bu4f53;"  >使用%// , 非数字字母的符合替代/.&nbsp;</span><span style="line-height: 25px; color: rgb(51, 51, 51); font-family: Arial, Helvetica, simsun, u5b8bu4f53;"  >(如%{}, %!!, 等)</span> </div><div><pre class="prettyprint"  ><p></p><div><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  size="2"  >s1 = 'I\'m Digoal'</font></div><div><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  size="2"  >s2 = "This is a double quota\""</font></div><div><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  size="2"  >s3 = %q/I'm Digoal/</font></div><div><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  size="2"  >s4 = %Q(This is a double quota")</font></div><div><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  size="2"  >s5 = %q{#{s3} #{s4}}</font></div><div><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  size="2"  >s6 = %Q{#{s3} #{s4}}</font></div><div><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  size="2"  >s7 = %*#{s3} #{s4}*</font></div><div><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  size="2"  >puts(s1)</font></div><div><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  size="2"  >puts(s2)</font></div><div><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  size="2"  >puts(s3)</font></div><div><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  size="2"  >puts(s4)</font></div><div><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  size="2"  >puts(s5)</font></div><div><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  size="2"  >puts(s6)</font></div><div><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  size="2"  >puts(s7)</font></div><p></p></pre></div><div><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  ><span style="line-height: 25px;"  >执行结果 :&nbsp;</span></font></div><div><pre class="prettyprint"  ><p></p><div><font size="2"  >I'm Digoal</font></div><div><font size="2"  >This is a double quota"</font></div><div><font size="2"  >I'm Digoal</font></div><div><font size="2"  >This is a double quota"</font></div><div><font size="2"  >#{s3} #{s4}</font></div><div><font size="2"  >I'm Digoal This is a double quota"</font></div><div><font size="2"  >I'm Digoal This is a double quota"</font></div><p></p></pre></div><div><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  ><span style="line-height: 25px;"  ><br></span></font></div><div><span style="line-height: 25px; color: rgb(51, 51, 51); font-family: Arial, Helvetica, simsun, u5b8bu4f53;"  >3. Backquotes (execute OS command)</span></div><div><span style="line-height: 25px; color: rgb(51, 51, 51); font-family: Arial, Helvetica, simsun, u5b8bu4f53;"  >在Ruby中执行操作系统命令有点类似SHELL脚本, 用反引号.</span></div><div><pre class="prettyprint"  ><p></p><div><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  size="2"  >#!/opt/ruby/bin/ruby<br>print("Please enter dir name, then i can list it:")<br>dir = gets().chomp<br>ls = `ls -la #{dir}`<br>puts(ls)</font></div><p></p></pre></div><div><span style="line-height: 25px; color: rgb(51, 51, 51); font-family: Arial, Helvetica, simsun, u5b8bu4f53;"  >输入 / 后,&nbsp;</span><span style="color: rgb(51, 51, 51); font-family: Arial, Helvetica, simsun, u5b8bu4f53; line-height: 25px;"  >执行结果 :&nbsp;</span></div><div><pre class="prettyprint"  ><p></p><div><font size="2"  >total 204</font></div><div><font size="2"  >drwxr-xr-x &nbsp;29 root &nbsp; &nbsp; root &nbsp; &nbsp; &nbsp;4096 Feb &nbsp;8 17:35 .</font></div><div><font size="2"  >drwxr-xr-x &nbsp;29 root &nbsp; &nbsp; root &nbsp; &nbsp; &nbsp;4096 Feb &nbsp;8 17:35 ..</font></div><div><font size="2"  >-rw-r--r-- &nbsp; 1 root &nbsp; &nbsp; root &nbsp; &nbsp; &nbsp; &nbsp; 0 Dec 27 14:30 .autofsck</font></div><div><font size="2"  >-rw-r--r-- &nbsp; 1 root &nbsp; &nbsp; root &nbsp; &nbsp; &nbsp; &nbsp; 0 Oct 21 11:05 .autorelabel</font></div><div><font size="2"  >drwxr-xr-x &nbsp; 2 root &nbsp; &nbsp; root &nbsp; &nbsp; &nbsp;4096 Feb &nbsp;8 17:07 bin</font></div><div><font size="2"  >drwxr-xr-x &nbsp; 3 root &nbsp; &nbsp; root &nbsp; &nbsp; &nbsp;4096 Oct 21 10:49 boot</font></div><div><font size="2"  >drwxr-xr-x &nbsp;14 root &nbsp; &nbsp; root &nbsp; &nbsp; &nbsp;4120 Dec 27 14:30 dev</font></div><div><font size="2"  >drwxr-xr-x &nbsp;97 root &nbsp; &nbsp; root &nbsp; &nbsp; 12288 Feb 25 04:02 etc</font></div><div><font size="2"  >drwxr-xr-x &nbsp; 5 postgres postgres &nbsp;4096 Dec 26 14:58 hds1</font></div><div><font size="2"  >drwxr-xr-x &nbsp; 4 postgres postgres &nbsp;4096 Dec 26 14:58 hds2</font></div><div><font size="2"  >drwxr-xr-x &nbsp; 7 root &nbsp; &nbsp; root &nbsp; &nbsp; &nbsp;4096 Feb &nbsp;8 16:42 home</font></div><div><font size="2"  >drwxr-xr-x &nbsp;11 root &nbsp; &nbsp; root &nbsp; &nbsp; &nbsp;4096 Oct 21 12:29 lib</font></div><div><font size="2"  >drwxr-xr-x &nbsp; 9 root &nbsp; &nbsp; root &nbsp; &nbsp; 12288 Oct 21 12:28 lib64</font></div><div><font size="2"  >drwx------ &nbsp; 2 root &nbsp; &nbsp; root &nbsp; &nbsp; 16384 Oct 21 18:44 lost+found</font></div><div><font size="2"  >drwxr-xr-x &nbsp; 2 root &nbsp; &nbsp; root &nbsp; &nbsp; &nbsp;4096 May 11 &nbsp;2011 media</font></div><div><font size="2"  >drwxr-xr-x &nbsp; 2 root &nbsp; &nbsp; root &nbsp; &nbsp; &nbsp; &nbsp; 0 Dec 27 14:30 misc</font></div><div><font size="2"  >drwxr-xr-x &nbsp; 2 root &nbsp; &nbsp; root &nbsp; &nbsp; &nbsp;4096 May 11 &nbsp;2011 mnt</font></div><div><font size="2"  >drwxr-xr-x &nbsp; 2 root &nbsp; &nbsp; root &nbsp; &nbsp; &nbsp; &nbsp; 0 Dec 27 14:30 net</font></div><div><font size="2"  >drwxr-xr-x &nbsp;11 root &nbsp; &nbsp; root &nbsp; &nbsp; &nbsp;4096 Feb 15 10:00 opt</font></div><div><font size="2"  >drwxr-xr-x &nbsp; 3 postgres postgres &nbsp;4096 Oct 21 11:08 pgdata</font></div><div><font size="2"  >drwx------ &nbsp;14 pg92 &nbsp; &nbsp; pg92 &nbsp; &nbsp; &nbsp;4096 Feb 24 14:22 pgdata1919</font></div><div><font size="2"  >drwxr-xr-x &nbsp; 3 pgxc &nbsp; &nbsp; pgxc &nbsp; &nbsp; &nbsp;4096 Feb &nbsp;8 17:35 pgxc_gtm</font></div><div><font size="2"  >dr-xr-xr-x 223 root &nbsp; &nbsp; root &nbsp; &nbsp; &nbsp; &nbsp; 0 Dec 27 22:29 proc</font></div><div><font size="2"  >drwxr-x--- &nbsp; 9 root &nbsp; &nbsp; root &nbsp; &nbsp; &nbsp;4096 Feb 24 15:58 root</font></div><div><font size="2"  >drwxr-xr-x &nbsp; 2 root &nbsp; &nbsp; root &nbsp; &nbsp; 12288 Oct 21 12:29 sbin</font></div><div><font size="2"  >drwxr-xr-x &nbsp; 2 root &nbsp; &nbsp; root &nbsp; &nbsp; &nbsp;4096 Oct 21 10:45 selinux</font></div><div><font size="2"  >drwxr-xr-x &nbsp; 2 root &nbsp; &nbsp; root &nbsp; &nbsp; &nbsp;4096 May 11 &nbsp;2011 srv</font></div><div><font size="2"  >drwxr-xr-x &nbsp;11 root &nbsp; &nbsp; root &nbsp; &nbsp; &nbsp; &nbsp; 0 Dec 27 22:29 sys</font></div><div><font size="2"  >drwxrwxrwt &nbsp; 5 root &nbsp; &nbsp; root &nbsp; &nbsp; &nbsp;4096 Feb 28 09:01 tmp</font></div><div><font size="2"  >drwxr-xr-x &nbsp;15 root &nbsp; &nbsp; root &nbsp; &nbsp; &nbsp;4096 Oct 21 10:46 usr</font></div><div><font size="2"  >drwxr-xr-x &nbsp;24 root &nbsp; &nbsp; root &nbsp; &nbsp; &nbsp;4096 Oct 21 16:40 var</font></div><p></p></pre></div><div><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  ><span style="line-height: 25px;"  >与前面的自定义String delimiter一样, 反引号可以用%x//来替代.</span></font></div><div><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  ><span style="line-height: 25px;"  ><div><pre class="prettyprint"  ><p></p><div><font size="2"  >#!/opt/ruby/bin/ruby</font></div><div><font size="2"  >print("Please enter dir name, then i can list it:")</font></div><div><font size="2"  >dir = gets().chomp</font></div><div><font size="2"  >ls = %x/ls -la #{dir}/  # 或者使用%x{}等.</font></div><div><font size="2"  >puts(ls)</font></div><p></p></pre></div><div><br></div></span></font></div><div><span style="line-height: 25px; color: rgb(51, 51, 51); font-family: Arial, Helvetica, simsun, u5b8bu4f53;"  >4. String Concatenation</span></div><div><span style="line-height: 25px; color: rgb(51, 51, 51); font-family: Arial, Helvetica, simsun, u5b8bu4f53;"  >String的连接操作, 有些是会改变操作符左边的字符的, 有些不会改. 我们来看个例子 :&nbsp;</span></div><div><span style="line-height: 25px; color: rgb(51, 51, 51); font-family: Arial, Helvetica, simsun, u5b8bu4f53;"  >( &lt;&lt;, +, 空格 )</span></div><div><pre class="prettyprint"  ><p></p><div><font size="2"  >s1 = "Hello"</font></div><div><font size="2"  >s2 = s1 &lt;&lt; " World" # &lt;&lt; 方法将改变s1的值.</font></div><div><font size="2"  >puts(s1)</font></div><div><font size="2"  >puts(s2)</font></div><div><font size="2"  >s3 = "Digoal"</font></div><div><font size="2"  >s4 = s3 + " Zhou" </font><span style="font-size: small; line-height: 19px;"  ># + 方法不会改变s3的值.</span></div><div><font size="2"  >puts(s3)</font></div><div><font size="2"  >puts(s4)</font></div><div><font size="2"  >s5 = "Digoal" " Zhou"  # 空格只能用于两个单引号和双引号包围的字符串的连接</font></div><div><font size="2"  >#s7 = %Q{Digoal} %Q{ Zhou}  #不允许, 异常<br>#s8 = 'Digoal' s3   #不允许, 异常<br>#s9 = s3 ' Zhou'   #不允许, 异常</font></div><div><font size="2"  >puts(s5)</font></div><p></p></pre></div><div><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  ><span style="line-height: 25px;"  >执行结果 :&nbsp;</span></font></div><div><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  ><div><pre class="prettyprint"  ><p></p><div><font size="2"  >Hello World</font></div><div><font size="2"  >Hello World</font></div><div><font size="2"  >Digoal</font></div><div><font size="2"  >Digoal Zhou</font></div><div><font size="2"  >Digoal Zhou</font></div><p></p></pre></div><div style="line-height: 25px;"  >另外还有一个需要注意的是, integer如果出现在这些连接方法的右边, 会显示什么 ?&nbsp;</div><div style="line-height: 25px;"  >&lt;&lt; 中, 0-255会字段转换成ASCII码对应的字符.</div><div style="line-height: 25px;"  >+ 则必须使用to_s方法转换成String. 否则报错. 并且输出的是数字本身. 当然在&lt;&lt;中如果使用to_s也是显示数字本身.</div><div><pre class="prettyprint"  ><p></p><div><font size="2"  >s1 = "This " &lt;&lt; "is" &lt;&lt; " a string " &lt;&lt; 36 # char 36 is '$'</font></div><div><font size="2"  >s2 = "This " &nbsp;+ "is" + " a string " &nbsp;+ 36.to_s</font></div><div><font size="2"  >s3 = "This " &nbsp;"is" &nbsp;" a string " &nbsp;+ 36.to_s</font></div><div><font size="2"  >puts("(s1):" &lt;&lt; s1)</font></div><div><font size="2"  >puts("(s2):" &lt;&lt; s2)</font></div><div><font size="2"  >puts("(s3):" &lt;&lt; s3)</font></div><p></p></pre></div><div>执行结果 :&nbsp;</div><div><pre class="prettyprint"  ><p></p><div><font size="2"  >(s1):This is a string $</font></div><div><font size="2"  >(s2):This is a string 36</font></div><div><font size="2"  >(s3):This is a string 36</font></div><p></p></pre></div><div><br></div></font></div><div><span style="line-height: 25px; color: rgb(51, 51, 51); font-family: Arial, Helvetica, simsun, u5b8bu4f53;"  >5. Comma Used with String (return Array)</span></div><div><span style="line-height: 25px; color: rgb(51, 51, 51); font-family: Arial, Helvetica, simsun, u5b8bu4f53;"  >注意使用&lt;&lt;, + , 空格返回的都是什么类型呢 ?&nbsp;</span></div><div><div style="color: rgb(51, 51, 51); font-family: Arial, Helvetica, simsun, u5b8bu4f53;"  ><pre class="prettyprint"  ><p></p><div><font size="2"  >s1 = "Hello " &lt;&lt; "World"</font></div><div><font size="2"  >s2 = "Digoal " + "Zhou"</font></div><div><font size="2"  >s3 = "A" "DBA"</font></div><div><font size="2"  >puts(s1.class)</font></div><div><font size="2"  >puts(s2.class)</font></div><div><font size="2"  >puts(s3.class)</font></div><p></p></pre></div><div style="color: rgb(51, 51, 51); font-family: Arial, Helvetica, simsun, u5b8bu4f53; line-height: 25px;"  >执行结果 :&nbsp;</div><div><pre class="prettyprint"  ><p></p><div><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  size="2"  >String</font></div><div><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  size="2"  >String</font></div><div><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  size="2"  >String</font></div><p></p></pre></div></div><div><span style="line-height: 25px; color: rgb(51, 51, 51); font-family: Arial, Helvetica, simsun, u5b8bu4f53;"  >那么接下来看看使用逗号连接会返回什么类型 :&nbsp;</span></div><div><pre class="prettyprint"  ><p></p><div><font size="2"  >s1 = "Hello " , "World"</font></div><div><font size="2"  >puts(s1.class)</font></div><p></p></pre></div><div><span style="line-height: 25px; color: rgb(51, 51, 51); font-family: Arial, Helvetica, simsun, u5b8bu4f53;"  >执行结果 :&nbsp;</span></div><div><pre class="prettyprint"  ><p><font size="2"  >Array  # 返回的是Array类型, 可不是String哦.</font></p></pre></div><div><span style="line-height: 25px; color: rgb(51, 51, 51); font-family: Arial, Helvetica, simsun, u5b8bu4f53;"  ><br></span></div><div><span style="line-height: 25px; color: rgb(51, 51, 51); font-family: Arial, Helvetica, simsun, u5b8bu4f53;"  >6. String Assignment</span></div><div><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  ><span style="line-height: 25px;"  >从上一个例子我们知道&lt;&lt;会修改左边字符串, 而+不会修改它左边的字符串.</span></font></div><div><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  ><span style="line-height: 25px;"  >那么看看还有哪些方法会修改左边字符串的值, (一般以!结尾的方法是会修改左边字符串的值的)</span></font></div><div><pre class="prettyprint"  ><p></p><div><font size="2"  >s = "hello world"</font></div><div><font size="2"  >print( "1) s='#{s}' and s.object_id=#{s.object_id}\n" )</font></div><div><font size="2"  >s = s + "!" &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# this creates a new string object</font></div><div><font size="2"  >print( "2) s='#{s}' and s.object_id=#{s.object_id}\n" )</font></div><div><font size="2"  >s = s.capitalize &nbsp; &nbsp; &nbsp;# this creates a new string object</font></div><div><font size="2"  >print( "3) s='#{s}' and s.object_id=#{s.object_id}\n" )</font></div><div><font size="2"  >s.capitalize! &nbsp; &nbsp; &nbsp;# but this modifies the original string object</font></div><div><font size="2"  >print( "4) s='#{s}' and s.object_id=#{s.object_id}\n" )</font></div><div><font size="2"  >s[1] = 'A' &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# this also modifies the original string object</font></div><div><font size="2"  >print( "5) s='#{s}' and s.object_id=#{s.object_id}\n" )</font></div><div><font size="2"  >s &lt;&lt; ' Digoal' &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# this also modifies the original string object</font></div><div><font size="2"  >print( "6) s='#{s}' and s.object_id=#{s.object_id}\n" )</font></div><p></p></pre></div><div><span style="line-height: 25px; color: rgb(51, 51, 51); font-family: Arial, Helvetica, simsun, u5b8bu4f53;"  >执行结果 :&nbsp;</span></div><div><pre class="prettyprint"  ><p></p><div><font size="2"  >1) s='hello world' and s.object_id=15923760 # 给String的对象赋值(不管这个值是否与原来的值相等)会改变object_id</font></div><div><font size="2"  >2) s='hello world!' and s.object_id=15923664 </font></div><div><font size="2"  >3) s='Hello world!' and s.object_id=15923592 # 以下几个操作之后, object_id都没有变化, 但是s的值已经被修改了.</font></div><div><font size="2"  >4) s='Hello world!' and s.object_id=15923592</font></div><div><font size="2"  >5) s='HAllo world!' and s.object_id=15923592</font></div><div><font size="2"  >6) s='HAllo world! Digoal' and s.object_id=15923592</font></div><p></p></pre></div><div><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  ><span style="line-height: 25px;"  >给Fixnum和String的对象赋值。看看object_id会不会发送改变 :&nbsp;</span></font></div><div><pre class="prettyprint"  ><div><font size="2"  >i1 = 10</font></div><div><font size="2"  >s1 = "Digoal"</font></div><div><font size="2"  >puts(i1.class)</font></div><div><font size="2"  >puts(i1.object_id)</font></div><div><font size="2"  >puts(s1.class)</font></div><div><font size="2"  >puts(s1.object_id)</font></div><div><font size="2"  ># 以变量的形式赋值给新的变量, 看看新变量的object_id, 等于前者的OBJECT_ID</font></div><div><font size="2"  >i2 = i1</font></div><div><font size="2"  >s2 = s1</font></div><div><font size="2"  >puts(i2.object_id)</font></div><div><font size="2"  >puts(s2.object_id)</font></div><div><font size="2"  ># 使用相同的值赋值给新的变量, String新变量的object_id与前者不同. 但是Fixnum类的对象的object_id相同.</font></div><div><font size="2"  >i3 = 10</font></div><div><font size="2"  >s3 = "Digoal"</font></div><div><font size="2"  >puts(i3.object_id)</font></div><div><font size="2"  >puts(s3.object_id)</font></div><div><font size="2"  ># 使用相同的值覆盖相同的变量, 看看object_id会不会变化, String类的对象的object_id会变化, Fixnum类的对象只要值一样, OBJECT_ID都一样.</font></div><div><font size="2"  >i3 = 10<br>s3 = "Digoal"<br>puts(i3.object_id)<br>puts(s3.object_id)</font></div><p></p></pre></div><div><span style="line-height: 25px; color: rgb(51, 51, 51); font-family: Arial, Helvetica, simsun, u5b8bu4f53;"  >执行结果 :&nbsp;</span></div><div><pre class="prettyprint"  ><p></p><div><font size="2"  >Fixnum</font></div><div><font size="2"  >21</font></div><div><font size="2"  >String</font></div><div><font size="2"  >16221864</font></div><div><font size="2"  >21</font></div><div><font size="2"  >16221864</font></div><div><font size="2"  >21</font></div><div><font size="2"  >16221600</font></div><div><font size="2"  >21</font></div><div><font size="2"  >16221516</font></div><p></p></pre></div><div><span style="line-height: 25px; color: rgb(51, 51, 51); font-family: Arial, Helvetica, simsun, u5b8bu4f53;"  >7. Indexing into a String</span></div><div><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  ><span style="line-height: 25px;"  >一个字符串, 其中的每个字符都有一个标记, 从0开始. 来看个例子 :&nbsp;</span></font></div><div><pre class="prettyprint"  ><p></p><div><font size="2"  >s = "Hello"</font></div><div><font size="2"  >length = s.length</font></div><div><font size="2"  >(0...length).each {  # 三个点的Range类不包含最大值.</font></div><div><font size="2"  >&nbsp; |x|</font></div><div><font size="2"  >&nbsp; puts(s[x])</font></div><div><font size="2"  >}</font></div><p></p></pre></div><div><span style="line-height: 25px; color: rgb(51, 51, 51); font-family: Arial, Helvetica, simsun, u5b8bu4f53;"  >执行结果 :&nbsp;</span></div><div><pre class="prettyprint"  ><p></p><div><font size="2"  >H</font></div><div><font size="2"  >e</font></div><div><font size="2"  >l</font></div><div><font size="2"  >l</font></div><div><font size="2"  >o</font></div><p></p></pre></div><div><span style="line-height: 25px; color: rgb(51, 51, 51); font-family: Arial, Helvetica, simsun, u5b8bu4f53;"  >注意1.8中用s[x]输出的是字符的ASCII值, 1.9输出的是字符本身. 如果要在1.9中输出ASCII怎么办呢, 用ord方法.</span></div><div><div style="color: rgb(51, 51, 51); font-family: Arial, Helvetica, simsun, u5b8bu4f53;"  ><pre class="prettyprint"  ><p></p><div><font size="2"  >s = "Hello"</font></div><div><font size="2"  >puts(s[0])</font></div><div><font size="2"  >puts(s[0].ord)</font></div><p></p></pre></div><div style="color: rgb(51, 51, 51); font-family: Arial, Helvetica, simsun, u5b8bu4f53; line-height: 25px;"  >执行结果 :&nbsp;</div><div><pre class="prettyprint"  ><p></p><div><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  size="2"  >H</font></div><div><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  size="2"  >72</font></div><p></p></pre></div></div><div><span style="line-height: 25px; color: rgb(51, 51, 51); font-family: Arial, Helvetica, simsun, u5b8bu4f53;"  >还有一个玩法 :&nbsp;</span></div><div><div><pre class="prettyprint"  ><p style="color: rgb(51, 51, 51); font-family: Arial, Helvetica, simsun, u5b8bu4f53;"  ></p><div style="color: rgb(51, 51, 51); font-family: Arial, Helvetica, simsun, u5b8bu4f53; line-height: 25px;"  ><font size="2"  >s = "Hello , I'm Digoal"</font></div><div style="color: rgb(51, 51, 51); font-family: Arial, Helvetica, simsun, u5b8bu4f53; line-height: 25px;"  ><font size="2"  >puts(s[0,4])   # 从0开始, 输出4个字符.</font></div><div style="color: rgb(51, 51, 51); font-family: Arial, Helvetica, simsun, u5b8bu4f53; line-height: 25px;"  ><font size="2"  >puts(s[-6,6])   # 从倒数第6个开始, 输出6个字符.</font></div><div><font color="#333333"  size="2"  ><span style="line-height: 19px;"  >puts(s[(1...4)]) # 从1到4, 不包括4.<br>puts(s[(1..4)])  # 从1到4, 包括4</span></font></div><div><font color="#333333"  size="2"  ><span style="line-height: 19px;"  >puts(s[(-6..-1)])  # 从-6到-1. 包括-6和-1</span></font></div><p style="color: rgb(51, 51, 51); font-family: Arial, Helvetica, simsun, u5b8bu4f53;"  ></p></pre></div><div style="color: rgb(51, 51, 51); font-family: Arial, Helvetica, simsun, u5b8bu4f53; line-height: 25px;"  >执行结果 :&nbsp;</div><div><pre class="prettyprint"  ><p style="color: rgb(51, 51, 51); font-family: Arial, Helvetica, simsun, u5b8bu4f53;"  ></p><div style="color: rgb(51, 51, 51); font-family: Arial, Helvetica, simsun, u5b8bu4f53;"  ><font size="2"  >Hell</font></div><div style="color: rgb(51, 51, 51); font-family: Arial, Helvetica, simsun, u5b8bu4f53;"  ><font size="2"  >Digoal</font></div><div><font color="#333333"  size="2"  ><span style="line-height: 19px;"  >ell<br>ello</span></font></div><div><font color="#333333"  size="2"  >Digoal</font></div><p style="color: rgb(51, 51, 51); font-family: Arial, Helvetica, simsun, u5b8bu4f53;"  ></p></pre></div></div><div><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  >接下来列举一些String类的方法 :&nbsp;</font></div><div><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  >当然你可以使用String.methods打印出来看看到底有多少方法, 然后到API里面去学习它们的用法 :&nbsp;</font></div><div><pre class="prettyprint"  ><p></p><div><font size="2"  >s = "Hello , I'm Digoal"</font></div><div><font size="2"  >puts(s.length)</font></div><div><font size="2"  >puts(s.reverse!)</font></div><div><font size="2"  >puts(s.reverse)</font></div><div><font size="2"  >puts(s.upcase)</font></div><div><font size="2"  >puts(s.capitalize)</font></div><div><font size="2"  >puts(s.swapcase)</font></div><div><font size="2"  >puts(s.downcase)</font></div><div><font size="2"  >puts(s.insert(7,"NOT "))  # 注意这里的7是从0开始的哦,不是从1开始的. 是在index 7 之前插入的意思.</font></div><div><font size="2"  >puts(s.squeeze)</font></div><div><font size="2"  >puts(s.split)</font></div><p></p></pre></div><div><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  >输出结果 :&nbsp;</font></div><div><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  ><div><pre class="prettyprint"  ><p></p><div><font size="2"  >18</font></div><div><font size="2"  >laogiD m'I , olleH</font></div><div><font size="2"  >Hello , I'm Digoal</font></div><div><font size="2"  >LAOGID M'I , OLLEH</font></div><div><font size="2"  >Laogid m'i , olleh</font></div><div><font size="2"  >LAOGId M'i , OLLEh</font></div><div><font size="2"  >laogid m'i , olleh</font></div><div><font size="2"  >laogiD NOT m'I , olleH</font></div><div><font size="2"  >laogiD NOT m'I , oleH</font></div><div><font size="2"  >laogiD</font></div><div><font size="2"  >NOT</font></div><div><font size="2"  >m'I</font></div><div><font size="2"  >,</font></div><div><font size="2"  >olleH</font></div><p></p></pre></div><div><br></div></font></div><div><span style="line-height: 25px; color: rgb(51, 51, 51); font-family: Arial, Helvetica, simsun, u5b8bu4f53;"  >8. chomp(safer) and chop</span></div><div><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  ><span style="line-height: 25px;"  >先介绍一个$/ , 默认是\n. ASCII码=10. 这个字符串可以修改, 用于gets()时, 表示$/以后的字符不接收. $/本身接收 .</span></font></div><div><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  ><span style="line-height: 25px;"  >用在chomp()方法, 在末尾时可以去除这个字符串.</span></font></div><div><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  ><div><pre class="prettyprint"  ><p></p><div><font size="2"  >puts($/.class)</font></div><div><font size="2"  >puts($/.ord)</font></div><p></p></pre></div><div style="line-height: 25px;"  >执行结果 :&nbsp;</div><div><pre class="prettyprint"  ><p></p><div><font size="2"  >String</font></div><div><font size="2"  >10</font></div><p></p></pre></div></font></div><div><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  ><span style="line-height: 25px;"  >chomp用于去除字符串末尾的\n, \r 或 \r\n. &nbsp;或者$/, \n$/, \r$/, \r\n$/</span></font></div><div><pre class="prettyprint"  ><p></p><div><font size="2"  >$/ = "ok"</font></div><div><font size="2"  >puts("let's go0ok".chomp())</font></div><div><font size="2"  >puts("let's go1\r\nok".chomp())</font></div><div><font size="2"  >puts("let's go2\nok".chomp())</font></div><div><font size="2"  >puts("let's go3\rok".chomp())</font></div><div><font size="2"  >puts("let's go4\r".chomp())</font></div><div><font size="2"  >puts("let's go5\n".chomp())</font></div><div><font size="2"  >puts("let's go6\r\n".chomp())</font></div><div><font size="2"  ># 以下则不能全部去除</font></div><div><font size="2"  >puts("let's go7\n\r".chomp())</font></div><div><font size="2"  >puts("let's go8ok\n".chomp())</font></div><div><font size="2"  >puts("let's go9ok\r\n".chomp())</font></div><p></p></pre></div><div><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  ><span style="line-height: 25px;"  >执行结果 :&nbsp;</span></font></div><div><pre class="prettyprint"  ><p></p><div><font size="2"  >let's go0</font></div><div><font size="2"  >let's go1</font></div><div><font size="2"  >let's go2</font></div><div><font size="2"  >let's go3</font></div><div><font size="2"  >let's go4</font></div><div><font size="2"  >let's go5</font></div><div><font size="2"  >let's go6</font></div><div><font size="2"  >let's go7</font></div><div><font size="2"  ><br></font></div><div><font size="2"  >let's go8ok</font></div><div><font size="2"  >let's go9ok</font></div><p></p></pre></div><div><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  ><span style="line-height: 25px;"  >chop则是用于去除最后一个字符的, 不管是什么字符.</span></font></div><div><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  ><div style="line-height: 25px;"  ><pre class="prettyprint"  ><p></p><div><font size="2"  >$/ = "ok"</font></div><div><font size="2"  >puts("let's go0ok".chop())</font></div><p></p></pre></div><div style="line-height: 25px;"  >执行结果 :</div><div><pre class="prettyprint"  ><p><font size="2"  >let's go0o</font></p></pre></div><div>再举一个gets()的例子 :&nbsp;</div><div><pre class="prettyprint"  ><p></p><div><font size="2"  >#!/opt/ruby/bin/ruby</font></div><div><font size="2"  >$/ = "ok"</font></div><div><font size="2"  >s = gets()</font></div><div><font size="2"  >puts(s)</font></div><p></p></pre></div><div>输入 :&nbsp;</div><div><div>jfjjsj</div><div>nioooo &nbsp;few ok ffewww good ok回车, # 第一个ok就表示记录结束了.</div></div><div>执行结果 :&nbsp;</div><div><pre class="prettyprint"  ><p></p><div><font size="2"  >jfjjsj</font></div><div><font size="2"  >nioooo &nbsp;few ok</font></div><p></p></pre></div><div><br></div></font></div><div><span style="line-height: 25px; color: rgb(51, 51, 51); font-family: Arial, Helvetica, simsun, u5b8bu4f53;"  >9. Format Strings ( printf )</span></div><div><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  ><span style="line-height: 25px;"  >printf()方法的格式化输出 :&nbsp;</span></font></div><div><pre class="prettyprint"  ><p></p><div>%d C decimal number</div><div>%f C floating-point number</div><div>%o C octal number</div><div>%p C inspect object</div><div>%s C string</div><div>%x C hexadecimal number</div><p></p></pre></div><div><pre class="prettyprint"  ><p></p><div><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  size="2"  >printf( "%f\n", 10.12945 )</font></div><div><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  size="2"  >printf( "%0.2f\n", 10.12945 )</font></div><div><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  size="2"  >printf("d=%d f=%f o=%o x=%x s=%s\n", 10, 10, 10, 10, 10)</font></div><div><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  size="2"  >printf("0.04f=%0.04f : 0.02f=%0.02f\n", 10.12945, 10.12945)</font></div><div><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  size="2"  >class Myclass</font></div><div><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  size="2"  >&nbsp; def initialize(a,b)</font></div><div><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  size="2"  >&nbsp; &nbsp; @x = a</font></div><div><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  size="2"  >&nbsp; &nbsp; @y = b</font></div><div><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  size="2"  >&nbsp; end</font></div><div><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  size="2"  >&nbsp; attr_accessor( :x, :y )</font></div><div><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  size="2"  >end</font></div><div><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  size="2"  ><br></font></div><div><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  size="2"  >ob1 = Myclass.new('digoal','zhou')</font></div><div><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  size="2"  >printf("inspect ob1: %p.\n",ob1)</font></div><p></p></pre></div><div><span style="line-height: 25px; color: rgb(51, 51, 51); font-family: Arial, Helvetica, simsun, u5b8bu4f53;"  >执行结果 :&nbsp;</span></div><div><span style="color: rgb(51, 51, 51); font-family: Arial, Helvetica, simsun, u5b8bu4f53;"  ><div><pre class="prettyprint"  ><p></p><div><font size="2"  >10.129450</font></div><div><font size="2"  >10.13</font></div><div><font size="2"  >d=10 f=10.000000 o=12 x=a s=10</font></div><div><font size="2"  >0.04f=10.1295 : 0.02f=10.13</font></div><div><font size="2"  >inspect ob1: #&lt;Myclass:0x1fb0960 @x="digoal", @y="zhou"&gt;.</font></div><p></p></pre></div><div style="line-height: 25px;"  ><br></div></span></div><div style="color: rgb(51, 51, 51); font-family: Arial, Helvetica, simsun, u5b8bu4f53; line-height: 25px;"  ><span style="line-height: 25px; color: rgb(51, 51, 51); font-family: Arial, Helvetica, simsun, u5b8bu4f53;"  >10. Range</span></div><div style="color: rgb(51, 51, 51); font-family: Arial, Helvetica, simsun, u5b8bu4f53; line-height: 25px;"  ><span style="line-height: 25px; color: rgb(51, 51, 51); font-family: Arial, Helvetica, simsun, u5b8bu4f53;"  >Range在Ruby中非常有意思, 在PostgreSQL 中用generate_series函数可以产生一连串的数字, 时间等.</span></div><div style="color: rgb(51, 51, 51); font-family: Arial, Helvetica, simsun, u5b8bu4f53; line-height: 25px;"  ><span style="line-height: 25px; color: rgb(51, 51, 51); font-family: Arial, Helvetica, simsun, u5b8bu4f53;"  >在Ruby中用Range可以产生一串数字, 字符串, 浮点数等.</span></div><div style="color: rgb(51, 51, 51); font-family: Arial, Helvetica, simsun, u5b8bu4f53; line-height: 25px;"  ><pre class="prettyprint"  ><p></p><div><font size="2"  >r1 = (1..10)  # 两个点表示包含最大和最小值</font></div><div><font size="2"  >puts( r1.class )</font></div><div><font size="2"  >puts( r1 )</font></div><div><font size="2"  >puts( r1.count )</font></div><div><font size="2"  >r2 = (1...10)  # 三个点表示不包含最大值</font></div><div><font size="2"  >puts( r2.class )</font></div><div><font size="2"  >puts( r2 )</font></div><div><font size="2"  >puts( r2.count )</font></div><p></p></pre></div><div style="color: rgb(51, 51, 51); font-family: Arial, Helvetica, simsun, u5b8bu4f53; line-height: 25px;"  ><span style="line-height: 25px; color: rgb(51, 51, 51); font-family: Arial, Helvetica, simsun, u5b8bu4f53;"  >执行结果 :&nbsp;</span></div><div><div style="color: rgb(51, 51, 51); font-family: Arial, Helvetica, simsun, u5b8bu4f53;"  ><pre class="prettyprint"  ><p></p><div><font size="2"  >Range</font></div><div><font size="2"  >1..10</font></div><div><font size="2"  >10</font></div><div><font size="2"  >Range</font></div><div><font size="2"  >1...10</font></div><div><font size="2"  >9</font></div><p></p></pre></div><div style="color: rgb(51, 51, 51); font-family: Arial, Helvetica, simsun, u5b8bu4f53; line-height: 25px;"  >把Range对象转换成Array对象 : (注意浮点型的Range对象不可以转换成Array对象, 会报错, 因为可能包含无穷数)</div><div><pre class="prettyprint"  ><p></p><div><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  size="2"  >r1 = (1..10)</font></div><div><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  size="2"  >r2 = ('abc'..'def')</font></div><div><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  size="2"  >a1 = r1.to_a  # to_a方法用于将Range对象转换成Array对象.</font></div><div><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  size="2"  >a2 = r2.to_a</font></div><div><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  size="2"  >puts(a1.class)</font></div><div><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  size="2"  >puts(a2.class)</font></div><div><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  size="2"  >puts(a1)</font></div><p></p></pre></div><div>执行结果 :&nbsp;</div><div><p></p><div><pre class="prettyprint"  ><p></p><div><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  size="2"  >Array</font></div><div><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  size="2"  >Array</font></div><div><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  size="2"  >1</font></div><div><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  size="2"  >2</font></div><div><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  size="2"  >3</font></div><div><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  size="2"  >4</font></div><div><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  size="2"  >5</font></div><div><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  size="2"  >6</font></div><div><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  size="2"  >7</font></div><div><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  size="2"  >8</font></div><div><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  size="2"  >9</font></div><div><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  size="2"  >10</font></div><p></p></pre></div><p></p></div></div><div><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  ><br></font></div><div style="color: rgb(51, 51, 51); font-family: Arial, Helvetica, simsun, u5b8bu4f53; line-height: 25px;"  ><span style="line-height: 25px; color: rgb(51, 51, 51); font-family: Arial, Helvetica, simsun, u5b8bu4f53;"  >11. Iterating with a Range</span></div><div style="color: rgb(51, 51, 51); font-family: Arial, Helvetica, simsun, u5b8bu4f53; line-height: 25px;"  ><span style="line-height: 25px; color: rgb(51, 51, 51); font-family: Arial, Helvetica, simsun, u5b8bu4f53;"  >其实Range和Array, Hash类型都有Iterate操作的. 来看个例子 :&nbsp;</span></div><div><pre class="prettyprint"  ><p></p><div><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  size="2"  >r1 = ('a'..'z')</font></div><div><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  size="2"  >r1.each {  # 一个块,块非对象</font></div><div><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  size="2"  >&nbsp; |x|  # 这是一个BLOCK内的变量.</font></div><div><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  size="2"  >&nbsp; print(x)</font></div><div><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  size="2"  >}</font></div><p></p></pre></div><div style="color: rgb(51, 51, 51); font-family: Arial, Helvetica, simsun, u5b8bu4f53; line-height: 25px;"  ><span style="line-height: 25px; color: rgb(51, 51, 51); font-family: Arial, Helvetica, simsun, u5b8bu4f53;"  >执行结果 :&nbsp;</span></div><div><pre class="prettyprint"  ><p>abcdefghijklmnopqrstuvwxyz</p></pre></div><div style="color: rgb(51, 51, 51); font-family: Arial, Helvetica, simsun, u5b8bu4f53; line-height: 25px;"  ><span style="line-height: 25px; color: rgb(51, 51, 51); font-family: Arial, Helvetica, simsun, u5b8bu4f53;"  >12. Multi-line Strings ( &lt;&lt;EODOC )</span></div><div style="color: rgb(51, 51, 51); font-family: Arial, Helvetica, simsun, u5b8bu4f53; line-height: 25px;"  >多行字符串, 其实有点类似SHELL的玩法 :&nbsp;</div><div><pre class="prettyprint"  ><p></p><div><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  size="2"  >s1 = &lt;&lt;EODOC  # 也可以写成&lt;&lt;'EODOC' , 则表示内部的字符串是用单引号包围的. </font></div><div><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  size="2"  >The first line.</font></div><div><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  size="2"  >The second line.</font></div><div><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  size="2"  >The third line.</font></div><div><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  size="2"  >... and so on</font></div><div><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  size="2"  >EODOC  # EODOC必须在行首, 如果要不放行首, 可以在前面定义&lt;&lt;EODOC时改用&lt;&lt;-EODOC. 或者&lt;&lt;-'EODOC'</font></div><div><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  size="2"  ><br></font></div><div><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  size="2"  >puts(s1)</font></div><p></p></pre></div><div style="color: rgb(51, 51, 51); font-family: Arial, Helvetica, simsun, u5b8bu4f53; line-height: 25px;"  ><span style="line-height: 25px; color: rgb(51, 51, 51); font-family: Arial, Helvetica, simsun, u5b8bu4f53;"  >执行结果 :&nbsp;</span></div><div><pre class="prettyprint"  ><p></p><div><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  size="2"  >The first line.</font></div><div><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  size="2"  >The second line.</font></div><div><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  size="2"  >The third line.</font></div><div><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  size="2"  >... and so on</font></div><p></p></pre></div><div style="color: rgb(51, 51, 51); font-family: Arial, Helvetica, simsun, u5b8bu4f53; line-height: 25px;"  ><span style="line-height: 25px; color: rgb(51, 51, 51); font-family: Arial, Helvetica, simsun, u5b8bu4f53;"  >当然也可以不叫EODOC, 例如&lt;&lt;EOF也行, 结束时使用EOF.</span></div><div style="color: rgb(51, 51, 51); font-family: Arial, Helvetica, simsun, u5b8bu4f53; line-height: 25px;"  ><span style="line-height: 25px; color: rgb(51, 51, 51); font-family: Arial, Helvetica, simsun, u5b8bu4f53;"  ><br></span></div><div style="color: rgb(51, 51, 51); font-family: Arial, Helvetica, simsun, u5b8bu4f53; line-height: 25px;"  ><span style="line-height: 25px; color: rgb(51, 51, 51); font-family: Arial, Helvetica, simsun, u5b8bu4f53;"  >13. String Literals</span></div><div style="color: rgb(51, 51, 51); font-family: Arial, Helvetica, simsun, u5b8bu4f53; line-height: 25px;"  ><span style="line-height: 25px; color: rgb(51, 51, 51); font-family: Arial, Helvetica, simsun, u5b8bu4f53;"  >这个玩法也和有意思, 和前面我们已经用到的%x//, %q//, %Q// 相似, 还有一些其他的玩法. 列举如下 :&nbsp;</span></div><div><pre class="prettyprint"  ><p></p><div><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  size="2"  >%q/    /    # single-quoted<br>%Q/    /    # double-quoted<br>%/     /    # double-quoted<br>%w/    /    # array<br>%W/    /    # array double-quoted<br>%r|    |    # regular expression<br>%s/    /    # symbol<br>%x/    /    # operating system command<br><br>p %q/dog cat #{1+2}/        #=&gt; "dog cat \#{1+2}"<br>p %Q/dog cat #{1+2}/        #=&gt; "dog cat 3"<br>p %/dog cat #{1+2}/        #=&gt; "dog cat 3"<br>p %w/dog cat #{1+2}/        #=&gt; ["dog", "cat", "\#{1+2}"]<br>p %W/dog cat #{1+2}/        #=&gt; ["dog", "cat", "3"]<br>p %r|^[a-z]*$|            #=&gt; /^[a-z]*$/<br>p %s/dog/                #=&gt; :dog<br>p %x/vol/                #=&gt; " Volume in drive C is OS [etc...]"</font></div><p></p></pre></div><div style="color: rgb(51, 51, 51); font-family: Arial, Helvetica, simsun, u5b8bu4f53; line-height: 25px;"  ><br></div><span style="color: rgb(51, 51, 51); font-family: Arial, Helvetica, simsun, u5b8bu4f53; line-height: 25px;"  >【参考】</span><div style="line-height: 25px; color: rgb(51, 51, 51); font-family: Arial, Helvetica, simsun, u5b8bu4f53;"  >The Book Of Ruby</div><div style="line-height: 25px; color: rgb(51, 51, 51); font-family: Arial, Helvetica, simsun, u5b8bu4f53;"  >Ruby 1.9.3 API</div><wbr></div>
	</div>
</div>
</body>
</html>