<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=gbk">
<title>PostgreSQL research</title>
<style type="text/css">
.blogcnt{line-height:160%;font-size:14px;text-align:left;word-wrap:break-word;}
.blogcnt *{line-height:160%;}
.blogcnt p{margin:0 0 10px;}
.blogcnt ul,.nbw-blog ol{margin:5px 0 5px 40px;padding:0}
.blogcnt em{font-style:italic;}
.blogcnt blockquote{font-size:1em;margin:auto 0 auto 35px;}
.blogcnt img{border:0;max-width:100%;}
</style>
</head>
<body style="color:#444444;">
<h1 id="blog-Title"><a href="index.html">PostgreSQL research</a></h1>
<div id="" style="padding:0 20px;">
	<h2 id="">EnterpriseDB (EDB) Postgres Plus Advanced Server (ppas) features not in PostgreSQL 1 - install ppas in linux use text mode</h2>
	<h5 id="">2014-06-03 8:56:43&nbsp;&nbsp;&nbsp;<a href="http://blog.163.com/digoal@126/blog/static/16387704020145374410210/" target="_blank">查看原文&gt;&gt;</a></h5>
	<div class="" id="" style="padding:0 20px;">
		<div class="blogcnt" style="width:800px;"><div>EDB公司是PostgreSQL开源社区的主要贡献者之一, 它的ppas版本有一些特性目前在PG里并没有, 例如icache, partition table syntax, sql hint, edb*wrap, edb*loader, debugger, index advisor, oracle 兼容性(包括SQL,函数语法, 包等),&nbsp;&nbsp;Dynamic Runtime Instrumentation Tools Architecture (DRITA), 审计日志.</div><div>这里面大多数的特性PostgreSQL都可以找到替代产品, 例如 :&nbsp;</div><div>icache可以用pgmemcached来实现.</div><div><a target="_blank" href="http://blog.163.com/digoal@126/blog/static/163877040201210172341257"   >http://blog.163.com/digoal@126/blog/static/163877040201210172341257</a></div><div>partition table语法PG里面没有, 但是可以通过触发器, 或规则来实现.</div><div><a target="_blank" href="http://blog.163.com/digoal@126/blog/static/163877040201341353342245/"   >http://blog.163.com/digoal@126/blog/static/163877040201341353342245/</a></div><div><a target="_blank" href="http://blog.163.com/digoal@126/blog/static/16387704020128772037884/"   >http://blog.163.com/digoal@126/blog/static/16387704020128772037884/</a></div><div><a target="_blank" href="http://blog.163.com/digoal@126/blog/static/1638770402012325111528424/"   >http://blog.163.com/digoal@126/blog/static/1638770402012325111528424/</a></div><div>sql hint可以通过postgresql 的一些开关来实现, 例如enable_seqscan, enable_indexscan等. (个人认为在成本因子和统计信息比较精准的情况下并不需要sql hint. 除非costsize.c中的算法有问题.)</div><div><a target="_blank" href="http://blog.163.com/digoal@126/blog/static/16387704020123183115240"   >http://blog.163.com/digoal@126/blog/static/16387704020123183115240</a></div><div>edb*wrap是可以将函数内容加密的插件, 目前PG没有这样的功能, 需要的话可以自己开发一个插件.&nbsp;</div><div>edb*loader是一个文本导入工具, 可以用pgbulkloader替代</div><div><a target="_blank" href="http://blog.163.com/digoal@126/blog/static/163877040201422883734398"   >http://blog.163.com/digoal@126/blog/static/163877040201422883734398</a></div><div><span style="line-height: 28px;"   >debugger是一个过程语言调试插件, 可以到git.postgresql.org下载到源码安装.</span></div><div><span style="line-height: 28px;"   >index advisor, 是一个索引建议插件, 例如一个SQL语句运行比较慢的话, 会提示在什么列上建立索引. 这个功能对初学者或非职业DBA比较适用.</span></div><div><span style="line-height: 28px;"   >oracle 兼容性(包括SQL,函数语法, 包等), 目前PG没有这块的功能.</span></div><div><span style="line-height: 28px;"   >Dynamic Runtime Instrumentation Tools Architecture (DRITA), 类似oracle的statspack, 可以使用pg_statsinfo插件来替代.</span></div><div><span style="line-height: 28px;"   >审计日志, 这个有插件可以实现, 如果不想加插件的话个人认为对log再细化一下就好了. 例如dml, all, none, 最好能再细化一下. (需要定制代码)</span></div><div><a target="_blank" href="http://blog.163.com/digoal@126/blog/static/1638770402012019112218804/"   >http://blog.163.com/digoal@126/blog/static/1638770402012019112218804/</a></div><div><a target="_blank" href="http://blog.163.com/digoal@126/blog/static/163877040201421702248430/"   >http://blog.163.com/digoal@126/blog/static/163877040201421702248430/</a></div><div><br></div><div>综上一些特性, EDB比较适合不缺钱, 需要有ORACLE兼容性, 并且需要有EDB商业支持的企业使用.</div><div>潘,发烧友,开源控还是使用PostgreSQL吧, 毕竟是开源的, 而且现在国家也在提倡开源, 消除隐患.</div><div><br></div><div>本文先讲一下EDB ppas在命令行下的安装, 下次再来测试它(ppas)的功能.</div><div>环境</div><div>CentOS 6.5 x64</div><div><br></div><div>首先要注册一个EDB的账号, 安装和下载软件时都需要用到这个账号.</div><div>下载</div><pre class="prettyprint"   ><p></p><div><font size="2"   >wget&nbsp;http://get.enterprisedb.com/ga/ppasmeta-9.3.1.3-linux-x64.tar.gz</font></div><div></div><p></p></pre><div><span style="line-height: 28px;"   >解压</span></div><pre class="prettyprint"   ><p></p><div><font size="2"   >tar -zxvf&nbsp;<span style="line-height: 28px;"   >ppasmeta-9.3.1.3-linux-x64.tar.gz</span></font></div><div></div><p></p></pre><div><span style="line-height: 28px;"   >阅读README</span></div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >Installing Postgres Plus Advanced Server at the Command Line</font></div><div><font size="2"   >------------------------------------------------------------</font></div><div><font size="2"   >You must have superuser privileges to install Postgres Plus Advanced Server. &nbsp;</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >Use the "--mode text" option to start the installation script. &nbsp;Navigate to the</font></div><div><font size="2"   >directory containing the installer, and enter the command:</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >&nbsp; &nbsp; # ./ppasmeta-9.3x-linux-x64.run --mode text</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >&nbsp; &nbsp; Where x specifies installer version information. &nbsp;</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >Follow the script to complete the command line installation.</font></div><p></p></pre></div><div><span style="line-height: 28px;"   >安装, 如果没有postgres用户, 会自动创建一个.</span></div><div><pre class="prettyprint"   ><p></p><div><div><font size="2"   >[root@db-172-16-3-150 soft_bak]# cd ppasmeta-9.3.1.3-linux-x64</font></div><div><font size="2"   >[root@db-172-16-3-150 ppasmeta-9.3.1.3-linux-x64]# ll</font></div><div><font size="2"   >total 151212</font></div><div><font size="2"   >-rwxr-xr-x 1 pg931 pg931 154825778 Nov &nbsp;5 &nbsp;2013 ppasmeta-9.3.1.3-linux-x64.run</font></div><div><font size="2"   >-rw-r--r-- 1 pg931 pg931 &nbsp; &nbsp; &nbsp;9468 Nov &nbsp;5 &nbsp;2013 README_FIRST_Linux64.txt</font></div></div><div><font size="2"   ><br></font></div><div><div><font size="2"   >[root@db-172-16-3-150 ppasmeta-9.3.1.3-linux-x64]# ./ppasmeta-9.3.1.3-linux-x64.run --mode text</font></div><div><font size="2"   >Language Selection</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >Please select the installation language</font></div><div><font size="2"   >[1] English - English</font></div><div><font size="2"   >[2] Japanese - 日本Z</font></div><div><font size="2"   >[3] Simplified Chinese - 简体中文</font></div><div><font size="2"   >[4] Traditional Chinese - 繁体中文</font></div><div><font size="2"   >[5] Korean - ???</font></div><div><font size="2"   >Please choose an option [1] :&nbsp;</font></div><div><font size="2"   >----------------------------------------------------------------------------</font></div><div><font size="2"   >Welcome to the Postgres Plus Advanced Server Setup Wizard.</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >----------------------------------------------------------------------------</font></div><div><font size="2"   >Please read the following License Agreement. You must accept the terms of this&nbsp;</font></div><div><font size="2"   >agreement before continuing with the installation.</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >Press [Enter] to continue :</font></div><div><font size="2"   >Limited Use Software License Agreement</font></div><div><font size="2"   >Version 2.8</font></div></div><div><font size="2"   >...略</font></div><div><div><font size="2"   >Press [Enter] to continue :</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >Do you accept this license? [y/n]: y</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >----------------------------------------------------------------------------</font></div><div><font size="2"   >User Authentication</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >This installation requires a registration with EnterpriseDB.com. Please enter&nbsp;</font></div><div><font size="2"   >your credentials below. If you do not have an account, Please create one now on&nbsp;</font></div><div><font size="2"   >https://www.enterprisedb.com/user-login-registration</font></div><div><font size="2"   ><br></font></div><div><font size="2"   ><br></font></div><div><font size="2"   ><br></font></div><div><font size="2"   >Email []: digoal@126.com</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >Password :</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >----------------------------------------------------------------------------</font></div><div><font size="2"   >Please specify the directory where Postgres Plus Advanced Server will be&nbsp;</font></div><div><font size="2"   >installed.</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >Installation Directory [/opt/PostgresPlus/9.3AS]:&nbsp;</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >----------------------------------------------------------------------------</font></div><div><font size="2"   >Select the components you want to install.</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >Database Server [Y/n] :</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >Connectors [Y/n] :</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >Infinite Cache [Y/n] :</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >Migration Toolkit [Y/n] :</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >Postgres Enterprise Manager Client [Y/n] :</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >pgpool-II [Y/n] :</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >EDB*Plus [Y/n] :</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >Slony Replication [Y/n] :</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >PgBouncer [Y/n] :</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >Is the selection above correct? [Y/n]:&nbsp;</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >----------------------------------------------------------------------------</font></div><div><font size="2"   >Additional Directories</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >Please select a directory under which to store your data.</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >Data Directory [/opt/PostgresPlus/9.3AS/data]: /ssd4/PostgresPlus/9.3AS/data</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >Please select a directory under which to store your Write-Ahead Logs.</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >Write-Ahead Log (WAL) Directory [/opt/PostgresPlus/9.3AS/data/pg_xlog]: /ssd4/PostgresPlus/9.3AS/data/pg_xlog</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >----------------------------------------------------------------------------</font></div><div><font size="2"   >Configuration Mode</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >Postgres Plus Advanced Server always installs with Oracle(R) compatibility features and maintains full PostgreSQL compliance. Select your style preference for installation defaults and samples.</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >The Oracle configuration will cause the use of certain objects &nbsp;(e.g. DATE data types, string operations, etc.) to produce Oracle compatible results, create the same Oracle sample tables, and have the database match Oracle examples used in the documentation.</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >Configuration Mode</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >[1] Oracle Compatible</font></div><div><font size="2"   >[2] PostgreSQL Compatible</font></div><div><font size="2"   >Please choose an option [1] : 2</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >----------------------------------------------------------------------------</font></div><div><font size="2"   >Please provide a password for the database superuser (postgres). A locked Unix&nbsp;</font></div><div><font size="2"   >user account (postgres) will be created if not present.</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >Password :</font></div><div><font size="2"   >Retype Password :</font></div><div><font size="2"   >----------------------------------------------------------------------------</font></div><div><font size="2"   >Additional Configuration</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >Please select the port number the server should listen on.</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >Port [5433]: 1818</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >Select the locale to be used by the new database cluster.</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >Locale</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >[1] [Default locale]</font></div><div><font size="2"   >[2] aa_DJ</font></div><div><font size="2"   >[3] aa_DJ.iso88591</font></div><div><font size="2"   >[4] aa_DJ.utf8</font></div><div><font size="2"   >[5] aa_ER</font></div><div><font size="2"   >[6] aa_ER@saaho</font></div><div><font size="2"   >[7] aa_ER.utf8</font></div><div><font size="2"   >[8] aa_ER.utf8@saaho</font></div></div><div><font size="2"   >... 略</font></div><div><font size="2"   >[111] C</font></div><div><font size="2"   >... 略</font></div><div><div><font size="2"   >[222] en_US</font></div><div><font size="2"   >[223] en_US.iso88591</font></div><div><font size="2"   >[224] en_US.iso885915</font></div><div><font size="2"   >[225] en_US.utf8</font></div></div><div><font size="2"   >... 略</font></div><div><div><font size="2"   >[707] zh_CN</font></div><div><font size="2"   >[708] zh_CN.gb2312</font></div><div><font size="2"   >[709] zh_CN.utf8</font></div><div><font size="2"   >[710] zh_HK.utf8</font></div></div><div><font size="2"   >...略</font></div><div><div><font size="2"   >Please choose an option [1] : 111</font></div><div><font size="2"   ><br></font></div><div><font size="2"   ><br></font></div><div><font size="2"   ><br></font></div><div><font size="2"   >Install sample tables and procedures. [Y/n]:&nbsp;</font></div><div><font size="2"   ><br></font></div><div><font size="2"   ><br></font></div><div><font size="2"   >----------------------------------------------------------------------------</font></div><div><font size="2"   >Dynatune Dynamic Tuning:</font></div><div><font size="2"   >Server Utilization</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >Please select the type of server to determine the amount of system resources&nbsp;</font></div><div><font size="2"   >that may be utilized:</font></div><div><font size="2"   ><br></font></div><div><font size="2"   ><br></font></div><div><font size="2"   ><br></font></div><div><font size="2"   >[1] Development (e.g. a developer's laptop)</font></div><div><font size="2"   >[2] General Purpose (e.g. a web or application server)</font></div><div><font size="2"   >[3] Dedicated (a server running only Postgres Plus)</font></div><div><font size="2"   >Please choose an option [2] : 3</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >----------------------------------------------------------------------------</font></div><div><font size="2"   >Dynatune Dynamic Tuning:</font></div><div><font size="2"   >Workload Profile</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >Please select the type of workload this server will be used for:</font></div><div><font size="2"   ><br></font></div><div><font size="2"   ><br></font></div><div><font size="2"   ><br></font></div><div><font size="2"   >[1] Transaction Processing (OLTP systems)</font></div><div><font size="2"   >[2] General Purpose (OLTP and reporting workloads)</font></div><div><font size="2"   >[3] Reporting (Complex queries or OLAP workloads)</font></div><div><font size="2"   >Please choose an option [1] : 2</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >----------------------------------------------------------------------------</font></div><div><font size="2"   >Advanced Configuration</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >----------------------------------------------------------------------------</font></div><div><font size="2"   >PgBouncer Listening Port [6432]: 1819</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >----------------------------------------------------------------------------</font></div><div><font size="2"   >Service Configuration</font></div><div><font size="2"   ><br></font></div><div><font size="2"   ><br></font></div><div><font size="2"   ><br></font></div><div><font size="2"   >Autostart PgBouncer Service [Y/n]:&nbsp;</font></div><div><font size="2"   ><br></font></div><div><font size="2"   ><br></font></div><div><font size="2"   ><br></font></div><div><font size="2"   ><br></font></div><div><font size="2"   >Autostart pgAgent Service [Y/n]:&nbsp;</font></div><div><font size="2"   ><br></font></div><div><font size="2"   ><br></font></div><div><font size="2"   ><br></font></div><div><font size="2"   ><br></font></div><div><font size="2"   >Update Notification Service [Y/n]:&nbsp;</font></div><div><font size="2"   ><br></font></div><div><font size="2"   ><br></font></div><div><font size="2"   >The Update Notification Service informs, downloads and installs whenever&nbsp;</font></div><div><font size="2"   >security patches and other updates are available for your Postgres Plus Advanced&nbsp;</font></div><div><font size="2"   >Server installation.</font></div><div><font size="2"   ><br></font></div><div><font size="2"   ><br></font></div><div><font size="2"   ><br></font></div><div><font size="2"   >----------------------------------------------------------------------------</font></div><div><font size="2"   >Pre Installation Summary</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >Following settings will be used for installation:</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >Installation Directory: /opt/PostgresPlus/9.3AS</font></div><div><font size="2"   >Data Directory: /ssd4/PostgresPlus/9.3AS/data</font></div><div><font size="2"   >WAL Directory: /ssd4/PostgresPlus/9.3AS/data/pg_xlog</font></div><div><font size="2"   >Database Port: 1818</font></div><div><font size="2"   >Database Superuser: postgres</font></div><div><font size="2"   >Operating System Account: postgres</font></div><div><font size="2"   >Database Service: ppas-9.3</font></div><div><font size="2"   >PgBouncer Listening Port: 1819</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >Press [Enter] to continue :</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >----------------------------------------------------------------------------</font></div><div><font size="2"   >Setup is now ready to begin installing Postgres Plus Advanced Server on your&nbsp;</font></div><div><font size="2"   >computer.</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >Do you want to continue? [Y/n]:&nbsp;</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >----------------------------------------------------------------------------</font></div><div><font size="2"   >Please wait while Setup installs Postgres Plus Advanced Server on your computer.</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >&nbsp;Installing Postgres Plus Advanced Server</font></div><div><font size="2"   >&nbsp;0% ______________ 50% ______________ 100%</font></div><div><font size="2"   >&nbsp;#########################################</font></div><div><font size="2"   ><br></font></div><div><font size="2"   ><br></font></div><div><font size="2"   >&nbsp;Installing Database Server ...</font></div><div><font size="2"   >&nbsp;Installing pgAgent ...</font></div><div><font size="2"   >&nbsp;Installing Connectors ...</font></div><div><font size="2"   >&nbsp;Installing Migration Toolkit ...</font></div><div><font size="2"   >&nbsp;Installing EDB*Plus ...</font></div><div><font size="2"   >&nbsp;Installing Infinite Cache ...</font></div><div><font size="2"   >&nbsp;Installing Postgres Enterprise Manager Client ...</font></div><div><font size="2"   >&nbsp;Installing Slony Replication ...</font></div><div><font size="2"   >&nbsp;Installing pgpool-II ...</font></div><div><font size="2"   >&nbsp;Installing PgBouncer ...</font></div><div><font size="2"   >&nbsp;Installing StackBuilder Plus ...</font></div><div><font size="2"   >&nbsp;----------------------------------------------------------------------------</font></div><div><font size="2"   >Setup has finished installing Postgres Plus Advanced Server on your computer.</font></div></div><p></p></pre></div><div>安装完毕后, 会多出几个服务</div><div><pre class="prettyprint"   ><p></p><div><div><font size="2"   >[root@db-172-16-3-150 ppasmeta-9.3.1.3-linux-x64]# cd /etc/init.d</font></div><div><font size="2"   >[root@db-172-16-3-150 init.d]# ll -rt</font></div></div><div><div><font size="2"   >-rwxr-xr-x &nbsp;1 root root &nbsp; &nbsp; 2999 Jun &nbsp;3 07:34 ppas-9.3</font></div><div><font size="2"   >-rwxr-xr-x &nbsp;1 root root &nbsp; &nbsp; 2331 Jun &nbsp;3 07:34 ppas-agent-9.3</font></div><div><font size="2"   >-rwxr-xr-x &nbsp;1 root root &nbsp; &nbsp; 1684 Jun &nbsp;3 07:35 ppas-infinitecache-9.3</font></div><div><font size="2"   >-rwxr-xr-x &nbsp;1 root root &nbsp; &nbsp; 2667 Jun &nbsp;3 07:35 ppas-replication-9.3</font></div><div><font size="2"   >-rwxr-xr-x &nbsp;1 root root &nbsp; &nbsp; 2676 Jun &nbsp;3 07:35 ppas-pgpool-9.3</font></div><div><font size="2"   >-rwxr-xr-x &nbsp;1 root root &nbsp; &nbsp; 2260 Jun &nbsp;3 07:35 pgbouncer-9.3</font></div></div><div><font size="2"   >[root@db-172-16-3-150 ppasmeta-9.3.1.3-linux-x64]# chkconfig</font></div><div><div><font size="2"   >ppas-9.3 &nbsp; &nbsp; &nbsp; &nbsp;0:off &nbsp; 1:off &nbsp; 2:on &nbsp; &nbsp;3:on &nbsp; &nbsp;4:on &nbsp; &nbsp;5:on &nbsp; &nbsp;6:off</font></div><div><font size="2"   >ppas-agent-9.3 &nbsp;0:off &nbsp; 1:off &nbsp; 2:on &nbsp; &nbsp;3:on &nbsp; &nbsp;4:on &nbsp; &nbsp;5:on &nbsp; &nbsp;6:off</font></div><div><font size="2"   >ppas-infinitecache-9.3 &nbsp;0:off &nbsp; 1:off &nbsp; 2:off &nbsp; 3:off &nbsp; 4:off &nbsp; 5:off &nbsp; 6:off</font></div><div><font size="2"   >ppas-pgpool-9.3 0:off &nbsp; 1:off &nbsp; 2:off &nbsp; 3:off &nbsp; 4:off &nbsp; 5:off &nbsp; 6:off</font></div><div><font size="2"   >ppas-replication-9.3 &nbsp; &nbsp;0:off &nbsp; 1:off &nbsp; 2:off &nbsp; 3:off &nbsp; 4:off &nbsp; 5:off &nbsp; 6:off</font></div></div><div><font size="2"   >pgbouncer-9.3 &nbsp; 0:off &nbsp; 1:off &nbsp; 2:on &nbsp; &nbsp;3:on &nbsp; &nbsp;4:on &nbsp; &nbsp;5:on &nbsp; &nbsp;6:off</font></div><p></p></pre></div><div>有些服务是自动开启的, 有些没有自动开启.</div><div>如果你要了解这些服务的启动脚本, 可以去查看<span style="line-height: 28px;"   >/etc/init.d下面对应脚本的内容,</span></div><div><span style="line-height: 28px;"   >自动创建的postgres用户</span></div><div><pre class="prettyprint"   ><p></p><div><font size="2"   ><span style="line-height: 28px;"   >cat&nbsp;</span>/etc/passwd</font></div><div><font size="2"   >postgres:x:509:512:Postgres Plus Advanced Server:/opt/PostgresPlus/9.3AS:/bin/bash</font></div><p></p></pre></div><div><span style="line-height: 28px;"   >修改postgres用户bash_profile</span></div><div><pre class="prettyprint"   ><p></p><div><div><font size="2"   >[root@db-172-16-3-150 ~]# vi /opt/PostgresPlus/9.3AS/.bash_profile</font></div></div><div><div><font size="2"   ># .bash_profile</font></div><div><font size="2"   ><br></font></div><div><font size="2"   ># Get the aliases and functions</font></div><div><font size="2"   >if [ -f ~/.bashrc ]; then</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; . ~/.bashrc</font></div><div><font size="2"   >fi</font></div><div><font size="2"   ><br></font></div><div><font size="2"   ># User specific environment and startup programs</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >PATH=$PATH:$HOME/bin</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >export PATH</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >export TERM=xterm</font></div><div><font size="2"   >export PS1="$USER@`/bin/hostname -s`-&gt; "</font></div><div><font size="2"   >export PGPORT=1818</font></div><div><font size="2"   >export PGDATA=/ssd4/PostgresPlus/9.3AS/data</font></div><div><font size="2"   >export LANG=en_US.utf8</font></div><div><font size="2"   >export PGHOME=/opt/PostgresPlus/9.3AS</font></div><div><font size="2"   >export LD_LIBRARY_PATH=$PGHOME/lib:/lib64:/usr/lib64:/usr/local/lib64:/lib:/usr/lib:/usr/local/lib:$LD_LIBRARY_PATH</font></div><div><font size="2"   >export DATE=`date +"%Y%m%d%H%M"`</font></div><div><font size="2"   >export PATH=$PGHOME/bin:$PATH:.</font></div><div><font size="2"   >export MANPATH=$PGHOME/share/man:$MANPATH</font></div><div><font size="2"   >export PGUSER=postgres</font></div><div><font size="2"   >export PGHOST=$PGDATA</font></div><div><font size="2"   >export PGDATABASE=digoal</font></div><div><font size="2"   >alias rm='rm -i'</font></div><div><font size="2"   >alias ll='ls -lh'</font></div></div><p></p></pre></div><div><span style="line-height: 28px;"   >修改PGHOME目录权限</span></div><pre class="prettyprint"   ><p></p><div><font size="2"   ># chown -R postgres:postgres /opt/PostgresPlus/9.3AS</font></div><div></div><p></p></pre><div><span style="line-height: 28px;"   >安装ncurses-term</span></div><div><pre class="prettyprint"   ><p><font size="2"   >yum install -y ncurses-term</font></p></pre></div><div><span style="line-height: 28px;"   >修改postgresql.conf, pg_hba.conf</span></div><div><pre class="prettyprint"   ><p></p><div><span style="line-height: 28px;"   ><font size="2"   >su - postgres</font></span></div><div><span style="line-height: 28px;"   ><font size="2"   >cd $PGDATA</font></span></div><p></p></pre></div><div><span style="line-height: 28px;"   >vi pg_hba.conf</span></div><pre class="prettyprint"   ><p></p><div><font size="2"   >local &nbsp; all &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; all &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; trust</font></div><div></div><p></p></pre><div><span style="line-height: 28px;"   >vi postgresql.conf</span></div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >listen_addresses = '0.0.0.0' &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# what IP address(es) to listen on;</font></div><div><font size="2"   >port = 1818 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # (change requires restart)</font></div><div><font size="2"   >max_connections = 100 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # (change requires restart)</font></div><div><font size="2"   >superuser_reserved_connections = 13 &nbsp; &nbsp; # (change requires restart)</font></div><div><font size="2"   >unix_socket_directories = '.' &nbsp; # comma-separated list of directories</font></div><div><font size="2"   >unix_socket_permissions = 0700 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# begin with 0 to use octal notation</font></div><div><font size="2"   >tcp_keepalives_idle = 60 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# TCP_KEEPIDLE, in seconds;</font></div><div><font size="2"   >tcp_keepalives_interval = 10 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# TCP_KEEPINTVL, in seconds;</font></div><div><font size="2"   >tcp_keepalives_count = 10 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # TCP_KEEPCNT;</font></div><div><font size="2"   >shared_buffers = 4096MB &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # min 128kB</font></div><div><font size="2"   >maintenance_work_mem = 512MB &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# min 1MB</font></div><div><font size="2"   >shared_preload_libraries = '$libdir/dbms_pipe,$libdir/edb_gen'</font></div><div><font size="2"   >vacuum_cost_delay = 10 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# 0-100 milliseconds</font></div><div><font size="2"   >vacuum_cost_limit = 10000 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # 1-10000 credits</font></div><div><font size="2"   >bgwriter_delay = 10ms &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # 10-10000ms between rounds</font></div><div><font size="2"   >wal_level = hot_standby &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # minimal, archive, or hot_standby</font></div><div><font size="2"   >synchronous_commit = off &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# synchronization level;</font></div><div><font size="2"   >wal_buffers = 16384kB &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # min 32kB, -1 sets based on shared_buffers</font></div><div><font size="2"   >wal_writer_delay = 10ms &nbsp; &nbsp; &nbsp; &nbsp; # 1-10000 milliseconds</font></div><div><font size="2"   >checkpoint_segments = 256 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # in logfile segments, min 1, 16MB each</font></div><div><font size="2"   >archive_mode = on &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # allows archiving to be done</font></div><div><font size="2"   >archive_command = '/bin/date' &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # command to use to archive a logfile segment</font></div><div><font size="2"   >max_wal_senders = 32 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# max number of walsender processes</font></div><div><font size="2"   >wal_keep_segments = 512 &nbsp; &nbsp; &nbsp; &nbsp; # in logfile segments, 16MB each; 0 disables</font></div><div><font size="2"   >hot_standby = on &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# "on" allows queries during recovery</font></div><div><font size="2"   >max_standby_archive_delay = 300s &nbsp; &nbsp; &nbsp; &nbsp;# max delay before canceling queries</font></div><div><font size="2"   >max_standby_streaming_delay = 300s &nbsp; &nbsp; &nbsp;# max delay before canceling queries</font></div><div><font size="2"   >wal_receiver_status_interval = 1s &nbsp; &nbsp; &nbsp; # send replies at least this often</font></div><div><font size="2"   >hot_standby_feedback = on &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # send info from standby to prevent</font></div><div><font size="2"   >effective_cache_size = 96000MB</font></div><div><font size="2"   >log_destination = 'csvlog' &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# Valid values are combinations of</font></div><div><font size="2"   >logging_collector = on &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# Enable capturing of stderr and csvlog</font></div><div><font size="2"   >log_directory = 'pg_log' &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# directory where log files are written,</font></div><div><font size="2"   >log_filename = 'enterprisedb-%Y-%m-%d_%H%M%S.log' &nbsp; &nbsp; &nbsp; # log file name pattern,</font></div><div><font size="2"   >log_file_mode = 0600 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# creation mode for log files,</font></div><div><font size="2"   >log_truncate_on_rotation = on &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # If on, an existing log file with the</font></div><div><font size="2"   >log_rotation_age = 1d &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # Automatic rotation of logfiles will</font></div><div><font size="2"   >log_rotation_size = 10MB &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# Automatic rotation of logfiles will</font></div><div><font size="2"   >log_min_duration_statement = 1s # -1 is disabled, 0 logs all statements</font></div><div><font size="2"   >log_checkpoints = on</font></div><div><font size="2"   >log_connections = on</font></div><div><font size="2"   >log_disconnections = on</font></div><div><font size="2"   >log_error_verbosity = verbose &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # terse, default, or verbose messages</font></div><div><font size="2"   >log_lock_waits = on &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # log lock waits &gt;= deadlock_timeout</font></div><div><font size="2"   >log_statement = 'ddl' &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # none, ddl, mod, all</font></div><div><font size="2"   >log_timezone = 'PRC'</font></div><div><font size="2"   >autovacuum = on &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # Enable autovacuum subprocess? &nbsp;'on'</font></div><div><font size="2"   >log_autovacuum_min_duration = 0 # -1 disables, 0 logs all actions and</font></div><div><font size="2"   >datestyle = 'iso, mdy'</font></div><div><font size="2"   >timezone = 'PRC'</font></div><div><font size="2"   >lc_messages = 'C' &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # locale for system error message</font></div><div><font size="2"   >lc_monetary = 'C' &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # locale for monetary formatting</font></div><div><font size="2"   >lc_numeric = 'C' &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# locale for number formatting</font></div><div><font size="2"   >lc_time = 'C' &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # locale for time formatting</font></div><div><font size="2"   >default_text_search_config = 'pg_catalog.english'</font></div><div><font size="2"   >edb_dynatune = 100 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# percentage of server resources</font></div><div><font size="2"   >edb_dynatune_profile = mixed &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# workload profile for tuning.</font></div><div><font size="2"   >timed_statistics = off &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# record wait timings, defaults to on</font></div><p></p></pre></div><div>相比PostgreSQL新增的参数.</div><div><pre class="prettyprint"   ><p></p><div><div><font size="2"   ># - InfiniteCache</font></div><div><font size="2"   >#edb_enable_icache = off</font></div><div><font size="2"   >#edb_icache_servers = '' &nbsp;#'host1:port1,host2,ip3:port3,ip4'</font></div><div><font size="2"   >#edb_icache_compression_level = 6</font></div></div><div><font size="2"   ><br></font></div><div><div><font size="2"   >#---------------------------------------------------------------------------</font></div><div><font size="2"   ># EDB AUDIT</font></div><div><font size="2"   >#---------------------------------------------------------------------------</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >#edb_audit = 'none' &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # none, csv or xml</font></div><div><font size="2"   ><br></font></div><div><font size="2"   ># These are only used if edb_audit is not none:</font></div><div><font size="2"   >#edb_audit_directory = 'edb_audit' &nbsp; &nbsp; &nbsp;# Directory where log files are written</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # Can be absolute or relative to PGDATA</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >#edb_audit_filename = 'audit-%Y-%m-%d_%H%M%S' # Audit file name pattern.</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # Can include strftime() escapes</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >#edb_audit_rotation_day = 'every' &nbsp; &nbsp; &nbsp; # Automatic rotation of logfiles based</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # on day of week. none, every, sun,</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # mon, tue, wed, thu, fri, sat</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >#edb_audit_rotation_size = 0 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# Automatic rotation of logfiles will</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # happen after this many megabytes (MB)</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # of log output. &nbsp;0 to disable.</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >#edb_audit_rotation_seconds = 0 &nbsp; &nbsp; &nbsp; &nbsp; # Automatic log file rotation will</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # happen after this many seconds.</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >#edb_audit_connect = 'failed' &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # none, failed, all</font></div><div><font size="2"   >#edb_audit_disconnect = 'none' &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# none, all</font></div><div><font size="2"   >#edb_audit_statement = 'ddl, error' &nbsp; &nbsp; # none, dml, ddl, select, error, rollback, all</font></div></div><div><font size="2"   ><br></font></div><div><div><font size="2"   >#oracle_home ='' &nbsp; &nbsp; &nbsp; &nbsp;# path to the Oracle home directory;</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # only used by OCI Dblink; defaults</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # to ORACLE_HOME environment variable.</font></div></div><div><font size="2"   ><br></font></div><div><div><font size="2"   ># - Oracle compatibility -</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >#edb_redwood_date = off &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # translate DATE to TIMESTAMP(0)</font></div><div><font size="2"   >#edb_redwood_strings = off &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# treat NULL as an empty string in</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # string concatenation</font></div><div><font size="2"   >#edb_stmt_level_tx = off &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# allow continuing on errors instead</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # rolling back</font></div><div><font size="2"   >#db_dialect = 'postgres' &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# Sets the precedence of built-in</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # namespaces.</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # 'redwood' means sys, dbo, pg_catalog</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # 'postgres' means pg_catalog, sys, dbo</font></div><div><font size="2"   >#optimizer_mode = choose &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# Oracle-style optimizer hints.</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # choose, all_rows, first_rows,</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # first_rows_10, first_rows_100,</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # first_rows_1000</font></div></div><div><font size="2"   ><br></font></div><div><div><font size="2"   >#------------------------------------------------------------------------------</font></div><div><font size="2"   ># CUSTOMIZED OPTIONS</font></div><div><font size="2"   >#------------------------------------------------------------------------------</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >#dbms_pipe.total_message_buffer = 30kB &nbsp;# default: 30KB, max: 256MB, min: 30KB</font></div><div><font size="2"   >#dbms_alert.max_alerts = 100 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# default 100, max: 500, min: 0</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >#---------------------------------------------------------------------------</font></div><div><font size="2"   ># DYNA-TUNE</font></div><div><font size="2"   >#---------------------------------------------------------------------------</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >edb_dynatune = 100 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# percentage of server resources</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # dedicated to database server,</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # defaults to 66</font></div><div><font size="2"   >edb_dynatune_profile = mixed &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# workload profile for tuning.</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # 'oltp', 'reporting' or 'mixed',</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >#---------------------------------------------------------------------------</font></div><div><font size="2"   ># QREPLACE</font></div><div><font size="2"   >#---------------------------------------------------------------------------</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >#qreplace_function = '' &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # function used by Query Replace.</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >#---------------------------------------------------------------------------</font></div><div><font size="2"   ># RUNTIME INSTRUMENTATION AND TRACING</font></div><div><font size="2"   >#---------------------------------------------------------------------------</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >timed_statistics = off &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# record wait timings, defaults to on</font></div></div><p></p></pre></div><div>重启数据库</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >postgres@db-172-16-3-150-&gt; pg_ctl start</font></div><div><font size="2"   >server starting</font></div><div><font size="2"   >LOG: &nbsp;00000:&nbsp;</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; ** EnterpriseDB Dynamic Tuning Agent ********************************************</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; * &nbsp; &nbsp; &nbsp; System Utilization: 100% &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; * &nbsp; &nbsp; &nbsp; &nbsp; Database Version: 9.3.1.3 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; *</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; * Operating System Version: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; *</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; * &nbsp; &nbsp; Number of Processors: 0 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; *</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; * &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Processor Type: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; *</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; * &nbsp; Processor Architecture: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; *</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; * &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Database Size: 0.1 &nbsp; &nbsp;GB &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; *</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; * &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;RAM: 94.5 &nbsp; GB &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; *</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; * &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Shared Memory: 65536 &nbsp;MB &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; *</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; * &nbsp; &nbsp; &nbsp; Max DB Connections: 0 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; *</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; * &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Autovacuum: on &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; * &nbsp; &nbsp; &nbsp; Autovacuum Naptime: 60 &nbsp; Seconds &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; * &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;InfiniteCache: off &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; *</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; * &nbsp; &nbsp;InfiniteCache Servers: 0 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; *</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; * &nbsp; &nbsp; &nbsp; InfiniteCache Size: 0.000 &nbsp;GB &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; *</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; *********************************************************************************</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >LOCATION: &nbsp;_logresults, edb-dynatune.c:422</font></div><div><font size="2"   >postgres@db-172-16-3-150-&gt; LOG: &nbsp;00000: loaded library "$libdir/dbms_pipe"</font></div><div><font size="2"   >LOCATION: &nbsp;load_libraries, miscinit.c:1310</font></div><div><font size="2"   >LOG: &nbsp;00000: loaded library "$libdir/edb_gen"</font></div><div><font size="2"   >LOCATION: &nbsp;load_libraries, miscinit.c:1310</font></div><div><font size="2"   >LOG: &nbsp;00000: redirecting log output to logging collector process</font></div><div><font size="2"   >HINT: &nbsp;Future log output will appear in directory "pg_log".</font></div><div><font size="2"   >LOCATION: &nbsp;SysLogger_Start, syslogger.c:827</font></div><p></p></pre></div><div>因为安装EDB的时候选择了安装DEMO, 所以会新建一些表.</div><div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >postgres@db-172-16-3-150-&gt; psql postgres postgres</font></div><div><font size="2"   >psql.bin (9.3.1.3)</font></div><div><font size="2"   >Type "help" for help.</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >postgres=# \dt</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; List of relations</font></div><div><font size="2"   >&nbsp;Schema | &nbsp;Name &nbsp; | Type &nbsp;| &nbsp;Owner &nbsp;&nbsp;</font></div><div><font size="2"   >--------+---------+-------+----------</font></div><div><font size="2"   >&nbsp;public | dept &nbsp; &nbsp;| table | postgres</font></div><div><font size="2"   >&nbsp;public | emp &nbsp; &nbsp; | table | postgres</font></div><div><font size="2"   >&nbsp;public | jobhist | table | postgres</font></div><div><font size="2"   >(3 rows)</font></div><p></p></pre></div><div>选择了locale=C, encoding使用SQL_ASCII了.</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >postgres=# \l</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;List of databases</font></div><div><font size="2"   >&nbsp; &nbsp;Name &nbsp; &nbsp;| &nbsp;Owner &nbsp; | Encoding &nbsp;| Collate | Ctype | &nbsp; Access privileges &nbsp;&nbsp;</font></div><div><font size="2"   >-----------+----------+-----------+---------+-------+-----------------------</font></div><div><font size="2"   >&nbsp;postgres &nbsp;| postgres | SQL_ASCII | C &nbsp; &nbsp; &nbsp; | C &nbsp; &nbsp; |&nbsp;</font></div><div><font size="2"   >&nbsp;template0 | postgres | SQL_ASCII | C &nbsp; &nbsp; &nbsp; | C &nbsp; &nbsp; | =c/postgres &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;+</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;| &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;| &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; | &nbsp; &nbsp; &nbsp; &nbsp; | &nbsp; &nbsp; &nbsp; | postgres=CTc/postgres</font></div><div><font size="2"   >&nbsp;template1 | postgres | SQL_ASCII | C &nbsp; &nbsp; &nbsp; | C &nbsp; &nbsp; | =c/postgres &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;+</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;| &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;| &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; | &nbsp; &nbsp; &nbsp; &nbsp; | &nbsp; &nbsp; &nbsp; | postgres=CTc/postgres</font></div><div><font size="2"   >(3 rows)</font></div><p></p></pre></div></div><div>如果要使用UTF8 encoding, 需要创建数据库时指定, 最好是新建一个模板.</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >postgres=# create database tmp encoding 'UTF8' template template0;</font></div><div><font size="2"   >CREATE DATABASE</font></div><div><font size="2"   >postgres=# \l</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;List of databases</font></div><div><font size="2"   >&nbsp; &nbsp;Name &nbsp; &nbsp;| &nbsp;Owner &nbsp; | Encoding &nbsp;| Collate | Ctype | &nbsp; Access privileges &nbsp;&nbsp;</font></div><div><font size="2"   >-----------+----------+-----------+---------+-------+-----------------------</font></div><div><font size="2"   >&nbsp;postgres &nbsp;| postgres | SQL_ASCII | C &nbsp; &nbsp; &nbsp; | C &nbsp; &nbsp; |&nbsp;</font></div><div><font size="2"   >&nbsp;template0 | postgres | SQL_ASCII | C &nbsp; &nbsp; &nbsp; | C &nbsp; &nbsp; | =c/postgres &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;+</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;| &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;| &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; | &nbsp; &nbsp; &nbsp; &nbsp; | &nbsp; &nbsp; &nbsp; | postgres=CTc/postgres</font></div><div><font size="2"   >&nbsp;template1 | postgres | SQL_ASCII | C &nbsp; &nbsp; &nbsp; | C &nbsp; &nbsp; | =c/postgres &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;+</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;| &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;| &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; | &nbsp; &nbsp; &nbsp; &nbsp; | &nbsp; &nbsp; &nbsp; | postgres=CTc/postgres</font></div><div><font size="2"   >&nbsp;tmp &nbsp; &nbsp; &nbsp; | postgres | UTF8 &nbsp; &nbsp; &nbsp;| C &nbsp; &nbsp; &nbsp; | C &nbsp; &nbsp; |&nbsp;</font></div><div><font size="2"   >(4 rows)</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >postgres=# create database digoal template tmp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</font></div><div><font size="2"   >CREATE DATABASE</font></div><p></p></pre></div><div><span style="line-height: 28px;"   ><br></span></div><div>[参考]<wbr><div>1.&nbsp;<a style="line-height: 28px;" target="_blank" rel="nofollow" href="http://www.enterprisedb.com/docs/en/9.3/eeguide/Table%2520of%2520Contents.htm"   >http://www.enterprisedb.com/docs/en/9.3/eeguide/Table%2520of%2520Contents.htm</a></div></div><div>2.&nbsp;<a style="line-height: 28px;" target="_blank" rel="nofollow" href="http://www.enterprisedb.com/products-services-training/products/documentation"   >http://www.enterprisedb.com/products-services-training/products/documentation</a></div><div>3.&nbsp;<a style="line-height: 28px;" target="_blank" rel="nofollow" href="http://www.enterprisedb.com/products-services-training/products/documentation/enterpriseedition"   >http://www.enterprisedb.com/products-services-training/products/documentation/enterpriseedition</a></div><div><div style="line-height: 28px;"   >4.&nbsp;<a style="line-height: 28px;" target="_blank" href="http://blog.163.com/digoal@126/blog/static/163877040201210172341257"   >http://blog.163.com/digoal@126/blog/static/163877040201210172341257</a></div><div style="line-height: 28px;"   >5.&nbsp;<a style="line-height: 28px;" target="_blank" href="http://blog.163.com/digoal@126/blog/static/163877040201341353342245/"   >http://blog.163.com/digoal@126/blog/static/163877040201341353342245/</a></div><div style="line-height: 28px;"   >6.&nbsp;<a style="line-height: 28px;" target="_blank" href="http://blog.163.com/digoal@126/blog/static/16387704020128772037884/"   >http://blog.163.com/digoal@126/blog/static/16387704020128772037884/</a></div><div style="line-height: 28px;"   >7.&nbsp;<a style="line-height: 28px;" target="_blank" href="http://blog.163.com/digoal@126/blog/static/1638770402012325111528424/"   >http://blog.163.com/digoal@126/blog/static/1638770402012325111528424/</a></div><div style="line-height: 28px;"   >8.&nbsp;<a style="line-height: 28px;" target="_blank" href="http://blog.163.com/digoal@126/blog/static/16387704020123183115240"   >http://blog.163.com/digoal@126/blog/static/16387704020123183115240</a></div><div style="line-height: 28px;"   >9.&nbsp;<a style="line-height: 28px;" target="_blank" href="http://blog.163.com/digoal@126/blog/static/163877040201422883734398"   >http://blog.163.com/digoal@126/blog/static/163877040201422883734398</a></div></div><div><div style="line-height: 28px;"   >10.&nbsp;<a style="line-height: 28px;" target="_blank" href="http://blog.163.com/digoal@126/blog/static/1638770402012019112218804/"   >http://blog.163.com/digoal@126/blog/static/1638770402012019112218804/</a></div><div style="line-height: 28px;"   >11.&nbsp;<a style="line-height: 28px;" target="_blank" href="http://blog.163.com/digoal@126/blog/static/163877040201421702248430/"   >http://blog.163.com/digoal@126/blog/static/163877040201421702248430/</a></div></div><div><br></div>
<a rel="nofollow" href="http://info.flagcounter.com/h9V1"   ><img title="EnterpriseDB (EDB) Postgres Plus Advanced Server (ppas) features not in PostgreSQL 1 - install ppas in linux use text mode - 德哥@Digoal - PostgreSQL"   src="http://s03.flagcounter.com/count/h9V1/bg_FFFFFF/txt_000000/border_CCCCCC/columns_2/maxflags_12/viewers_0/labels_0/pageviews_0/flags_0/"   alt="Flag Counter"   border="0"   ></a></div>
	</div>
</div>
</body>
</html>